\doxysection{basereload.\+py}
\hypertarget{basereload_8py_source}{}\label{basereload_8py_source}\index{micro\_gestion\_objetos/venv/Lib/site-\/packages/uvicorn/supervisors/basereload.py@{micro\_gestion\_objetos/venv/Lib/site-\/packages/uvicorn/supervisors/basereload.py}}
\mbox{\hyperlink{basereload_8py}{Ir a la documentaci√≥n de este archivo.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00001}\mbox{\hyperlink{namespaceuvicorn_1_1supervisors_1_1basereload}{00001}}\ \textcolor{keyword}{from}\ \_\_future\_\_\ \textcolor{keyword}{import}\ annotations}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00003}00003\ \textcolor{keyword}{import}\ logging}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00004}00004\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00005}00005\ \textcolor{keyword}{import}\ signal}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00006}00006\ \textcolor{keyword}{import}\ sys}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00007}00007\ \textcolor{keyword}{import}\ threading}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00008}00008\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacecollections_1_1abc}{collections.abc}}\ \textcolor{keyword}{import}\ Iterator}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00009}00009\ \textcolor{keyword}{from}\ pathlib\ \textcolor{keyword}{import}\ Path}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00010}00010\ \textcolor{keyword}{from}\ socket\ \textcolor{keyword}{import}\ socket}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00011}00011\ \textcolor{keyword}{from}\ types\ \textcolor{keyword}{import}\ FrameType}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00012}00012\ \textcolor{keyword}{from}\ typing\ \textcolor{keyword}{import}\ Callable}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00014}00014\ \textcolor{keyword}{import}\ click}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00015}00015\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00016}00016\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespaceuvicorn_1_1__subprocess}{uvicorn.\_subprocess}}\ \textcolor{keyword}{import}\ get\_subprocess}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00017}00017\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespaceuvicorn_1_1config}{uvicorn.config}}\ \textcolor{keyword}{import}\ Config}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00019}\mbox{\hyperlink{namespaceuvicorn_1_1supervisors_1_1basereload_ac19aa5704f4f8dbb9a1c969d6f4a55d8}{00019}}\ HANDLED\_SIGNALS\ =\ (}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00020}00020\ \ \ \ \ signal.SIGINT,\ \ \textcolor{comment}{\#\ Unix\ signal\ 2.\ Sent\ by\ Ctrl+C.}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00021}00021\ \ \ \ \ signal.SIGTERM,\ \ \textcolor{comment}{\#\ Unix\ signal\ 15.\ Sent\ by\ \`{}kill\ <pid>`.}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00022}00022\ )}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00024}\mbox{\hyperlink{namespaceuvicorn_1_1supervisors_1_1basereload_a40405c7d6b8fc488e60d1b1e93353094}{00024}}\ logger\ =\ logging.getLogger(\textcolor{stringliteral}{"{}uvicorn.error"{}})}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00027}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload}{00027}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload}{BaseReload}}:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00028}00028\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00029}00029\ \ \ \ \ \ \ \ \ self,}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00030}00030\ \ \ \ \ \ \ \ \ config:\ Config,}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00031}00031\ \ \ \ \ \ \ \ \ target:\ Callable[[list[socket]\ |\ \textcolor{keywordtype}{None}],\ \textcolor{keywordtype}{None}],}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00032}00032\ \ \ \ \ \ \ \ \ sockets:\ list[socket],}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00033}00033\ \ \ \ \ )\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00034}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a1855ef9737897ae520864e7abfa53bfb}{00034}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a1855ef9737897ae520864e7abfa53bfb}{config}}\ =\ config}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00035}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a0822760a35bb9804acf7fb70e7a4e3bf}{00035}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a0822760a35bb9804acf7fb70e7a4e3bf}{target}}\ =\ target}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00036}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_aa407c841352253d5d6ae86af0240e0a1}{00036}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_aa407c841352253d5d6ae86af0240e0a1}{sockets}}\ =\ sockets}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00037}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a11f5b0605d6368355f1f4c4ca6a24055}{00037}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a11f5b0605d6368355f1f4c4ca6a24055}{should\_exit}}\ =\ threading.Event()}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00038}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_ac4048f520121190f5e1cc3a08e83fd6b}{00038}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_ac4048f520121190f5e1cc3a08e83fd6b}{pid}}\ =\ os.getpid()}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00039}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_af50aff16537c3d418827517fc82c95e3}{00039}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_af50aff16537c3d418827517fc82c95e3}{is\_restarting}}\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00040}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_ad436f6a1a9e4df02e6b3fb0a6de60331}{00040}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_ad436f6a1a9e4df02e6b3fb0a6de60331}{reloader\_name}}:\ str\ |\ \textcolor{keywordtype}{None}\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00042}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a24452d56fd8f357696d56f4a2c1a6561}{00042}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a075dac0021a278bf29c47291d4d6482f}{signal\_handler}}(self,\ sig:\ int,\ frame:\ FrameType\ |\ \textcolor{keywordtype}{None})\ -\/>\ \textcolor{keywordtype}{None}:\ \ \textcolor{comment}{\#\ pragma:\ full\ coverage}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00043}00043\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00044}00044\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ A\ signal\ handler\ that\ is\ registered\ with\ the\ parent\ process.}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00045}00045\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00046}00046\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ sys.platform\ ==\ \textcolor{stringliteral}{"{}win32"{}}\ \textcolor{keywordflow}{and}\ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_af50aff16537c3d418827517fc82c95e3}{is\_restarting}}:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00047}00047\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_af50aff16537c3d418827517fc82c95e3}{is\_restarting}}\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00048}00048\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00049}00049\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a11f5b0605d6368355f1f4c4ca6a24055}{should\_exit}}.set()}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00051}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a4e12c2b7457b4a2690b7cacb9eb439cc}{00051}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a4e12c2b7457b4a2690b7cacb9eb439cc}{run}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00052}00052\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_abd87b71b8fb3a67321db2354f0378758}{startup}}()}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00053}00053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ changes\ \textcolor{keywordflow}{in}\ self:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00054}00054\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ changes:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00055}00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ logger.warning(}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00056}00056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\%s\ detected\ changes\ in\ \%s.\ Reloading..."{}},}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00057}00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_ad436f6a1a9e4df02e6b3fb0a6de60331}{reloader\_name}},}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00058}00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{},\ "{}}.join(map(\_display\_path,\ changes)),}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00059}00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00060}00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a7e3a22e3a40e4e03ce570463e2aa61df}{restart}}()}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00061}00061\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00062}00062\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a63246cca42ab402f340c0215ba2aae65}{shutdown}}()}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00063}00063\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00064}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a97e3481850d5bda8202517105a0eceb9}{00064}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a97e3481850d5bda8202517105a0eceb9}{pause}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00065}00065\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a11f5b0605d6368355f1f4c4ca6a24055}{should\_exit}}.wait(self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a1855ef9737897ae520864e7abfa53bfb}{config}}.reload\_delay):}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00066}00066\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ StopIteration()}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00068}00068\ \ \ \ \ \textcolor{keyword}{def\ }\_\_iter\_\_(self)\ -\/>\ Iterator[list[Path]\ |\ None]:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00069}00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00071}00071\ \ \ \ \ \textcolor{keyword}{def\ }\_\_next\_\_(self)\ -\/>\ list[Path]\ |\ None:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00072}00072\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a697467254e3c70f7a00a27eab4b18826}{should\_restart}}()}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00073}00073\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00074}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_abd87b71b8fb3a67321db2354f0378758}{00074}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_abd87b71b8fb3a67321db2354f0378758}{startup}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00075}00075\ \ \ \ \ \ \ \ \ message\ =\ f\textcolor{stringliteral}{"{}Started\ reloader\ process\ [\{self.pid\}]\ using\ \{self.reloader\_name\}"{}}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00076}00076\ \ \ \ \ \ \ \ \ color\_message\ =\ \textcolor{stringliteral}{"{}Started\ reloader\ process\ [\{\}]\ using\ \{\}"{}}.format(}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00077}00077\ \ \ \ \ \ \ \ \ \ \ \ \ click.style(str(self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_ac4048f520121190f5e1cc3a08e83fd6b}{pid}}),\ fg=\textcolor{stringliteral}{"{}cyan"{}},\ bold=\textcolor{keyword}{True}),}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00078}00078\ \ \ \ \ \ \ \ \ \ \ \ \ click.style(str(self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_ad436f6a1a9e4df02e6b3fb0a6de60331}{reloader\_name}}),\ fg=\textcolor{stringliteral}{"{}cyan"{}},\ bold=\textcolor{keyword}{True}),}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00079}00079\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00080}00080\ \ \ \ \ \ \ \ \ logger.info(message,\ extra=\{\textcolor{stringliteral}{"{}color\_message"{}}:\ color\_message\})}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00081}00081\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00082}00082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ sig\ \textcolor{keywordflow}{in}\ HANDLED\_SIGNALS:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00083}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a075dac0021a278bf29c47291d4d6482f}{00083}}\ \ \ \ \ \ \ \ \ \ \ \ \ signal.signal(sig,\ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a075dac0021a278bf29c47291d4d6482f}{signal\_handler}})}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00084}00084\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00085}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a78ccadfa2575f3f7aa21afb32f5f8fde}{00085}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a78ccadfa2575f3f7aa21afb32f5f8fde}{process}}\ =\ get\_subprocess(config=self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a1855ef9737897ae520864e7abfa53bfb}{config}},\ target=self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a0822760a35bb9804acf7fb70e7a4e3bf}{target}},\ sockets=self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_aa407c841352253d5d6ae86af0240e0a1}{sockets}})}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00086}00086\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a78ccadfa2575f3f7aa21afb32f5f8fde}{process}}.start()}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00087}00087\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00088}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a7e3a22e3a40e4e03ce570463e2aa61df}{00088}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a7e3a22e3a40e4e03ce570463e2aa61df}{restart}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00089}00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ sys.platform\ ==\ \textcolor{stringliteral}{"{}win32"{}}:\ \ \textcolor{comment}{\#\ pragma:\ py-\/not-\/win32}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00090}00090\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_af50aff16537c3d418827517fc82c95e3}{is\_restarting}}\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a78ccadfa2575f3f7aa21afb32f5f8fde}{process}}.pid\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00092}00092\ \ \ \ \ \ \ \ \ \ \ \ \ os.kill(self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a78ccadfa2575f3f7aa21afb32f5f8fde}{process}}.pid,\ signal.CTRL\_C\_EVENT)}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00093}00093\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ is\ a\ workaround\ to\ ensure\ the\ Ctrl+C\ event\ is\ processed}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00095}00095\ \ \ \ \ \ \ \ \ \ \ \ \ sys.stdout.write(\textcolor{stringliteral}{"{}\ "{}})\ \ \textcolor{comment}{\#\ This\ has\ to\ be\ a\ non-\/empty\ string}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00096}00096\ \ \ \ \ \ \ \ \ \ \ \ \ sys.stdout.flush()}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00097}00097\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:\ \ \textcolor{comment}{\#\ pragma:\ py-\/win32}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00098}00098\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a78ccadfa2575f3f7aa21afb32f5f8fde}{process}}.terminate()}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00099}00099\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a78ccadfa2575f3f7aa21afb32f5f8fde}{process}}.join()}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00100}00100\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00101}00101\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a78ccadfa2575f3f7aa21afb32f5f8fde}{process}}\ =\ get\_subprocess(config=self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a1855ef9737897ae520864e7abfa53bfb}{config}},\ target=self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a0822760a35bb9804acf7fb70e7a4e3bf}{target}},\ sockets=self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_aa407c841352253d5d6ae86af0240e0a1}{sockets}})}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00102}00102\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a78ccadfa2575f3f7aa21afb32f5f8fde}{process}}.start()}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00103}00103\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00104}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a63246cca42ab402f340c0215ba2aae65}{00104}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a63246cca42ab402f340c0215ba2aae65}{shutdown}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00105}00105\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ sys.platform\ ==\ \textcolor{stringliteral}{"{}win32"{}}:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00106}00106\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a11f5b0605d6368355f1f4c4ca6a24055}{should\_exit}}.set()\ \ \textcolor{comment}{\#\ pragma:\ py-\/not-\/win32}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00107}00107\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00108}00108\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a78ccadfa2575f3f7aa21afb32f5f8fde}{process}}.terminate()\ \ \textcolor{comment}{\#\ pragma:\ py-\/win32}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00109}00109\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a78ccadfa2575f3f7aa21afb32f5f8fde}{process}}.join()}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00110}00110\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00111}00111\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ sock\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_aa407c841352253d5d6ae86af0240e0a1}{sockets}}:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00112}00112\ \ \ \ \ \ \ \ \ \ \ \ \ sock.close()}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00113}00113\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00114}00114\ \ \ \ \ \ \ \ \ message\ =\ f\textcolor{stringliteral}{"{}Stopping\ reloader\ process\ [\{str(self.pid)\}]"{}}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00115}00115\ \ \ \ \ \ \ \ \ color\_message\ =\ \textcolor{stringliteral}{"{}Stopping\ reloader\ process\ [\{\}]"{}}.format(click.style(str(self.\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_ac4048f520121190f5e1cc3a08e83fd6b}{pid}}),\ fg=\textcolor{stringliteral}{"{}cyan"{}},\ bold=\textcolor{keyword}{True}))}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00116}00116\ \ \ \ \ \ \ \ \ logger.info(message,\ extra=\{\textcolor{stringliteral}{"{}color\_message"{}}:\ color\_message\})}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00117}00117\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00118}\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a697467254e3c70f7a00a27eab4b18826}{00118}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classuvicorn_1_1supervisors_1_1basereload_1_1_base_reload_a697467254e3c70f7a00a27eab4b18826}{should\_restart}}(self)\ -\/>\ list[Path]\ |\ None:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00119}00119\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ NotImplementedError(\textcolor{stringliteral}{"{}Reload\ strategies\ should\ override\ should\_restart()"{}})}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00121}00121\ }
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00122}\mbox{\hyperlink{namespaceuvicorn_1_1supervisors_1_1basereload_aafb8c773803a3464a9b0b8993eff1a5c}{00122}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceuvicorn_1_1supervisors_1_1basereload_aafb8c773803a3464a9b0b8993eff1a5c}{\_display\_path}}(path:\ Path)\ -\/>\ str:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00123}00123\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00124}00124\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ f\textcolor{stringliteral}{"{}'\{path.relative\_to(Path.cwd())\}'"{}}}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00125}00125\ \ \ \ \ \textcolor{keywordflow}{except}\ ValueError:}
\DoxyCodeLine{\Hypertarget{basereload_8py_source_l00126}00126\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ f\textcolor{stringliteral}{"{}'\{path\}'"{}}}

\end{DoxyCode}
