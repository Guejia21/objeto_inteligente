\doxysection{formparsers.\+py}
\hypertarget{formparsers_8py_source}{}\label{formparsers_8py_source}\index{micro\_gestion\_objetos/venv/Lib/site-\/packages/starlette/formparsers.py@{micro\_gestion\_objetos/venv/Lib/site-\/packages/starlette/formparsers.py}}
\mbox{\hyperlink{formparsers_8py}{Ir a la documentaciÃ³n de este archivo.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00001}\mbox{\hyperlink{namespacestarlette_1_1formparsers}{00001}}\ \textcolor{keyword}{from}\ \_\_future\_\_\ \textcolor{keyword}{import}\ annotations}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00003}00003\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacecollections_1_1abc}{collections.abc}}\ \textcolor{keyword}{import}\ AsyncGenerator}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00004}00004\ \textcolor{keyword}{from}\ dataclasses\ \textcolor{keyword}{import}\ dataclass,\ field}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00005}00005\ \textcolor{keyword}{from}\ enum\ \textcolor{keyword}{import}\ Enum}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00006}00006\ \textcolor{keyword}{from}\ tempfile\ \textcolor{keyword}{import}\ SpooledTemporaryFile}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00007}00007\ \textcolor{keyword}{from}\ typing\ \textcolor{keyword}{import}\ TYPE\_CHECKING}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00008}00008\ \textcolor{keyword}{from}\ urllib.parse\ \textcolor{keyword}{import}\ unquote\_plus}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00010}00010\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacestarlette_1_1datastructures}{starlette.datastructures}}\ \textcolor{keyword}{import}\ FormData,\ Headers,\ UploadFile}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00012}00012\ \textcolor{keywordflow}{if}\ TYPE\_CHECKING:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00013}00013\ \ \ \ \ \textcolor{keyword}{import}\ python\_multipart\ \textcolor{keyword}{as}\ multipart}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00014}00014\ \ \ \ \ \textcolor{keyword}{from}\ python\_multipart.multipart\ \textcolor{keyword}{import}\ MultipartCallbacks,\ QuerystringCallbacks,\ parse\_options\_header}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00015}00015\ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00016}00016\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00017}00017\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00018}00018\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{import}\ python\_multipart\ \textcolor{keyword}{as}\ multipart}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00019}00019\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ python\_multipart.multipart\ \textcolor{keyword}{import}\ parse\_options\_header}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00020}00020\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ ModuleNotFoundError:\ \ \textcolor{comment}{\#\ pragma:\ no\ cover}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00021}00021\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{import}\ multipart}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00022}00022\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{from}\ multipart.multipart\ \textcolor{keyword}{import}\ parse\_options\_header}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00023}00023\ \ \ \ \ \textcolor{keywordflow}{except}\ ModuleNotFoundError:\ \ \textcolor{comment}{\#\ pragma:\ no\ cover}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00024}\mbox{\hyperlink{namespacestarlette_1_1formparsers_a227e525dfa8e4d9cb147578f23aff392}{00024}}\ \ \ \ \ \ \ \ \ multipart\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00025}\mbox{\hyperlink{namespacestarlette_1_1formparsers_a296e841db42ef195e7603652ae6ffe2e}{00025}}\ \ \ \ \ \ \ \ \ parse\_options\_header\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00028}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_message}{00028}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_message}{FormMessage}}(Enum):}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00029}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_message_a3d627f4a635481252866214756305f1a}{00029}}\ \ \ \ \ FIELD\_START\ =\ 1}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00030}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_message_a9d1d5d4711c65ab5a5c3cc13462d729b}{00030}}\ \ \ \ \ FIELD\_NAME\ =\ 2}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00031}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_message_a44ae9641ec5ff2a57c5a8824ee02c698}{00031}}\ \ \ \ \ FIELD\_DATA\ =\ 3}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00032}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_message_a9f5438dc71e5a71a93aa82589aefc741}{00032}}\ \ \ \ \ FIELD\_END\ =\ 4}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00033}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_message_a655d72b0b71e59eed1138a7c786dcce9}{00033}}\ \ \ \ \ END\ =\ 5}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00036}00036\ \textcolor{preprocessor}{@dataclass}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00037}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multipart_part}{00037}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multipart_part}{MultipartPart}}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00038}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multipart_part_a9eae2f3c4d137784ef79ec0048e58a33}{00038}}\ \ \ \ \ content\_disposition:\ bytes\ |\ \textcolor{keywordtype}{None}\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00039}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multipart_part_aff2dff53d5538498dc1256f4e2bbf87d}{00039}}\ \ \ \ \ field\_name:\ str\ =\ \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00040}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multipart_part_ad77eb6adec71ceb26a3732bc2614c065}{00040}}\ \ \ \ \ data:\ bytearray\ =\ field(default\_factory=bytearray)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00041}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multipart_part_a680cc76aa9f414f1ffdd4ce74949cc3a}{00041}}\ \ \ \ \ file:\ UploadFile\ |\ \textcolor{keywordtype}{None}\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00042}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multipart_part_ae86bab512c4d1efb8b4e66620265e856}{00042}}\ \ \ \ \ item\_headers:\ list[tuple[bytes,\ bytes]]\ =\ field(default\_factory=list)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00045}\mbox{\hyperlink{namespacestarlette_1_1formparsers_a79e3531a9b54216d510fb0a13b714dd2}{00045}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacestarlette_1_1formparsers_a79e3531a9b54216d510fb0a13b714dd2}{\_user\_safe\_decode}}(src:\ bytes\ |\ bytearray,\ codec:\ str)\ -\/>\ str:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00046}00046\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00047}00047\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ src.decode(codec)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00048}00048\ \ \ \ \ \textcolor{keywordflow}{except}\ (UnicodeDecodeError,\ LookupError):}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00049}00049\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ src.decode(\textcolor{stringliteral}{"{}latin-\/1"{}})}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00052}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_exception}{00052}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_exception}{MultiPartException}}(Exception):}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00053}00053\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ message:\ str)\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00054}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_exception_a9d443c532fd967b37a0b923fc9ab1d4f}{00054}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_exception_a9d443c532fd967b37a0b923fc9ab1d4f}{message}}\ =\ message}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00055}00055\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00056}00056\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00057}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser}{00057}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser}{FormParser}}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00058}00058\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ headers:\ Headers,\ stream:\ AsyncGenerator[bytes,\ \textcolor{keywordtype}{None}])\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00059}00059\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ multipart\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None},\ \textcolor{stringliteral}{"{}The\ \`{}python-\/multipart`\ library\ must\ be\ installed\ to\ use\ form\ parsing."{}}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00060}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_adfe8ee9ed56883e98b320dd02d3c064b}{00060}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_adfe8ee9ed56883e98b320dd02d3c064b}{headers}}\ =\ headers}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00061}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a8fa1707a44e7e13e041277619415b250}{00061}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a8fa1707a44e7e13e041277619415b250}{stream}}\ =\ stream}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00062}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a40618607b45c43c868b16970df91b75b}{00062}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a40618607b45c43c868b16970df91b75b}{messages}}:\ list[tuple[FormMessage,\ bytes]]\ =\ []}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00063}00063\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00064}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a5deaa39fb5c1b39eda077217f0b41e85}{00064}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a5deaa39fb5c1b39eda077217f0b41e85}{on\_field\_start}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00065}00065\ \ \ \ \ \ \ \ \ message\ =\ (FormMessage.FIELD\_START,\ b\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00066}00066\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a40618607b45c43c868b16970df91b75b}{messages}}.append(message)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00068}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a3c2e0607e5eacf5938ff325eaca36204}{00068}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a3c2e0607e5eacf5938ff325eaca36204}{on\_field\_name}}(self,\ data:\ bytes,\ start:\ int,\ end:\ int)\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00069}00069\ \ \ \ \ \ \ \ \ message\ =\ (FormMessage.FIELD\_NAME,\ data[start:end])}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00070}00070\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a40618607b45c43c868b16970df91b75b}{messages}}.append(message)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00071}00071\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00072}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_ae94f475ae462aa93e9e59795e38e55ae}{00072}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_ae94f475ae462aa93e9e59795e38e55ae}{on\_field\_data}}(self,\ data:\ bytes,\ start:\ int,\ end:\ int)\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00073}00073\ \ \ \ \ \ \ \ \ message\ =\ (FormMessage.FIELD\_DATA,\ data[start:end])}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00074}00074\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a40618607b45c43c868b16970df91b75b}{messages}}.append(message)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00075}00075\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00076}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a208511f680f801a5f23344d1e0c38df4}{00076}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a208511f680f801a5f23344d1e0c38df4}{on\_field\_end}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00077}00077\ \ \ \ \ \ \ \ \ message\ =\ (FormMessage.FIELD\_END,\ b\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00078}00078\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a40618607b45c43c868b16970df91b75b}{messages}}.append(message)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00079}00079\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00080}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a170112ee9397f49906feecea8d3331fd}{00080}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a170112ee9397f49906feecea8d3331fd}{on\_end}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00081}00081\ \ \ \ \ \ \ \ \ message\ =\ (FormMessage.END,\ b\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00082}00082\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a40618607b45c43c868b16970df91b75b}{messages}}.append(message)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00084}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_adc555df120f6fe7aba6661e9983f6f2d}{00084}}\ \ \ \ \ \textcolor{keyword}{async\ def\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_adc555df120f6fe7aba6661e9983f6f2d}{parse}}(self)\ -\/>\ FormData:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00085}00085\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Callbacks\ dictionary.}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00086}00086\ \ \ \ \ \ \ \ \ callbacks:\ QuerystringCallbacks\ =\ \{}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00087}00087\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}on\_field\_start"{}}:\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a5deaa39fb5c1b39eda077217f0b41e85}{on\_field\_start}},}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00088}00088\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}on\_field\_name"{}}:\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a3c2e0607e5eacf5938ff325eaca36204}{on\_field\_name}},}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00089}00089\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}on\_field\_data"{}}:\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_ae94f475ae462aa93e9e59795e38e55ae}{on\_field\_data}},}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00090}00090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}on\_field\_end"{}}:\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a208511f680f801a5f23344d1e0c38df4}{on\_field\_end}},}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}on\_end"{}}:\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a170112ee9397f49906feecea8d3331fd}{on\_end}},}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00092}00092\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00093}00093\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00094}00094\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Create\ the\ parser.}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00095}00095\ \ \ \ \ \ \ \ \ parser\ =\ multipart.QuerystringParser(callbacks)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00096}00096\ \ \ \ \ \ \ \ \ field\_name\ =\ b\textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00097}00097\ \ \ \ \ \ \ \ \ field\_value\ =\ b\textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00098}00098\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00099}00099\ \ \ \ \ \ \ \ \ items:\ list[tuple[str,\ str\ |\ UploadFile]]\ =\ []}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00100}00100\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00101}00101\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Feed\ the\ parser\ with\ data\ from\ the\ request.}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00102}00102\ \ \ \ \ \ \ \ \ \textcolor{keyword}{async}\ \textcolor{keywordflow}{for}\ chunk\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a8fa1707a44e7e13e041277619415b250}{stream}}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00103}00103\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ chunk:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00104}00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parser.write(chunk)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00105}00105\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00106}00106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parser.finalize()}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00107}00107\ \ \ \ \ \ \ \ \ \ \ \ \ messages\ =\ list(self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a40618607b45c43c868b16970df91b75b}{messages}})}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00108}00108\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_form_parser_a40618607b45c43c868b16970df91b75b}{messages}}.clear()}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00109}00109\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ message\_type,\ message\_bytes\ \textcolor{keywordflow}{in}\ messages:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00110}00110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ message\_type\ ==\ FormMessage.FIELD\_START:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00111}00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ field\_name\ =\ b\textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00112}00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ field\_value\ =\ b\textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00113}00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ message\_type\ ==\ FormMessage.FIELD\_NAME:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00114}00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ field\_name\ +=\ message\_bytes}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00115}00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ message\_type\ ==\ FormMessage.FIELD\_DATA:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00116}00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ field\_value\ +=\ message\_bytes}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00117}00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ message\_type\ ==\ FormMessage.FIELD\_END:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00118}00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ name\ =\ unquote\_plus(field\_name.decode(\textcolor{stringliteral}{"{}latin-\/1"{}}))}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00119}00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ value\ =\ unquote\_plus(field\_value.decode(\textcolor{stringliteral}{"{}latin-\/1"{}}))}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00120}00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ items.append((name,\ value))}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00121}00121\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00122}00122\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classstarlette_1_1datastructures_1_1_form_data}{FormData}}(items)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00123}00123\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00124}00124\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00125}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser}{00125}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser}{MultiPartParser}}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00126}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adb9c8d6417ecf9030f0b30954fe23d15}{00126}}\ \ \ \ \ spool\_max\_size\ =\ 1024\ *\ 1024\ \ \textcolor{comment}{\#\ 1MB}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00127}00127\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}The\ maximum\ size\ of\ the\ spooled\ temporary\ file\ used\ to\ store\ file\ data."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00128}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a975ea9bde813614aa37d6ee80ea19c6e}{00128}}\ \ \ \ \ max\_part\_size\ =\ 1024\ *\ 1024\ \ \textcolor{comment}{\#\ 1MB}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00129}00129\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}The\ maximum\ size\ of\ a\ part\ in\ the\ multipart\ request."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00130}00130\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00131}00131\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00132}00132\ \ \ \ \ \ \ \ \ self,}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00133}00133\ \ \ \ \ \ \ \ \ headers:\ Headers,}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00134}00134\ \ \ \ \ \ \ \ \ stream:\ AsyncGenerator[bytes,\ \textcolor{keywordtype}{None}],}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00135}00135\ \ \ \ \ \ \ \ \ *,}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00136}00136\ \ \ \ \ \ \ \ \ max\_files:\ int\ |\ float\ =\ 1000,}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00137}00137\ \ \ \ \ \ \ \ \ max\_fields:\ int\ |\ float\ =\ 1000,}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00138}00138\ \ \ \ \ \ \ \ \ max\_part\_size:\ int\ =\ 1024\ *\ 1024,\ \ \textcolor{comment}{\#\ 1MB}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00139}00139\ \ \ \ \ )\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00140}00140\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ multipart\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None},\ \textcolor{stringliteral}{"{}The\ \`{}python-\/multipart`\ library\ must\ be\ installed\ to\ use\ form\ parsing."{}}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00141}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_ae85654af6b9eaa5d63d6be05c2f9457f}{00141}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_ae85654af6b9eaa5d63d6be05c2f9457f}{headers}}\ =\ headers}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00142}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_abd9b8b22a5f333b813aa3474898f7ded}{00142}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_abd9b8b22a5f333b813aa3474898f7ded}{stream}}\ =\ stream}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00143}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_abe6f4d43b4767d79d2733d21c5c48b3c}{00143}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_abe6f4d43b4767d79d2733d21c5c48b3c}{max\_files}}\ =\ max\_files}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00144}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a5b01fe29ece489185b3cca557f3de325}{00144}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a5b01fe29ece489185b3cca557f3de325}{max\_fields}}\ =\ max\_fields}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00145}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a4bd54e413d4d8d523fffd320cd4c96c1}{00145}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a4bd54e413d4d8d523fffd320cd4c96c1}{items}}:\ list[tuple[str,\ str\ |\ UploadFile]]\ =\ []}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00146}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a044f84c19b3a0c04c232fd4920ca7ccf}{00146}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a044f84c19b3a0c04c232fd4920ca7ccf}{\_current\_files}}\ =\ 0}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00147}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_acda406f8571efe455a1b96de1369af42}{00147}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_acda406f8571efe455a1b96de1369af42}{\_current\_fields}}\ =\ 0}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00148}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a5599524cf456a10e0a8812fad4073b99}{00148}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a5599524cf456a10e0a8812fad4073b99}{\_current\_partial\_header\_name}}:\ bytes\ =\ b\textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00149}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_af86d6bc8d2938c8648c35fde5f69642b}{00149}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_af86d6bc8d2938c8648c35fde5f69642b}{\_current\_partial\_header\_value}}:\ bytes\ =\ b\textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00150}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{00150}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}\ =\ \mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multipart_part}{MultipartPart}}()}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00151}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a444d65772ccdba9d41f63eac975aa810}{00151}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a444d65772ccdba9d41f63eac975aa810}{\_charset}}\ =\ \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00152}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a6e724b5ad48a4b1f4e3a45293d179995}{00152}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a6e724b5ad48a4b1f4e3a45293d179995}{\_file\_parts\_to\_write}}:\ list[tuple[MultipartPart,\ bytes]]\ =\ []}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00153}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_aed1b7be9dce2018ad500287e87e02266}{00153}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_aed1b7be9dce2018ad500287e87e02266}{\_file\_parts\_to\_finish}}:\ list[MultipartPart]\ =\ []}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00154}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a5473ab3551e22896a929e2b284d31e61}{00154}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a5473ab3551e22896a929e2b284d31e61}{\_files\_to\_close\_on\_error}}:\ list[SpooledTemporaryFile[bytes]]\ =\ []}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00155}00155\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a975ea9bde813614aa37d6ee80ea19c6e}{max\_part\_size}}\ =\ max\_part\_size}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00156}00156\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00157}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a8d4cbf4f1884c1d7e1c46c5777c6b2fe}{00157}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a8d4cbf4f1884c1d7e1c46c5777c6b2fe}{on\_part\_begin}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00158}00158\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}\ =\ \mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multipart_part}{MultipartPart}}()}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00159}00159\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00160}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a68b3a4ac1bc2ee12c62cfcc3abe2c23b}{00160}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a68b3a4ac1bc2ee12c62cfcc3abe2c23b}{on\_part\_data}}(self,\ data:\ bytes,\ start:\ int,\ end:\ int)\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00161}00161\ \ \ \ \ \ \ \ \ message\_bytes\ =\ data[start:end]}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00162}00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}.file\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00163}00163\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ len(self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}.data)\ +\ len(message\_bytes)\ >\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a975ea9bde813614aa37d6ee80ea19c6e}{max\_part\_size}}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00164}00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_exception}{MultiPartException}}(f\textcolor{stringliteral}{"{}Part\ exceeded\ maximum\ size\ of\ \{int(self.max\_part\_size\ /\ 1024)\}KB."{}})}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00165}00165\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}.data.extend(message\_bytes)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00166}00166\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00167}00167\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a6e724b5ad48a4b1f4e3a45293d179995}{\_file\_parts\_to\_write}}.append((self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}},\ message\_bytes))}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00168}00168\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00169}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a3d6738a31f304ddbc897c8cba8afff33}{00169}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a3d6738a31f304ddbc897c8cba8afff33}{on\_part\_end}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00170}00170\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}.file\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00171}00171\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a4bd54e413d4d8d523fffd320cd4c96c1}{items}}.append(}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00172}00172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00173}00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}.field\_name,}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00174}00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacestarlette_1_1formparsers_a79e3531a9b54216d510fb0a13b714dd2}{\_user\_safe\_decode}}(self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}.data,\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a444d65772ccdba9d41f63eac975aa810}{\_charset}}),}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00175}00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00176}00176\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00177}00177\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00178}00178\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_aed1b7be9dce2018ad500287e87e02266}{\_file\_parts\_to\_finish}}.append(self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}})}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00179}00179\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ The\ file\ can\ be\ added\ to\ the\ items\ right\ now\ even\ though\ it's\ not}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00180}00180\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ finished\ yet,\ because\ it\ will\ be\ finished\ in\ the\ \`{}parse()`\ method,\ before}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00181}00181\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ self.items\ is\ used\ in\ the\ return\ value.}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00182}00182\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a4bd54e413d4d8d523fffd320cd4c96c1}{items}}.append((self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}.field\_name,\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}.file))}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00183}00183\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00184}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_af9c57c67957df4fd0739dc0d84b6d113}{00184}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_af9c57c67957df4fd0739dc0d84b6d113}{on\_header\_field}}(self,\ data:\ bytes,\ start:\ int,\ end:\ int)\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00185}00185\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a5599524cf456a10e0a8812fad4073b99}{\_current\_partial\_header\_name}}\ +=\ data[start:end]}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00186}00186\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00187}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a47a91b804a3a2be9d825707c3b724a3e}{00187}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a47a91b804a3a2be9d825707c3b724a3e}{on\_header\_value}}(self,\ data:\ bytes,\ start:\ int,\ end:\ int)\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00188}00188\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_af86d6bc8d2938c8648c35fde5f69642b}{\_current\_partial\_header\_value}}\ +=\ data[start:end]}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00189}00189\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00190}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_aa8c00ab463e1f21a21f9636ec608aa33}{00190}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_aa8c00ab463e1f21a21f9636ec608aa33}{on\_header\_end}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00191}00191\ \ \ \ \ \ \ \ \ field\ =\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a5599524cf456a10e0a8812fad4073b99}{\_current\_partial\_header\_name}}.lower()}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00192}00192\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ field\ ==\ b\textcolor{stringliteral}{"{}content-\/disposition"{}}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00193}00193\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}.content\_disposition\ =\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_af86d6bc8d2938c8648c35fde5f69642b}{\_current\_partial\_header\_value}}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00194}00194\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}.item\_headers.append((field,\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_af86d6bc8d2938c8648c35fde5f69642b}{\_current\_partial\_header\_value}}))}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00195}00195\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a5599524cf456a10e0a8812fad4073b99}{\_current\_partial\_header\_name}}\ =\ b\textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00196}00196\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_af86d6bc8d2938c8648c35fde5f69642b}{\_current\_partial\_header\_value}}\ =\ b\textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00197}00197\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00198}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a7c7e48da7ac9c4660f6e28e4bceae1fc}{00198}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a7c7e48da7ac9c4660f6e28e4bceae1fc}{on\_headers\_finished}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00199}00199\ \ \ \ \ \ \ \ \ disposition,\ options\ =\ \mbox{\hyperlink{namespacestarlette_1_1formparsers_a296e841db42ef195e7603652ae6ffe2e}{parse\_options\_header}}(self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}.content\_disposition)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00200}00200\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00201}00201\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}.field\_name\ =\ \mbox{\hyperlink{namespacestarlette_1_1formparsers_a79e3531a9b54216d510fb0a13b714dd2}{\_user\_safe\_decode}}(options[b\textcolor{stringliteral}{"{}name"{}}],\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a444d65772ccdba9d41f63eac975aa810}{\_charset}})}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00202}00202\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ KeyError:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00203}00203\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_exception}{MultiPartException}}(\textcolor{stringliteral}{'The\ Content-\/Disposition\ header\ field\ "{}name"{}\ must\ be\ provided.'})}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00204}00204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ b\textcolor{stringliteral}{"{}filename"{}}\ \textcolor{keywordflow}{in}\ options:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00205}00205\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a044f84c19b3a0c04c232fd4920ca7ccf}{\_current\_files}}\ +=\ 1}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00206}00206\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a044f84c19b3a0c04c232fd4920ca7ccf}{\_current\_files}}\ >\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_abe6f4d43b4767d79d2733d21c5c48b3c}{max\_files}}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00207}00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_exception}{MultiPartException}}(f\textcolor{stringliteral}{"{}Too\ many\ files.\ Maximum\ number\ of\ files\ is\ \{self.max\_files\}."{}})}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00208}00208\ \ \ \ \ \ \ \ \ \ \ \ \ filename\ =\ \mbox{\hyperlink{namespacestarlette_1_1formparsers_a79e3531a9b54216d510fb0a13b714dd2}{\_user\_safe\_decode}}(options[b\textcolor{stringliteral}{"{}filename"{}}],\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a444d65772ccdba9d41f63eac975aa810}{\_charset}})}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00209}00209\ \ \ \ \ \ \ \ \ \ \ \ \ tempfile\ =\ SpooledTemporaryFile(max\_size=self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adb9c8d6417ecf9030f0b30954fe23d15}{spool\_max\_size}})}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00210}00210\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a5473ab3551e22896a929e2b284d31e61}{\_files\_to\_close\_on\_error}}.append(tempfile)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00211}00211\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}.file\ =\ \mbox{\hyperlink{classstarlette_1_1datastructures_1_1_upload_file}{UploadFile}}(}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00212}00212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file=tempfile,\ \ \textcolor{comment}{\#\ type:\ ignore[arg-\/type]}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00213}00213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ size=0,}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00214}00214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filename=filename,}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00215}00215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ headers=\mbox{\hyperlink{classstarlette_1_1datastructures_1_1_headers}{Headers}}(raw=self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}.item\_headers),}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00216}00216\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00217}00217\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00218}00218\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_acda406f8571efe455a1b96de1369af42}{\_current\_fields}}\ +=\ 1}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00219}00219\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_acda406f8571efe455a1b96de1369af42}{\_current\_fields}}\ >\ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a5b01fe29ece489185b3cca557f3de325}{max\_fields}}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00220}00220\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_exception}{MultiPartException}}(f\textcolor{stringliteral}{"{}Too\ many\ fields.\ Maximum\ number\ of\ fields\ is\ \{self.max\_fields\}."{}})}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00221}00221\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_adbb6ff82841ca69a33a11e1c1f644e3b}{\_current\_part}}.file\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00222}00222\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00223}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a953884be09acc7f68b3e7920bebe2353}{00223}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a953884be09acc7f68b3e7920bebe2353}{on\_end}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00224}00224\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00225}00225\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00226}\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a38503bca2b673e4addf117e7188adc9d}{00226}}\ \ \ \ \ \textcolor{keyword}{async\ def\ }\mbox{\hyperlink{classstarlette_1_1formparsers_1_1_multi_part_parser_a38503bca2b673e4addf117e7188adc9d}{parse}}(self)\ -\/>\ FormData:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00227}00227\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Parse\ the\ Content-\/Type\ header\ to\ get\ the\ multipart\ boundary.}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00228}00228\ \ \ \ \ \ \ \ \ \_,\ params\ =\ \mbox{\hyperlink{namespacestarlette_1_1formparsers_a296e841db42ef195e7603652ae6ffe2e}{parse\_options\_header}}(self.headers[\textcolor{stringliteral}{"{}Content-\/Type"{}}])}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00229}00229\ \ \ \ \ \ \ \ \ charset\ =\ params.get(b\textcolor{stringliteral}{"{}charset"{}},\ \textcolor{stringliteral}{"{}utf-\/8"{}})}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00230}00230\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ isinstance(charset,\ bytes):}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00231}00231\ \ \ \ \ \ \ \ \ \ \ \ \ charset\ =\ charset.decode(\textcolor{stringliteral}{"{}latin-\/1"{}})}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00232}00232\ \ \ \ \ \ \ \ \ self.\_charset\ =\ charset}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00233}00233\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00234}00234\ \ \ \ \ \ \ \ \ \ \ \ \ boundary\ =\ params[b\textcolor{stringliteral}{"{}boundary"{}}]}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00235}00235\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ KeyError:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00236}00236\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ MultiPartException(\textcolor{stringliteral}{"{}Missing\ boundary\ in\ multipart."{}})}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00237}00237\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00238}00238\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Callbacks\ dictionary.}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00239}00239\ \ \ \ \ \ \ \ \ callbacks:\ MultipartCallbacks\ =\ \{}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00240}00240\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}on\_part\_begin"{}}:\ self.on\_part\_begin,}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00241}00241\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}on\_part\_data"{}}:\ self.on\_part\_data,}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00242}00242\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}on\_part\_end"{}}:\ self.on\_part\_end,}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00243}00243\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}on\_header\_field"{}}:\ self.on\_header\_field,}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00244}00244\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}on\_header\_value"{}}:\ self.on\_header\_value,}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00245}00245\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}on\_header\_end"{}}:\ self.on\_header\_end,}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00246}00246\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}on\_headers\_finished"{}}:\ self.on\_headers\_finished,}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00247}00247\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}on\_end"{}}:\ self.on\_end,}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00248}00248\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00249}00249\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00250}00250\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Create\ the\ parser.}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00251}00251\ \ \ \ \ \ \ \ \ parser\ =\ multipart.MultipartParser(boundary,\ callbacks)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00252}00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00253}00253\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Feed\ the\ parser\ with\ data\ from\ the\ request.}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00254}00254\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{async}\ \textcolor{keywordflow}{for}\ chunk\ \textcolor{keywordflow}{in}\ self.stream:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00255}00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ parser.write(chunk)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00256}00256\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Write\ file\ data,\ it\ needs\ to\ use\ await\ with\ the\ UploadFile\ methods}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00257}00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ that\ call\ the\ corresponding\ file\ methods\ *in\ a\ threadpool*,}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00258}00258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ otherwise,\ if\ they\ were\ called\ directly\ in\ the\ callback\ methods\ above}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00259}00259\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ (regular,\ non-\/async\ functions),\ that\ would\ block\ the\ event\ loop\ in}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00260}00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ the\ main\ thread.}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00261}00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ part,\ data\ \textcolor{keywordflow}{in}\ self.\_file\_parts\_to\_write:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00262}00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ part.file\ \ \textcolor{comment}{\#\ for\ type\ checkers}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00263}00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ await\ part.file.write(data)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00264}00264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ part\ \textcolor{keywordflow}{in}\ self.\_file\_parts\_to\_finish:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00265}00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ part.file\ \ \textcolor{comment}{\#\ for\ type\ checkers}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00266}00266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ await\ part.file.seek(0)}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00267}00267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\_file\_parts\_to\_write.clear()}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00268}00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\_file\_parts\_to\_finish.clear()}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00269}00269\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ MultiPartException\ \textcolor{keyword}{as}\ exc:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00270}00270\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Close\ all\ the\ files\ if\ there\ was\ an\ error.}}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00271}00271\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ file\ \textcolor{keywordflow}{in}\ self.\_files\_to\_close\_on\_error:}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00272}00272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.close()}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00273}00273\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ exc}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00274}00274\ }
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00275}00275\ \ \ \ \ \ \ \ \ parser.finalize()}
\DoxyCodeLine{\Hypertarget{formparsers_8py_source_l00276}00276\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ FormData(self.items)}

\end{DoxyCode}
