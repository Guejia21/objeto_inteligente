\doxysection{\+\_\+readers.\+py}
\hypertarget{__readers_8py_source}{}\label{__readers_8py_source}\index{micro\_gestion\_objetos/venv/Lib/site-\/packages/h11/\_readers.py@{micro\_gestion\_objetos/venv/Lib/site-\/packages/h11/\_readers.py}}
\mbox{\hyperlink{__readers_8py}{Ir a la documentaciÃ³n de este archivo.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00001}\mbox{\hyperlink{namespaceh11_1_1__readers}{00001}}\ \textcolor{comment}{\#\ Code\ to\ read\ HTTP\ data}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00002}00002\ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00003}00003\ \textcolor{comment}{\#\ Strategy:\ each\ reader\ is\ a\ callable\ which\ takes\ a\ ReceiveBuffer\ object,\ and}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00004}00004\ \textcolor{comment}{\#\ either:}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00005}00005\ \textcolor{comment}{\#\ 1)\ consumes\ some\ of\ it\ and\ returns\ an\ Event}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00006}00006\ \textcolor{comment}{\#\ 2)\ raises\ a\ LocalProtocolError\ (for\ consistency\ -\/-\/\ e.g.\ we\ call\ validate()}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00007}00007\ \textcolor{comment}{\#\ \ \ \ and\ it\ might\ raise\ a\ LocalProtocolError,\ so\ simpler\ just\ to\ always\ use}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00008}00008\ \textcolor{comment}{\#\ \ \ \ this)}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00009}00009\ \textcolor{comment}{\#\ 3)\ returns\ None,\ meaning\ "{}I\ need\ more\ data"{}}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00010}00010\ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00011}00011\ \textcolor{comment}{\#\ If\ they\ have\ a\ .read\_eof\ attribute,\ then\ this\ will\ be\ called\ if\ an\ EOF\ is}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00012}00012\ \textcolor{comment}{\#\ received\ -\/-\/\ but\ this\ is\ optional.\ Either\ way,\ the\ actual\ ConnectionClosed}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00013}00013\ \textcolor{comment}{\#\ event\ will\ be\ generated\ afterwards.}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00014}00014\ \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00015}00015\ \textcolor{comment}{\#\ READERS\ is\ a\ dict\ describing\ how\ to\ pick\ a\ reader.\ It\ maps\ states\ to\ either:}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00016}00016\ \textcolor{comment}{\#\ -\/\ a\ reader}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00017}00017\ \textcolor{comment}{\#\ -\/\ or,\ for\ body\ readers,\ a\ dict\ of\ per-\/framing\ reader\ factories}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00019}00019\ \textcolor{keyword}{import}\ re}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00020}00020\ \textcolor{keyword}{from}\ typing\ \textcolor{keyword}{import}\ Any,\ Callable,\ Dict,\ Iterable,\ NoReturn,\ Optional,\ Tuple,\ Type,\ Union}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00022}00022\ \textcolor{keyword}{from}\ .\_abnf\ \textcolor{keyword}{import}\ chunk\_header,\ header\_field,\ request\_line,\ status\_line}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00023}00023\ \textcolor{keyword}{from}\ .\_events\ \textcolor{keyword}{import}\ Data,\ EndOfMessage,\ InformationalResponse,\ Request,\ Response}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00024}00024\ \textcolor{keyword}{from}\ .\_receivebuffer\ \textcolor{keyword}{import}\ ReceiveBuffer}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00025}00025\ \textcolor{keyword}{from}\ .\_state\ \textcolor{keyword}{import}\ (}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00026}00026\ \ \ \ \ CLIENT,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00027}00027\ \ \ \ \ CLOSED,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00028}00028\ \ \ \ \ DONE,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00029}00029\ \ \ \ \ IDLE,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00030}00030\ \ \ \ \ MUST\_CLOSE,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00031}00031\ \ \ \ \ SEND\_BODY,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00032}00032\ \ \ \ \ SEND\_RESPONSE,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00033}00033\ \ \ \ \ SERVER,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00034}00034\ )}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00035}00035\ \textcolor{keyword}{from}\ .\_util\ \textcolor{keyword}{import}\ LocalProtocolError,\ RemoteProtocolError,\ Sentinel,\ validate}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00037}00037\ \_\_all\_\_\ =\ [\textcolor{stringliteral}{"{}READERS"{}}]}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00038}00038\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00039}\mbox{\hyperlink{namespaceh11_1_1__readers_a2e1099fa735f8d3c26f5eb33545132ef}{00039}}\ header\_field\_re\ =\ re.compile(header\_field.encode(\textcolor{stringliteral}{"{}ascii"{}}))}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00040}\mbox{\hyperlink{namespaceh11_1_1__readers_a3c99bdb8cf9f9cff621a36c1abaee3db}{00040}}\ obs\_fold\_re\ =\ re.compile(rb\textcolor{stringliteral}{"{}[\ \(\backslash\)t]+"{}})}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00043}\mbox{\hyperlink{namespaceh11_1_1__readers_ab040ec8505208b05034a0a2d2259915d}{00043}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceh11_1_1__readers_ab040ec8505208b05034a0a2d2259915d}{\_obsolete\_line\_fold}}(lines:\ Iterable[bytes])\ -\/>\ Iterable[bytes]:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00044}00044\ \ \ \ \ it\ =\ iter(lines)}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00045}00045\ \ \ \ \ last:\ Optional[bytes]\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00046}00046\ \ \ \ \ \textcolor{keywordflow}{for}\ line\ \textcolor{keywordflow}{in}\ it:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00047}00047\ \ \ \ \ \ \ \ \ match\ =\ obs\_fold\_re.match(line)}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00048}00048\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ match:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00049}00049\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ last\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00050}00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classh11_1_1__util_1_1_local_protocol_error}{LocalProtocolError}}(\textcolor{stringliteral}{"{}continuation\ line\ at\ start\ of\ headers"{}})}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00051}00051\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ isinstance(last,\ bytearray):}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00052}00052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Cast\ to\ a\ mutable\ type,\ avoiding\ copy\ on\ append\ to\ ensure\ O(n)\ time}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00053}00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ last\ =\ bytearray(last)}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00054}00054\ \ \ \ \ \ \ \ \ \ \ \ \ last\ +=\ b\textcolor{stringliteral}{"{}\ "{}}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00055}00055\ \ \ \ \ \ \ \ \ \ \ \ \ last\ +=\ line[match.end()\ :]}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00056}00056\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00057}00057\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ last\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00058}00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{yield}\ last}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00059}00059\ \ \ \ \ \ \ \ \ \ \ \ \ last\ =\ line}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00060}00060\ \ \ \ \ \textcolor{keywordflow}{if}\ last\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00061}00061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{yield}\ last}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00062}00062\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00063}00063\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00064}\mbox{\hyperlink{namespaceh11_1_1__readers_aa301496576d82178222601365f541ee1}{00064}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceh11_1_1__readers_aa301496576d82178222601365f541ee1}{\_decode\_header\_lines}}(}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00065}00065\ \ \ \ \ lines:\ Iterable[bytes],}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00066}00066\ )\ -\/>\ Iterable[Tuple[bytes,\ bytes]]:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00067}00067\ \ \ \ \ \textcolor{keywordflow}{for}\ line\ \textcolor{keywordflow}{in}\ \mbox{\hyperlink{namespaceh11_1_1__readers_ab040ec8505208b05034a0a2d2259915d}{\_obsolete\_line\_fold}}(lines):}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00068}00068\ \ \ \ \ \ \ \ \ matches\ =\ validate(header\_field\_re,\ line,\ \textcolor{stringliteral}{"{}illegal\ header\ line:\ \{!r\}"{}},\ line)}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00069}00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{yield}\ (matches[\textcolor{stringliteral}{"{}field\_name"{}}],\ matches[\textcolor{stringliteral}{"{}field\_value"{}}])}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00071}00071\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00072}\mbox{\hyperlink{namespaceh11_1_1__readers_af1da83687786af89203f1ed0ff8be2bd}{00072}}\ request\_line\_re\ =\ re.compile(request\_line.encode(\textcolor{stringliteral}{"{}ascii"{}}))}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00073}00073\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00074}00074\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00075}\mbox{\hyperlink{namespaceh11_1_1__readers_a72149c2c16ea375ec3b188928cffee98}{00075}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceh11_1_1__readers_a72149c2c16ea375ec3b188928cffee98}{maybe\_read\_from\_IDLE\_client}}(buf:\ ReceiveBuffer)\ -\/>\ Optional[Request]:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00076}00076\ \ \ \ \ lines\ =\ buf.maybe\_extract\_lines()}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00077}00077\ \ \ \ \ \textcolor{keywordflow}{if}\ lines\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00078}00078\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ buf.is\_next\_line\_obviously\_invalid\_request\_line():}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00079}00079\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classh11_1_1__util_1_1_local_protocol_error}{LocalProtocolError}}(\textcolor{stringliteral}{"{}illegal\ request\ line"{}})}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00080}00080\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00081}00081\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ lines:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00082}00082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classh11_1_1__util_1_1_local_protocol_error}{LocalProtocolError}}(\textcolor{stringliteral}{"{}no\ request\ line\ received"{}})}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00083}00083\ \ \ \ \ matches\ =\ validate(}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00084}00084\ \ \ \ \ \ \ \ \ request\_line\_re,\ lines[0],\ \textcolor{stringliteral}{"{}illegal\ request\ line:\ \{!r\}"{}},\ lines[0]}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00085}00085\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00086}00086\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classh11_1_1__events_1_1_request}{Request}}(}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00087}00087\ \ \ \ \ \ \ \ \ headers=list(\mbox{\hyperlink{namespaceh11_1_1__readers_aa301496576d82178222601365f541ee1}{\_decode\_header\_lines}}(lines[1:])),\ \_parsed=\textcolor{keyword}{True},\ **matches}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00088}00088\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00089}00089\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00090}00090\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00091}\mbox{\hyperlink{namespaceh11_1_1__readers_ac575d3d332458b79b94f8db08568b6e3}{00091}}\ status\_line\_re\ =\ re.compile(status\_line.encode(\textcolor{stringliteral}{"{}ascii"{}}))}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00092}00092\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00093}00093\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00094}\mbox{\hyperlink{namespaceh11_1_1__readers_a3232a83c5bb0c39e46f396bf5a195557}{00094}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceh11_1_1__readers_a3232a83c5bb0c39e46f396bf5a195557}{maybe\_read\_from\_SEND\_RESPONSE\_server}}(}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00095}00095\ \ \ \ \ buf:\ ReceiveBuffer,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00096}00096\ )\ -\/>\ Union[InformationalResponse,\ Response,\ \textcolor{keywordtype}{None}]:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00097}00097\ \ \ \ \ lines\ =\ buf.maybe\_extract\_lines()}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00098}00098\ \ \ \ \ \textcolor{keywordflow}{if}\ lines\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00099}00099\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ buf.is\_next\_line\_obviously\_invalid\_request\_line():}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00100}00100\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classh11_1_1__util_1_1_local_protocol_error}{LocalProtocolError}}(\textcolor{stringliteral}{"{}illegal\ request\ line"{}})}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00101}00101\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00102}00102\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ lines:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00103}00103\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classh11_1_1__util_1_1_local_protocol_error}{LocalProtocolError}}(\textcolor{stringliteral}{"{}no\ response\ line\ received"{}})}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00104}00104\ \ \ \ \ matches\ =\ validate(status\_line\_re,\ lines[0],\ \textcolor{stringliteral}{"{}illegal\ status\ line:\ \{!r\}"{}},\ lines[0])}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00105}00105\ \ \ \ \ http\_version\ =\ (}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00106}00106\ \ \ \ \ \ \ \ \ b\textcolor{stringliteral}{"{}1.1"{}}\ \textcolor{keywordflow}{if}\ matches[\textcolor{stringliteral}{"{}http\_version"{}}]\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}\ \textcolor{keywordflow}{else}\ matches[\textcolor{stringliteral}{"{}http\_version"{}}]}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00107}00107\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00108}00108\ \ \ \ \ reason\ =\ b\textcolor{stringliteral}{"{}"{}}\ \textcolor{keywordflow}{if}\ matches[\textcolor{stringliteral}{"{}reason"{}}]\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}\ \textcolor{keywordflow}{else}\ matches[\textcolor{stringliteral}{"{}reason"{}}]}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00109}00109\ \ \ \ \ status\_code\ =\ int(matches[\textcolor{stringliteral}{"{}status\_code"{}}])}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00110}00110\ \ \ \ \ class\_:\ Union[Type[InformationalResponse],\ Type[Response]]\ =\ (}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00111}00111\ \ \ \ \ \ \ \ \ InformationalResponse\ \textcolor{keywordflow}{if}\ status\_code\ <\ 200\ \textcolor{keywordflow}{else}\ Response}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00112}00112\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00113}00113\ \ \ \ \ \textcolor{keywordflow}{return}\ class\_(}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00114}00114\ \ \ \ \ \ \ \ \ headers=list(\mbox{\hyperlink{namespaceh11_1_1__readers_aa301496576d82178222601365f541ee1}{\_decode\_header\_lines}}(lines[1:])),}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00115}00115\ \ \ \ \ \ \ \ \ \_parsed=\textcolor{keyword}{True},}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00116}00116\ \ \ \ \ \ \ \ \ status\_code=status\_code,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00117}00117\ \ \ \ \ \ \ \ \ reason=reason,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00118}00118\ \ \ \ \ \ \ \ \ http\_version=http\_version,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00119}00119\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00121}00121\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00122}\mbox{\hyperlink{classh11_1_1__readers_1_1_content_length_reader}{00122}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classh11_1_1__readers_1_1_content_length_reader}{ContentLengthReader}}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00123}00123\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ length:\ int)\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00124}\mbox{\hyperlink{classh11_1_1__readers_1_1_content_length_reader_a3fa275e6e20acb87b4f2fe60780e65de}{00124}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_content_length_reader_a3fa275e6e20acb87b4f2fe60780e65de}{\_length}}\ =\ length}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00125}\mbox{\hyperlink{classh11_1_1__readers_1_1_content_length_reader_a0127831946d42794f106c7cad709d13f}{00125}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_content_length_reader_a0127831946d42794f106c7cad709d13f}{\_remaining}}\ =\ length}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00126}00126\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00127}00127\ \ \ \ \ \textcolor{keyword}{def\ }\_\_call\_\_(self,\ buf:\ ReceiveBuffer)\ -\/>\ Union[Data,\ EndOfMessage,\ \textcolor{keywordtype}{None}]:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00128}00128\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_content_length_reader_a0127831946d42794f106c7cad709d13f}{\_remaining}}\ ==\ 0:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00129}00129\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classh11_1_1__events_1_1_end_of_message}{EndOfMessage}}()}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00130}00130\ \ \ \ \ \ \ \ \ data\ =\ buf.maybe\_extract\_at\_most(self.\mbox{\hyperlink{classh11_1_1__readers_1_1_content_length_reader_a0127831946d42794f106c7cad709d13f}{\_remaining}})}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00131}00131\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ data\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00132}00132\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00133}00133\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_content_length_reader_a0127831946d42794f106c7cad709d13f}{\_remaining}}\ -\/=\ len(data)}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00134}00134\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classh11_1_1__events_1_1_data}{Data}}(data=data)}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00135}00135\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00136}\mbox{\hyperlink{classh11_1_1__readers_1_1_content_length_reader_ad2ef0758b2b6844858d4fc94840f5f9d}{00136}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classh11_1_1__readers_1_1_content_length_reader_ad2ef0758b2b6844858d4fc94840f5f9d}{read\_eof}}(self)\ -\/>\ NoReturn:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00137}00137\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classh11_1_1__util_1_1_remote_protocol_error}{RemoteProtocolError}}(}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00138}00138\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}peer\ closed\ connection\ without\ sending\ complete\ message\ body\ "{}}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00139}00139\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}(received\ \{\}\ bytes,\ expected\ \{\})"{}}.format(}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00140}00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_content_length_reader_a3fa275e6e20acb87b4f2fe60780e65de}{\_length}}\ -\/\ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_content_length_reader_a0127831946d42794f106c7cad709d13f}{\_remaining}},\ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_content_length_reader_a3fa275e6e20acb87b4f2fe60780e65de}{\_length}}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00141}00141\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00142}00142\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00143}00143\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00144}00144\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00145}\mbox{\hyperlink{namespaceh11_1_1__readers_adbc276a0ce3828f105b903512c633ef4}{00145}}\ chunk\_header\_re\ =\ re.compile(chunk\_header.encode(\textcolor{stringliteral}{"{}ascii"{}}))}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00146}00146\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00147}00147\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00148}\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader}{00148}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader}{ChunkedReader}}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00149}00149\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00150}\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_afcfa657f21fe7a27050b8b3a057c113d}{00150}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_afcfa657f21fe7a27050b8b3a057c113d}{\_bytes\_in\_chunk}}\ =\ 0}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00151}00151\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ After\ reading\ a\ chunk,\ we\ have\ to\ throw\ away\ the\ trailing\ \(\backslash\)r\(\backslash\)n.}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00152}00152\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ This\ tracks\ the\ bytes\ that\ we\ need\ to\ match\ and\ throw\ away.}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00153}\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_a7b8c665297040ce6b53e17f853238c20}{00153}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_a7b8c665297040ce6b53e17f853238c20}{\_bytes\_to\_discard}}\ =\ b\textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00154}\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_a876d4c7e7d138537d80e94c879371902}{00154}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_a876d4c7e7d138537d80e94c879371902}{\_reading\_trailer}}\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00155}00155\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00156}00156\ \ \ \ \ \textcolor{keyword}{def\ }\_\_call\_\_(self,\ buf:\ ReceiveBuffer)\ -\/>\ Union[Data,\ EndOfMessage,\ \textcolor{keywordtype}{None}]:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00157}00157\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_a876d4c7e7d138537d80e94c879371902}{\_reading\_trailer}}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00158}00158\ \ \ \ \ \ \ \ \ \ \ \ \ lines\ =\ buf.maybe\_extract\_lines()}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ lines\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00161}00161\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classh11_1_1__events_1_1_end_of_message}{EndOfMessage}}(headers=list(\mbox{\hyperlink{namespaceh11_1_1__readers_aa301496576d82178222601365f541ee1}{\_decode\_header\_lines}}(lines)))}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00162}00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_a7b8c665297040ce6b53e17f853238c20}{\_bytes\_to\_discard}}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00163}00163\ \ \ \ \ \ \ \ \ \ \ \ \ data\ =\ buf.maybe\_extract\_at\_most(len(self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_a7b8c665297040ce6b53e17f853238c20}{\_bytes\_to\_discard}}))}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00164}00164\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ data\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00165}00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00166}00166\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ data\ !=\ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_a7b8c665297040ce6b53e17f853238c20}{\_bytes\_to\_discard}}[:\ len(data)]:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00167}00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classh11_1_1__util_1_1_local_protocol_error}{LocalProtocolError}}(}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00168}00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ f\textcolor{stringliteral}{"{}malformed\ chunk\ footer:\ \{data!r\}\ (expected\ \{self.\_bytes\_to\_discard!r\})"{}}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00169}00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00170}00170\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_a7b8c665297040ce6b53e17f853238c20}{\_bytes\_to\_discard}}\ =\ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_a7b8c665297040ce6b53e17f853238c20}{\_bytes\_to\_discard}}[len(data)\ :]}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00171}00171\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_a7b8c665297040ce6b53e17f853238c20}{\_bytes\_to\_discard}}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00172}00172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00173}00173\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ else,\ fall\ through\ and\ read\ some\ more}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00174}00174\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_a7b8c665297040ce6b53e17f853238c20}{\_bytes\_to\_discard}}\ ==\ b\textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00175}00175\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_afcfa657f21fe7a27050b8b3a057c113d}{\_bytes\_in\_chunk}}\ ==\ 0:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00176}00176\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ We\ need\ to\ refill\ our\ chunk\ count}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00177}00177\ \ \ \ \ \ \ \ \ \ \ \ \ chunk\_header\ =\ buf.maybe\_extract\_next\_line()}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00178}00178\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ chunk\_header\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00179}00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00180}00180\ \ \ \ \ \ \ \ \ \ \ \ \ matches\ =\ validate(}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00181}00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ chunk\_header\_re,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00182}00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ chunk\_header,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00183}00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}illegal\ chunk\ header:\ \{!r\}"{}},}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00184}00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ chunk\_header,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00185}00185\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00186}00186\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ XX\ FIXME:\ we\ discard\ chunk\ extensions.\ Does\ anyone\ care?}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00187}00187\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_afcfa657f21fe7a27050b8b3a057c113d}{\_bytes\_in\_chunk}}\ =\ int(matches[\textcolor{stringliteral}{"{}chunk\_size"{}}],\ base=16)}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00188}00188\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_afcfa657f21fe7a27050b8b3a057c113d}{\_bytes\_in\_chunk}}\ ==\ 0:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00189}00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_a876d4c7e7d138537d80e94c879371902}{\_reading\_trailer}}\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00190}00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ self(buf)}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00191}00191\ \ \ \ \ \ \ \ \ \ \ \ \ chunk\_start\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00192}00192\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00193}00193\ \ \ \ \ \ \ \ \ \ \ \ \ chunk\_start\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00194}00194\ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_afcfa657f21fe7a27050b8b3a057c113d}{\_bytes\_in\_chunk}}\ >\ 0}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00195}00195\ \ \ \ \ \ \ \ \ data\ =\ buf.maybe\_extract\_at\_most(self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_afcfa657f21fe7a27050b8b3a057c113d}{\_bytes\_in\_chunk}})}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00196}00196\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ data\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00197}00197\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00198}00198\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_afcfa657f21fe7a27050b8b3a057c113d}{\_bytes\_in\_chunk}}\ -\/=\ len(data)}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00199}00199\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_afcfa657f21fe7a27050b8b3a057c113d}{\_bytes\_in\_chunk}}\ ==\ 0:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00200}00200\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_a7b8c665297040ce6b53e17f853238c20}{\_bytes\_to\_discard}}\ =\ b\textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00201}00201\ \ \ \ \ \ \ \ \ \ \ \ \ chunk\_end\ =\ \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00202}00202\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00203}00203\ \ \ \ \ \ \ \ \ \ \ \ \ chunk\_end\ =\ \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00204}00204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classh11_1_1__events_1_1_data}{Data}}(data=data,\ chunk\_start=chunk\_start,\ chunk\_end=chunk\_end)}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00205}00205\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00206}\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_a9df7116991af4ea4d0d185c07d8055e4}{00206}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classh11_1_1__readers_1_1_chunked_reader_a9df7116991af4ea4d0d185c07d8055e4}{read\_eof}}(self)\ -\/>\ NoReturn:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00207}00207\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classh11_1_1__util_1_1_remote_protocol_error}{RemoteProtocolError}}(}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00208}00208\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}peer\ closed\ connection\ without\ sending\ complete\ message\ body\ "{}}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00209}00209\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}(incomplete\ chunked\ read)"{}}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00210}00210\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00211}00211\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00212}00212\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00213}\mbox{\hyperlink{classh11_1_1__readers_1_1_http10_reader}{00213}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classh11_1_1__readers_1_1_http10_reader}{Http10Reader}}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00214}00214\ \ \ \ \ \textcolor{keyword}{def\ }\_\_call\_\_(self,\ buf:\ ReceiveBuffer)\ -\/>\ Optional[Data]:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00215}00215\ \ \ \ \ \ \ \ \ data\ =\ buf.maybe\_extract\_at\_most(999999999)}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00216}00216\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ data\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00217}00217\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00218}00218\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classh11_1_1__events_1_1_data}{Data}}(data=data)}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00219}00219\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00220}\mbox{\hyperlink{classh11_1_1__readers_1_1_http10_reader_a3dc396753c04f1c6bb68423418996aa4}{00220}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classh11_1_1__readers_1_1_http10_reader_a3dc396753c04f1c6bb68423418996aa4}{read\_eof}}(self)\ -\/>\ EndOfMessage:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00221}00221\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classh11_1_1__events_1_1_end_of_message}{EndOfMessage}}()}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00222}00222\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00223}00223\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00224}\mbox{\hyperlink{namespaceh11_1_1__readers_ac38ca8087edd1b6eb219096160296dc2}{00224}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespaceh11_1_1__readers_ac38ca8087edd1b6eb219096160296dc2}{expect\_nothing}}(buf:\ ReceiveBuffer)\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00225}00225\ \ \ \ \ \textcolor{keywordflow}{if}\ buf:}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00226}00226\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ \mbox{\hyperlink{classh11_1_1__util_1_1_local_protocol_error}{LocalProtocolError}}(\textcolor{stringliteral}{"{}Got\ data\ when\ expecting\ EOF"{}})}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00227}00227\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00228}00228\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00229}00229\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00230}\mbox{\hyperlink{namespaceh11_1_1__readers_a787a95e6abf1bb0f63290e4a7e21ba27}{00230}}\ ReadersType\ =\ Dict[}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00231}00231\ \ \ \ \ Union[Type[Sentinel],\ Tuple[Type[Sentinel],\ Type[Sentinel]]],}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00232}00232\ \ \ \ \ Union[Callable[...,\ Any],\ Dict[str,\ Callable[...,\ Any]]],}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00233}00233\ ]}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00234}00234\ }
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00235}\mbox{\hyperlink{namespaceh11_1_1__readers_a64f6a0c24029d783423e808f9114d344}{00235}}\ READERS:\ ReadersType\ =\ \{}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00236}00236\ \ \ \ \ (CLIENT,\ IDLE):\ maybe\_read\_from\_IDLE\_client,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00237}00237\ \ \ \ \ (SERVER,\ IDLE):\ maybe\_read\_from\_SEND\_RESPONSE\_server,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00238}00238\ \ \ \ \ (SERVER,\ SEND\_RESPONSE):\ maybe\_read\_from\_SEND\_RESPONSE\_server,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00239}00239\ \ \ \ \ (CLIENT,\ DONE):\ expect\_nothing,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00240}00240\ \ \ \ \ (CLIENT,\ MUST\_CLOSE):\ expect\_nothing,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00241}00241\ \ \ \ \ (CLIENT,\ CLOSED):\ expect\_nothing,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00242}00242\ \ \ \ \ (SERVER,\ DONE):\ expect\_nothing,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00243}00243\ \ \ \ \ (SERVER,\ MUST\_CLOSE):\ expect\_nothing,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00244}00244\ \ \ \ \ (SERVER,\ CLOSED):\ expect\_nothing,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00245}00245\ \ \ \ \ SEND\_BODY:\ \{}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00246}00246\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}chunked"{}}:\ ChunkedReader,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00247}00247\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}content-\/length"{}}:\ ContentLengthReader,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00248}00248\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}http/1.0"{}}:\ Http10Reader,}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00249}00249\ \ \ \ \ \},}
\DoxyCodeLine{\Hypertarget{__readers_8py_source_l00250}00250\ \}}

\end{DoxyCode}
