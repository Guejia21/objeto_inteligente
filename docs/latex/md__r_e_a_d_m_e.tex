\chapter{Proyecto\+: Objeto Inteligente }
\hypertarget{md__r_e_a_d_m_e}{}\label{md__r_e_a_d_m_e}\index{Proyecto: Objeto Inteligente@{Proyecto: Objeto Inteligente}}
\label{md__r_e_a_d_m_e_autotoc_md13}%
\Hypertarget{md__r_e_a_d_m_e_autotoc_md13}%
\hypertarget{md__r_e_a_d_m_e_autotoc_md14}{}\doxysection{\texorpdfstring{Contexto}{Contexto}}\label{md__r_e_a_d_m_e_autotoc_md14}
Este proyecto tiene sus raíces en el trabajo de grado Modelo Ontológico para Manejo de Perfiles de Usuario en la IoT (Pabón y Rojas, 2017), el cual exploró la creación de un modelo semántico de perfil de usuario soportado en ontologías, con el fin de personalizar servicios en un entorno domótico. Dicho trabajo validó la eficacia del enfoque mediante una prueba de concepto y un estudio de caso, demostrando que el uso de perfiles semánticos mejora la interacción con objetos inteligentes. Se plantea la migración hacia una arquitectura basada en {\bfseries{microservicios}}, que permita desacoplar los componentes principales, garantizar un mejor desempeño, facilitar la incorporación de nuevas tecnologías y brindar mayor portabilidad en diferentes escenarios. El rediseño se centrará en separar funcionalidades clave en microservicios, con este cambio, el Objeto Inteligente se fortalecerá como una solución interoperable, escalable y flexible, capaz de gestionar perfiles personalizados de usuario e integrarse con múltiples dispositivos y plataformas, garantizando su evolución y sostenibilidad en el tiempo.\hypertarget{md__r_e_a_d_m_e_autotoc_md15}{}\doxysection{\texorpdfstring{Ejecución (Pensada para Rasbperry, también se puede correr en un pc con Linux)}{Ejecución (Pensada para Rasbperry, también se puede correr en un pc con Linux)}}\label{md__r_e_a_d_m_e_autotoc_md15}
\hypertarget{md__r_e_a_d_m_e_autotoc_md16}{}\doxysubsection{\texorpdfstring{Requisitos}{Requisitos}}\label{md__r_e_a_d_m_e_autotoc_md16}

\begin{DoxyItemize}
\item python3
\item mosquitto
\item Docker Desktop (Opcional)
\end{DoxyItemize}

Para ejecutar este proyecto primero debe clonarse en el dispositivo donde se desea ejecutar, haciendo\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\#\ Clonar\ al\ repo}
\DoxyCodeLine{git\ clone\ https://github.com/Guejia21/objeto\_inteligente}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ Ingresar\ a\ la\ carpeta\ raiz}
\DoxyCodeLine{cd\ objeto\_inteligente}
\DoxyCodeLine{}
\DoxyCodeLine{\#Si\ se\ desea\ instalar\ mosquitto}
\DoxyCodeLine{sudo\ apt\ install\ mosquitto}

\end{DoxyCode}
\hypertarget{md__r_e_a_d_m_e_autotoc_md17}{}\doxysubsubsection{\texorpdfstring{Ejecución manual}{Ejecución manual}}\label{md__r_e_a_d_m_e_autotoc_md17}

\begin{DoxyItemize}
\item Gateway\+: 8000
\item Micro gestión de ontología\+: 8001
\item Micro gestión de objetos\+: 8002
\item Micro gestión de recursos y datastreams\+: 8003
\end{DoxyItemize}

Para preparar los micros para su ejecución, ejecute los siguientes comandos 
\begin{DoxyCode}{0}
\DoxyCodeLine{\#\ Dar\ permisos\ de\ ejecución}
\DoxyCodeLine{chmod\ +x\ setup.sh}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ Ejecutar}
\DoxyCodeLine{./setup.sh}

\end{DoxyCode}


Si se desea limpiar los archivos generados en la ejecución del proyecto, se hace\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{python3\ clean.py}

\end{DoxyCode}


Si se desea correr la plataforma IoT localmente, se debe hacer\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ things\_board/}
\DoxyCodeLine{docker\ compose\ up}

\end{DoxyCode}
 {\bfseries{Importante\+:}} Apesar de que el proyecto se conecta a Things\+Board para exponer telemetría, el hecho de no tenerlo no es un impedimento para que el proyecto funcione

Para iniciar cada micro (estando en la carpeta raiz)\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\#Gateway}
\DoxyCodeLine{cd\ gateway/app/\ \&\&\ source\ ../.venv/bin/activate\ \&\&\ python3\ main.py}
\DoxyCodeLine{\#Ecas}
\DoxyCodeLine{cd\ micro\_automatizacion\_ecas/app/\ \&\&\ source\ ../.venv/bin/activate\ \&\&\ python3\ main.py}
\DoxyCodeLine{\#Base\ del\ conocimiento}
\DoxyCodeLine{cd\ micro\_gestion\_conocimiento/app/\ \&\&\ source\ ../.venv/bin/activate\ \&\&\ python3\ main.py}
\DoxyCodeLine{\#Objetos}
\DoxyCodeLine{cd\ micro\_gestion\_objetos/app/\ \&\&\ source\ ../.venv/bin/activate\ \&\&\ python3\ main.py}
\DoxyCodeLine{\#Datastreams}
\DoxyCodeLine{cd\ microservicio\_data\_stream/\ \&\&\ source\ .venv/bin/activate\ \&\&\ python3\ main.py}
\DoxyCodeLine{\#Personalizacion}
\DoxyCodeLine{cd\ microservicio\_personalizacion/app\ \&\&\ source\ ../.venv/bin/activate\ \&\&\ python3\ main.py}

\end{DoxyCode}
\hypertarget{md__r_e_a_d_m_e_autotoc_md18}{}\doxysubsection{\texorpdfstring{Documentación}{Documentación}}\label{md__r_e_a_d_m_e_autotoc_md18}
Para acceder a la documentación de los microservicios, acceda a la pestaña de {\ttfamily docs} por medio de un navegador web. \hypertarget{md__r_e_a_d_m_e_autotoc_md19}{}\doxysubsubsection{\texorpdfstring{Ejemplo}{Ejemplo}}\label{md__r_e_a_d_m_e_autotoc_md19}
Si se está corriendo un micro de manera local, acceda a \href{https://localhost:8001/docs}{\texttt{Docs Micro Gestión del Conocimiento}}

De esa manera podrá acceder al Swagger de cada microservicio cambiando al puerto pertinente.\hypertarget{md__r_e_a_d_m_e_autotoc_md20}{}\doxysubsection{\texorpdfstring{Notas adicionales}{Notas adicionales}}\label{md__r_e_a_d_m_e_autotoc_md20}
Todo este proyecto está pensado para ejecutarse en una raspberry, pero el micro de {\ttfamily microservicio\+\_\+data\+\_\+stream\+\_\+esp} está pensado para ejecutarse en una ESP32, para más información ingrese a su {\ttfamily README.\+md}

Finalmente, en la carpeta de {\ttfamily Ejemplo} se encuentran los ejecutables y el JSON usados de prueba para un objeto inteligente que tiene un led, un relay, un sensor de temperatura y otro de luz, adicionalmente, existe una ontologia llamada {\ttfamily usuario\+Actual.\+owl} la cual es una simulación para probar el endpoint de {\ttfamily Recibir\+Ontologia} en el micro de personalización de usuarios 