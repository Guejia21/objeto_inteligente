\doxysection{installer.\+py}
\hypertarget{installer_8py_source}{}\label{installer_8py_source}\index{microservicio\_data\_stream/venv/Lib/site-\/packages/setuptools/installer.py@{microservicio\_data\_stream/venv/Lib/site-\/packages/setuptools/installer.py}}
\mbox{\hyperlink{installer_8py}{Ir a la documentaci√≥n de este archivo.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00001}\mbox{\hyperlink{namespacesetuptools_1_1installer}{00001}}\ \textcolor{keyword}{import}\ glob}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00002}00002\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00003}00003\ \textcolor{keyword}{import}\ subprocess}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00004}00004\ \textcolor{keyword}{import}\ sys}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00005}00005\ \textcolor{keyword}{import}\ tempfile}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00006}00006\ \textcolor{keyword}{import}\ warnings}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00007}00007\ \textcolor{keyword}{from}\ distutils\ \textcolor{keyword}{import}\ log}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00008}00008\ \textcolor{keyword}{from}\ distutils.errors\ \textcolor{keyword}{import}\ DistutilsError}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00009}00009\ }
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00010}00010\ \textcolor{keyword}{import}\ pkg\_resources}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00011}00011\ \textcolor{keyword}{from}\ \mbox{\hyperlink{namespacesetuptools_1_1wheel}{setuptools.wheel}}\ \textcolor{keyword}{import}\ Wheel}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00012}00012\ \textcolor{keyword}{from}\ .\_deprecation\_warning\ \textcolor{keyword}{import}\ SetuptoolsDeprecationWarning}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00015}\mbox{\hyperlink{namespacesetuptools_1_1installer_a789a1b0bf5f00b9b13f9ba8c58ce684d}{00015}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacesetuptools_1_1installer_a789a1b0bf5f00b9b13f9ba8c58ce684d}{\_fixup\_find\_links}}(find\_links):}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00016}00016\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Ensure\ find-\/links\ option\ end-\/up\ being\ a\ list\ of\ strings."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00017}00017\ \ \ \ \ \textcolor{keywordflow}{if}\ isinstance(find\_links,\ str):}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00018}00018\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ find\_links.split()}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00019}00019\ \ \ \ \ \textcolor{keyword}{assert}\ isinstance(find\_links,\ (tuple,\ list))}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00020}00020\ \ \ \ \ \textcolor{keywordflow}{return}\ find\_links}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00023}\mbox{\hyperlink{namespacesetuptools_1_1installer_a548b6693311f284144933c8430d464ed}{00023}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacesetuptools_1_1installer_a548b6693311f284144933c8430d464ed}{fetch\_build\_egg}}(dist,\ req):\ \ \textcolor{comment}{\#\ noqa:\ C901\ \ \#\ is\ too\ complex\ (16)\ \ \#\ FIXME}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00024}00024\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}Fetch\ an\ egg\ needed\ for\ building.}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00025}00025\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00026}00026\ \textcolor{stringliteral}{\ \ \ \ Use\ pip/wheel\ to\ fetch/build\ a\ wheel."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00027}00027\ \ \ \ \ warnings.warn(}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00028}00028\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}setuptools.installer\ is\ deprecated.\ Requirements\ should\ "{}}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00029}00029\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}be\ satisfied\ by\ a\ PEP\ 517\ installer."{}},}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00030}00030\ \ \ \ \ \ \ \ \ SetuptoolsDeprecationWarning,}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00031}00031\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00032}00032\ \ \ \ \ \textcolor{comment}{\#\ Warn\ if\ wheel\ is\ not\ available}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00033}00033\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00034}00034\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepkg__resources_a1b12b6bb1ac1a3c247f0597aa0c520e6}{pkg\_resources.get\_distribution}}(\textcolor{stringliteral}{'wheel'})}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00035}00035\ \ \ \ \ \textcolor{keywordflow}{except}\ \mbox{\hyperlink{classpkg__resources_1_1_distribution_not_found}{pkg\_resources.DistributionNotFound}}:}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00036}00036\ \ \ \ \ \ \ \ \ dist.announce(\textcolor{stringliteral}{'WARNING:\ The\ wheel\ package\ is\ not\ available.'},\ log.WARN)}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00037}00037\ \ \ \ \ \textcolor{comment}{\#\ Ignore\ environment\ markers;\ if\ supplied,\ it\ is\ required.}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00038}00038\ \ \ \ \ req\ =\ \mbox{\hyperlink{namespacesetuptools_1_1installer_aef6e2e768c9a639a2cfe7fb354360352}{strip\_marker}}(req)}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00039}00039\ \ \ \ \ \textcolor{comment}{\#\ Take\ easy\_install\ options\ into\ account,\ but\ do\ not\ override\ relevant}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00040}00040\ \ \ \ \ \textcolor{comment}{\#\ pip\ environment\ variables\ (like\ PIP\_INDEX\_URL\ or\ PIP\_QUIET);\ they'll}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00041}00041\ \ \ \ \ \textcolor{comment}{\#\ take\ precedence.}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00042}00042\ \ \ \ \ opts\ =\ dist.get\_option\_dict(\textcolor{stringliteral}{'easy\_install'})}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00043}00043\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{stringliteral}{'allow\_hosts'}\ \textcolor{keywordflow}{in}\ opts:}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00044}00044\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ DistutilsError(\textcolor{stringliteral}{'the\ \`{}allow-\/hosts`\ option\ is\ not\ supported\ '}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00045}00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'when\ using\ pip\ to\ install\ requirements.'})}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00046}00046\ \ \ \ \ quiet\ =\ \textcolor{stringliteral}{'PIP\_QUIET'}\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ os.environ\ \textcolor{keywordflow}{and}\ \textcolor{stringliteral}{'PIP\_VERBOSE'}\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ os.environ}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00047}00047\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{stringliteral}{'PIP\_INDEX\_URL'}\ \textcolor{keywordflow}{in}\ os.environ:}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00048}00048\ \ \ \ \ \ \ \ \ index\_url\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00049}00049\ \ \ \ \ \textcolor{keywordflow}{elif}\ \textcolor{stringliteral}{'index\_url'}\ \textcolor{keywordflow}{in}\ opts:}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00050}00050\ \ \ \ \ \ \ \ \ index\_url\ =\ opts[\textcolor{stringliteral}{'index\_url'}][1]}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00051}00051\ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00052}00052\ \ \ \ \ \ \ \ \ index\_url\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00053}00053\ \ \ \ \ find\_links\ =\ (}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00054}00054\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacesetuptools_1_1installer_a789a1b0bf5f00b9b13f9ba8c58ce684d}{\_fixup\_find\_links}}(opts[\textcolor{stringliteral}{'find\_links'}][1])[:]\ \textcolor{keywordflow}{if}\ \textcolor{stringliteral}{'find\_links'}\ \textcolor{keywordflow}{in}\ opts}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00055}00055\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ []}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00056}00056\ \ \ \ \ )}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00057}00057\ \ \ \ \ \textcolor{keywordflow}{if}\ dist.dependency\_links:}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00058}00058\ \ \ \ \ \ \ \ \ find\_links.extend(dist.dependency\_links)}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00059}00059\ \ \ \ \ eggs\_dir\ =\ os.path.realpath(dist.get\_egg\_cache\_dir())}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00060}00060\ \ \ \ \ environment\ =\ \mbox{\hyperlink{classpkg__resources_1_1_environment}{pkg\_resources.Environment}}()}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00061}00061\ \ \ \ \ \textcolor{keywordflow}{for}\ egg\_dist\ \textcolor{keywordflow}{in}\ \mbox{\hyperlink{namespacepkg__resources_a51749677ba5748175f96115506342ced}{pkg\_resources.find\_distributions}}(eggs\_dir):}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00062}00062\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ egg\_dist\ \textcolor{keywordflow}{in}\ req\ \textcolor{keywordflow}{and}\ environment.can\_add(egg\_dist):}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00063}00063\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ egg\_dist}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00064}00064\ \ \ \ \ \textcolor{keyword}{with}\ tempfile.TemporaryDirectory()\ \textcolor{keyword}{as}\ tmpdir:}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00065}00065\ \ \ \ \ \ \ \ \ cmd\ =\ [}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00066}00066\ \ \ \ \ \ \ \ \ \ \ \ \ sys.executable,\ \textcolor{stringliteral}{'-\/m'},\ \textcolor{stringliteral}{'pip'},}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00067}00067\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'-\/-\/disable-\/pip-\/version-\/check'},}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00068}00068\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'wheel'},\ \textcolor{stringliteral}{'-\/-\/no-\/deps'},}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00069}00069\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'-\/w'},\ tmpdir,}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00070}00070\ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00071}00071\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ quiet:}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00072}00072\ \ \ \ \ \ \ \ \ \ \ \ \ cmd.append(\textcolor{stringliteral}{'-\/-\/quiet'})}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00073}00073\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ index\_url\ \textcolor{keywordflow}{is}\ \textcolor{keywordflow}{not}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00074}00074\ \ \ \ \ \ \ \ \ \ \ \ \ cmd.extend((\textcolor{stringliteral}{'-\/-\/index-\/url'},\ index\_url))}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00075}00075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ link\ \textcolor{keywordflow}{in}\ find\_links\ \textcolor{keywordflow}{or}\ []:}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00076}00076\ \ \ \ \ \ \ \ \ \ \ \ \ cmd.extend((\textcolor{stringliteral}{'-\/-\/find-\/links'},\ link))}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00077}00077\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ If\ requirement\ is\ a\ PEP\ 508\ direct\ URL,\ directly\ pass}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00078}00078\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ the\ URL\ to\ pip,\ as\ \`{}req\ @\ url`\ does\ not\ work\ on\ the}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00079}00079\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ command\ line.}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00080}00080\ \ \ \ \ \ \ \ \ cmd.append(req.url\ \textcolor{keywordflow}{or}\ str(req))}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00081}00081\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00082}00082\ \ \ \ \ \ \ \ \ \ \ \ \ subprocess.check\_call(cmd)}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00083}00083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ subprocess.CalledProcessError\ \textcolor{keyword}{as}\ e:}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00084}00084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{raise}\ DistutilsError(str(e))\ \textcolor{keyword}{from}\ e}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00085}00085\ \ \ \ \ \ \ \ \ wheel\ =\ \mbox{\hyperlink{classsetuptools_1_1wheel_1_1_wheel}{Wheel}}(glob.glob(os.path.join(tmpdir,\ \textcolor{stringliteral}{'*.whl'}))[0])}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00086}00086\ \ \ \ \ \ \ \ \ dist\_location\ =\ os.path.join(eggs\_dir,\ wheel.egg\_name())}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00087}00087\ \ \ \ \ \ \ \ \ wheel.install\_as\_egg(dist\_location)}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00088}00088\ \ \ \ \ \ \ \ \ dist\_metadata\ =\ \mbox{\hyperlink{classpkg__resources_1_1_path_metadata}{pkg\_resources.PathMetadata}}(}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00089}00089\ \ \ \ \ \ \ \ \ \ \ \ \ dist\_location,\ os.path.join(dist\_location,\ \textcolor{stringliteral}{'EGG-\/INFO'}))}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00090}00090\ \ \ \ \ \ \ \ \ dist\ =\ \mbox{\hyperlink{classpkg__resources_1_1_distribution_aee121508d0b0ed458b41ebade454b699}{pkg\_resources.Distribution.from\_filename}}(}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ dist\_location,\ metadata=dist\_metadata)}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00092}00092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ dist}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00093}00093\ }
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00094}00094\ }
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00095}\mbox{\hyperlink{namespacesetuptools_1_1installer_aef6e2e768c9a639a2cfe7fb354360352}{00095}}\ \textcolor{keyword}{def\ }\mbox{\hyperlink{namespacesetuptools_1_1installer_aef6e2e768c9a639a2cfe7fb354360352}{strip\_marker}}(req):}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00096}00096\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00097}00097\ \textcolor{stringliteral}{\ \ \ \ Return\ a\ new\ requirement\ without\ the\ environment\ marker\ to\ avoid}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00098}00098\ \textcolor{stringliteral}{\ \ \ \ calling\ pip\ with\ something\ like\ \`{}babel;\ extra\ ==\ "{}i18n"{}\`{},\ which}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00099}00099\ \textcolor{stringliteral}{\ \ \ \ would\ always\ be\ ignored.}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00100}00100\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00101}00101\ \ \ \ \ \textcolor{comment}{\#\ create\ a\ copy\ to\ avoid\ mutating\ the\ input}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00102}00102\ \ \ \ \ req\ =\ \mbox{\hyperlink{classpkg__resources_1_1_requirement_a6aace7a6d4415dd1e2c045d9c73c5f6d}{pkg\_resources.Requirement.parse}}(str(req))}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00103}00103\ \ \ \ \ req.marker\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{installer_8py_source_l00104}00104\ \ \ \ \ \textcolor{keywordflow}{return}\ req}

\end{DoxyCode}
