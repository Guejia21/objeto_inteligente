<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="es">
  <compounddef id="multiprocess_8py" kind="file" language="Python">
    <compoundname>multiprocess.py</compoundname>
    <innerclass refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process" prot="public">uvicorn::supervisors::multiprocess::Process</innerclass>
    <innerclass refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess" prot="public">uvicorn::supervisors::multiprocess::Multiprocess</innerclass>
    <innernamespace refid="namespaceuvicorn">uvicorn</innernamespace>
    <innernamespace refid="namespaceuvicorn_1_1supervisors">uvicorn::supervisors</innernamespace>
    <innernamespace refid="namespaceuvicorn_1_1supervisors_1_1multiprocess">uvicorn::supervisors::multiprocess</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespaceuvicorn_1_1supervisors_1_1multiprocess" refkind="compound"><highlight class="keyword">from</highlight><highlight class="normal"><sp/>__future__<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>annotations</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>logging</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>os</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>signal</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>threading</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>multiprocessing<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Pipe</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>socket<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>socket</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>typing<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Any,<sp/>Callable</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>click</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespaceuvicorn_1_1__subprocess" kindref="compound">uvicorn._subprocess</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>get_subprocess</highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespaceuvicorn_1_1config" kindref="compound">uvicorn.config</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Config</highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="16" refid="namespaceuvicorn_1_1supervisors_1_1multiprocess_1a570dcef1aa557ea7e9ea65611e772e47" refkind="member"><highlight class="normal">SIGNALS<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/>getattr(signal,<sp/>f</highlight><highlight class="stringliteral">&quot;SIG{x}&quot;</highlight><highlight class="normal">):<sp/>x</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;INT<sp/>TERM<sp/>BREAK<sp/>HUP<sp/>QUIT<sp/>TTIN<sp/>TTOU<sp/>USR1<sp/>USR2<sp/>WINCH&quot;</highlight><highlight class="normal">.split()</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>hasattr(signal,<sp/>f</highlight><highlight class="stringliteral">&quot;SIG{x}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="20"><highlight class="normal">}</highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22" refid="namespaceuvicorn_1_1supervisors_1_1multiprocess_1aff0b4a776d41fbe19d97cf2e8adb153d" refkind="member"><highlight class="normal">logger<sp/>=<sp/>logging.getLogger(</highlight><highlight class="stringliteral">&quot;uvicorn.error&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process" kindref="compound">Process</ref>:</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__init__(</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self,</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config:<sp/>Config,</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target:<sp/>Callable[[list[socket]<sp/>|<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">],<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">],</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sockets:<sp/>list[socket],</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/>)<sp/>-&gt;<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="32" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a2098ebf6a0da28976890d6652d5d3512" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a2098ebf6a0da28976890d6652d5d3512" kindref="member">real_target</ref><sp/>=<sp/>target</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1aaf98040c1fd9f925a8871f377678a2da" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a9b5c4df024ec1f5ba6a90c62be8a2eff" kindref="member">parent_conn</ref>,<sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1aaf98040c1fd9f925a8871f377678a2da" kindref="member">child_conn</ref><sp/>=<sp/>Pipe()</highlight></codeline>
<codeline lineno="35" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a8724db3dc26b3d134c7c7435750ad90d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a8724db3dc26b3d134c7c7435750ad90d" kindref="member">process</ref><sp/>=<sp/>get_subprocess(config,<sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a752fd43211481e5a2c79c7d7eb5ec735" kindref="member">target</ref>,<sp/>sockets)</highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a6740b2900d9551722cf3be67cee3b6ba" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a6740b2900d9551722cf3be67cee3b6ba" kindref="member">ping</ref>(self,<sp/>timeout:<sp/>float<sp/>=<sp/>5)<sp/>-&gt;<sp/>bool:</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a9b5c4df024ec1f5ba6a90c62be8a2eff" kindref="member">parent_conn</ref>.send(b</highlight><highlight class="stringliteral">&quot;ping&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a9b5c4df024ec1f5ba6a90c62be8a2eff" kindref="member">parent_conn</ref>.poll(timeout):</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a9b5c4df024ec1f5ba6a90c62be8a2eff" kindref="member">parent_conn</ref>.recv()</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1afe661505a7cc0553d48ffa8634bf7e4b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1afe661505a7cc0553d48ffa8634bf7e4b" kindref="member">pong</ref>(self)<sp/>-&gt;<sp/>None:</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1aaf98040c1fd9f925a8871f377678a2da" kindref="member">child_conn</ref>.recv()</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1aaf98040c1fd9f925a8871f377678a2da" kindref="member">child_conn</ref>.send(b</highlight><highlight class="stringliteral">&quot;pong&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="48" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a03b638de936a12aa2ca7df437ae72b76" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a03b638de936a12aa2ca7df437ae72b76" kindref="member">always_pong</ref>(self)<sp/>-&gt;<sp/>None:</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1afe661505a7cc0553d48ffa8634bf7e4b" kindref="member">pong</ref>()</highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight></codeline>
<codeline lineno="52" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a752fd43211481e5a2c79c7d7eb5ec735" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a752fd43211481e5a2c79c7d7eb5ec735" kindref="member">target</ref>(self,<sp/>sockets:<sp/>list[socket]<sp/>|<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)<sp/>-&gt;<sp/>Any:<sp/><sp/></highlight><highlight class="comment">#<sp/>pragma:<sp/>no<sp/>cover</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.name<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;nt&quot;</highlight><highlight class="normal">:<sp/><sp/></highlight><highlight class="comment">#<sp/>pragma:<sp/>py-not-win32</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Windows<sp/>doesn&apos;t<sp/>support<sp/>SIGTERM,<sp/>so<sp/>we<sp/>use<sp/>SIGBREAK<sp/>instead.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>And<sp/>then<sp/>we<sp/>raise<sp/>SIGTERM<sp/>when<sp/>SIGBREAK<sp/>is<sp/>received.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>https://learn.microsoft.com/zh-cn/cpp/c-runtime-library/reference/signal?view=msvc-170</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>signal.signal(</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>signal.SIGBREAK,<sp/><sp/></highlight><highlight class="comment">#<sp/>type:<sp/>ignore[attr-defined]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>sig,<sp/>frame:<sp/>signal.raise_signal(signal.SIGTERM),</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>threading.Thread(target=self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a03b638de936a12aa2ca7df437ae72b76" kindref="member">always_pong</ref>,<sp/>daemon=</highlight><highlight class="keyword">True</highlight><highlight class="normal">).<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1aeb4828b0b55b43c174d7965dcf04d640" kindref="member">start</ref>()</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a2098ebf6a0da28976890d6652d5d3512" kindref="member">real_target</ref>(sockets)</highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight></codeline>
<codeline lineno="65" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a74f640516b63a94727640fb7f3919e67" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a74f640516b63a94727640fb7f3919e67" kindref="member">is_alive</ref>(self,<sp/>timeout:<sp/>float<sp/>=<sp/>5)<sp/>-&gt;<sp/>bool:</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a8724db3dc26b3d134c7c7435750ad90d" kindref="member">process</ref>.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a74f640516b63a94727640fb7f3919e67" kindref="member">is_alive</ref>():</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">#<sp/>pragma:<sp/>full<sp/>coverage</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a6740b2900d9551722cf3be67cee3b6ba" kindref="member">ping</ref>(timeout)</highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight></codeline>
<codeline lineno="71" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1aeb4828b0b55b43c174d7965dcf04d640" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1aeb4828b0b55b43c174d7965dcf04d640" kindref="member">start</ref>(self)<sp/>-&gt;<sp/>None:</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a8724db3dc26b3d134c7c7435750ad90d" kindref="member">process</ref>.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1aeb4828b0b55b43c174d7965dcf04d640" kindref="member">start</ref>()</highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight></codeline>
<codeline lineno="74" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a1ef62131bb701822f17c53a64c0fb846" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a1ef62131bb701822f17c53a64c0fb846" kindref="member">terminate</ref>(self)<sp/>-&gt;<sp/>None:</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a8724db3dc26b3d134c7c7435750ad90d" kindref="member">process</ref>.exitcode<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:<sp/><sp/></highlight><highlight class="comment">#<sp/>Process<sp/>is<sp/>still<sp/>running</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a8724db3dc26b3d134c7c7435750ad90d" kindref="member">process</ref>.pid<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.name<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;nt&quot;</highlight><highlight class="normal">:<sp/><sp/></highlight><highlight class="comment">#<sp/>pragma:<sp/>py-not-win32</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Windows<sp/>doesn&apos;t<sp/>support<sp/>SIGTERM.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>So<sp/>send<sp/>SIGBREAK,<sp/>and<sp/>then<sp/>in<sp/>process<sp/>raise<sp/>SIGTERM.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.kill(self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a8724db3dc26b3d134c7c7435750ad90d" kindref="member">process</ref>.pid,<sp/>signal.CTRL_BREAK_EVENT)<sp/><sp/></highlight><highlight class="comment">#<sp/>type:<sp/>ignore[attr-defined]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.kill(self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a8724db3dc26b3d134c7c7435750ad90d" kindref="member">process</ref>.pid,<sp/>signal.SIGTERM)</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.info(f</highlight><highlight class="stringliteral">&quot;Terminated<sp/>child<sp/>process<sp/>[{self.process.pid}]&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a9b5c4df024ec1f5ba6a90c62be8a2eff" kindref="member">parent_conn</ref>.close()</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1aaf98040c1fd9f925a8871f377678a2da" kindref="member">child_conn</ref>.close()</highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight></codeline>
<codeline lineno="88" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1ad867f2b7c090a76c30605ac3dc524a8c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1ad867f2b7c090a76c30605ac3dc524a8c" kindref="member">kill</ref>(self)<sp/>-&gt;<sp/>None:</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>In<sp/>Windows,<sp/>the<sp/>method<sp/>will<sp/>call<sp/>`TerminateProcess`<sp/>to<sp/>kill<sp/>the<sp/>process.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>In<sp/>Unix,<sp/>the<sp/>method<sp/>will<sp/>send<sp/>SIGKILL<sp/>to<sp/>the<sp/>process.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a8724db3dc26b3d134c7c7435750ad90d" kindref="member">process</ref>.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1ad867f2b7c090a76c30605ac3dc524a8c" kindref="member">kill</ref>()</highlight></codeline>
<codeline lineno="92"><highlight class="normal"></highlight></codeline>
<codeline lineno="93" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a63862639aa835f358b4267c64932d753" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a63862639aa835f358b4267c64932d753" kindref="member">join</ref>(self)<sp/>-&gt;<sp/>None:</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.info(f</highlight><highlight class="stringliteral">&quot;Waiting<sp/>for<sp/>child<sp/>process<sp/>[{self.process.pid}]&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a8724db3dc26b3d134c7c7435750ad90d" kindref="member">process</ref>.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a63862639aa835f358b4267c64932d753" kindref="member">join</ref>()</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@property</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="98" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a85be9e36285c306e030663a9d5261ed8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a85be9e36285c306e030663a9d5261ed8" kindref="member">pid</ref>(self)<sp/>-&gt;<sp/>int<sp/>|<sp/>None:</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process_1a8724db3dc26b3d134c7c7435750ad90d" kindref="member">process</ref>.pid</highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"></highlight></codeline>
<codeline lineno="102" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess" kindref="compound">Multiprocess</ref>:</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__init__(</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self,</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config:<sp/>Config,</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target:<sp/>Callable[[list[socket]<sp/>|<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">],<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">],</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sockets:<sp/>list[socket],</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/>)<sp/>-&gt;<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="109" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1abd947a2e6a556b55c0f9aa2fefb7736b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1abd947a2e6a556b55c0f9aa2fefb7736b" kindref="member">config</ref><sp/>=<sp/>config</highlight></codeline>
<codeline lineno="110" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a815a9d5d262dbcd6675bd149a4c97772" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a815a9d5d262dbcd6675bd149a4c97772" kindref="member">target</ref><sp/>=<sp/>target</highlight></codeline>
<codeline lineno="111" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ace527c78c35908fa43f35f53bdf2e791" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ace527c78c35908fa43f35f53bdf2e791" kindref="member">sockets</ref><sp/>=<sp/>sockets</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1abec2a72224450c7bb2d4d390631ab156" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1abec2a72224450c7bb2d4d390631ab156" kindref="member">processes_num</ref><sp/>=<sp/>config.workers</highlight></codeline>
<codeline lineno="114" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ac8921b0ec1a680f3ffe7ce31847147c7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ac8921b0ec1a680f3ffe7ce31847147c7" kindref="member">processes</ref>:<sp/>list[Process]<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight></codeline>
<codeline lineno="116" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1af4b9d67399be6e7372ef831b01c9f86a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1af4b9d67399be6e7372ef831b01c9f86a" kindref="member">should_exit</ref><sp/>=<sp/>threading.Event()</highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight></codeline>
<codeline lineno="118" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1aa661252252fdbf5d2ab551c810c5c301" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1aa661252252fdbf5d2ab551c810c5c301" kindref="member">signal_queue</ref>:<sp/>list[int]<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>sig<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>SIGNALS:</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>signal.signal(sig,<sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>sig,<sp/>frame:<sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1aa661252252fdbf5d2ab551c810c5c301" kindref="member">signal_queue</ref>.append(sig))</highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1afccef3da0c1db890959f34273faf58a7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1afccef3da0c1db890959f34273faf58a7" kindref="member">init_processes</ref>(self)<sp/>-&gt;<sp/>None:</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>_<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1abec2a72224450c7bb2d4d390631ab156" kindref="member">processes_num</ref>):</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process<sp/>=<sp/><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process" kindref="compound">Process</ref>(self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1abd947a2e6a556b55c0f9aa2fefb7736b" kindref="member">config</ref>,<sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a815a9d5d262dbcd6675bd149a4c97772" kindref="member">target</ref>,<sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ace527c78c35908fa43f35f53bdf2e791" kindref="member">sockets</ref>)</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process.start()</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ac8921b0ec1a680f3ffe7ce31847147c7" kindref="member">processes</ref>.append(process)</highlight></codeline>
<codeline lineno="127"><highlight class="normal"></highlight></codeline>
<codeline lineno="128" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a562adb1d25404c30cd01f1209cc0469b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a562adb1d25404c30cd01f1209cc0469b" kindref="member">terminate_all</ref>(self)<sp/>-&gt;<sp/>None:</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>process<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ac8921b0ec1a680f3ffe7ce31847147c7" kindref="member">processes</ref>:</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process.terminate()</highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1aebac7253f942ed739583a0af55885553" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1aebac7253f942ed739583a0af55885553" kindref="member">join_all</ref>(self)<sp/>-&gt;<sp/>None:</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>process<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ac8921b0ec1a680f3ffe7ce31847147c7" kindref="member">processes</ref>:</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process.join()</highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight></codeline>
<codeline lineno="136" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a4b6279e27e9e65cc44ade1b0335ed5d4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a4b6279e27e9e65cc44ade1b0335ed5d4" kindref="member">restart_all</ref>(self)<sp/>-&gt;<sp/>None:</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>idx,<sp/>process<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>enumerate(self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ac8921b0ec1a680f3ffe7ce31847147c7" kindref="member">processes</ref>):</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process.terminate()</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process.join()</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_process<sp/>=<sp/><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process" kindref="compound">Process</ref>(self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1abd947a2e6a556b55c0f9aa2fefb7736b" kindref="member">config</ref>,<sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a815a9d5d262dbcd6675bd149a4c97772" kindref="member">target</ref>,<sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ace527c78c35908fa43f35f53bdf2e791" kindref="member">sockets</ref>)</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_process.start()</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ac8921b0ec1a680f3ffe7ce31847147c7" kindref="member">processes</ref>[idx]<sp/>=<sp/>new_process</highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight></codeline>
<codeline lineno="144" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1af03b2506c0883bf6068d9f2581cd66be" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1af03b2506c0883bf6068d9f2581cd66be" kindref="member">run</ref>(self)<sp/>-&gt;<sp/>None:</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message<sp/>=<sp/>f</highlight><highlight class="stringliteral">&quot;Started<sp/>parent<sp/>process<sp/>[{os.getpid()}]&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>color_message<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Started<sp/>parent<sp/>process<sp/>[{}]&quot;</highlight><highlight class="normal">.format(click.style(str(os.getpid()),<sp/>fg=</highlight><highlight class="stringliteral">&quot;cyan&quot;</highlight><highlight class="normal">,<sp/>bold=</highlight><highlight class="keyword">True</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.info(message,<sp/>extra={</highlight><highlight class="stringliteral">&quot;color_message&quot;</highlight><highlight class="normal">:<sp/>color_message})</highlight></codeline>
<codeline lineno="148"><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1afccef3da0c1db890959f34273faf58a7" kindref="member">init_processes</ref>()</highlight></codeline>
<codeline lineno="150"><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1af4b9d67399be6e7372ef831b01c9f86a" kindref="member">should_exit</ref>.wait(0.5):</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a1d22c3e0960d4600d27ef7d50e023e35" kindref="member">handle_signals</ref>()</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a8c934393db06bbd3b5d59da637a4f29a" kindref="member">keep_subprocess_alive</ref>()</highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a562adb1d25404c30cd01f1209cc0469b" kindref="member">terminate_all</ref>()</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1aebac7253f942ed739583a0af55885553" kindref="member">join_all</ref>()</highlight></codeline>
<codeline lineno="157"><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message<sp/>=<sp/>f</highlight><highlight class="stringliteral">&quot;Stopping<sp/>parent<sp/>process<sp/>[{os.getpid()}]&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>color_message<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;Stopping<sp/>parent<sp/>process<sp/>[{}]&quot;</highlight><highlight class="normal">.format(click.style(str(os.getpid()),<sp/>fg=</highlight><highlight class="stringliteral">&quot;cyan&quot;</highlight><highlight class="normal">,<sp/>bold=</highlight><highlight class="keyword">True</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.info(message,<sp/>extra={</highlight><highlight class="stringliteral">&quot;color_message&quot;</highlight><highlight class="normal">:<sp/>color_message})</highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="162" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a8c934393db06bbd3b5d59da637a4f29a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a8c934393db06bbd3b5d59da637a4f29a" kindref="member">keep_subprocess_alive</ref>(self)<sp/>-&gt;<sp/>None:</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1af4b9d67399be6e7372ef831b01c9f86a" kindref="member">should_exit</ref>.is_set():</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">#<sp/>parent<sp/>process<sp/>is<sp/>exiting,<sp/>no<sp/>need<sp/>to<sp/>keep<sp/>subprocess<sp/>alive</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>idx,<sp/>process<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>enumerate(self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ac8921b0ec1a680f3ffe7ce31847147c7" kindref="member">processes</ref>):</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>process.is_alive(timeout=self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1abd947a2e6a556b55c0f9aa2fefb7736b" kindref="member">config</ref>.timeout_worker_healthcheck):</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process.kill()<sp/><sp/></highlight><highlight class="comment">#<sp/>process<sp/>is<sp/>hung,<sp/>kill<sp/>it</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process.join()</highlight></codeline>
<codeline lineno="172"><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1af4b9d67399be6e7372ef831b01c9f86a" kindref="member">should_exit</ref>.is_set():</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">#<sp/>pragma:<sp/>full<sp/>coverage</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="175"><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.info(f</highlight><highlight class="stringliteral">&quot;Child<sp/>process<sp/>[{process.pid}]<sp/>died&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process<sp/>=<sp/><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process" kindref="compound">Process</ref>(self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1abd947a2e6a556b55c0f9aa2fefb7736b" kindref="member">config</ref>,<sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a815a9d5d262dbcd6675bd149a4c97772" kindref="member">target</ref>,<sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ace527c78c35908fa43f35f53bdf2e791" kindref="member">sockets</ref>)</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process.start()</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ac8921b0ec1a680f3ffe7ce31847147c7" kindref="member">processes</ref>[idx]<sp/>=<sp/>process</highlight></codeline>
<codeline lineno="180"><highlight class="normal"></highlight></codeline>
<codeline lineno="181" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a1d22c3e0960d4600d27ef7d50e023e35" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a1d22c3e0960d4600d27ef7d50e023e35" kindref="member">handle_signals</ref>(self)<sp/>-&gt;<sp/>None:</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>sig<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>tuple(self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1aa661252252fdbf5d2ab551c810c5c301" kindref="member">signal_queue</ref>):</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1aa661252252fdbf5d2ab551c810c5c301" kindref="member">signal_queue</ref>.remove(sig)</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sig_name<sp/>=<sp/>SIGNALS[sig]</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sig_handler<sp/>=<sp/>getattr(self,<sp/>f</highlight><highlight class="stringliteral">&quot;handle_{sig_name.lower()}&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>sig_handler<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sig_handler()</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:<sp/><sp/></highlight><highlight class="comment">#<sp/>pragma:<sp/>no<sp/>cover</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.debug(f</highlight><highlight class="stringliteral">&quot;Received<sp/>signal<sp/>{sig_name},<sp/>but<sp/>no<sp/>handler<sp/>is<sp/>defined<sp/>for<sp/>it.&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight></codeline>
<codeline lineno="191" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a9484ca24281348f88274ac050b569b35" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a9484ca24281348f88274ac050b569b35" kindref="member">handle_int</ref>(self)<sp/>-&gt;<sp/>None:</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.info(</highlight><highlight class="stringliteral">&quot;Received<sp/>SIGINT,<sp/>exiting.&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1af4b9d67399be6e7372ef831b01c9f86a" kindref="member">should_exit</ref>.set()</highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight></codeline>
<codeline lineno="195" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a1c671c37002725dae4d7ed1f9a2126b1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a1c671c37002725dae4d7ed1f9a2126b1" kindref="member">handle_term</ref>(self)<sp/>-&gt;<sp/>None:</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.info(</highlight><highlight class="stringliteral">&quot;Received<sp/>SIGTERM,<sp/>exiting.&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1af4b9d67399be6e7372ef831b01c9f86a" kindref="member">should_exit</ref>.set()</highlight></codeline>
<codeline lineno="198"><highlight class="normal"></highlight></codeline>
<codeline lineno="199" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ab1712b4a27395acd84d4b891e2672d3e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ab1712b4a27395acd84d4b891e2672d3e" kindref="member">handle_break</ref>(self)<sp/>-&gt;<sp/>None:<sp/><sp/></highlight><highlight class="comment">#<sp/>pragma:<sp/>py-not-win32</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.info(</highlight><highlight class="stringliteral">&quot;Received<sp/>SIGBREAK,<sp/>exiting.&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1af4b9d67399be6e7372ef831b01c9f86a" kindref="member">should_exit</ref>.set()</highlight></codeline>
<codeline lineno="202"><highlight class="normal"></highlight></codeline>
<codeline lineno="203" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a3521e3dca2916b777bfd8a31b5779a9e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a3521e3dca2916b777bfd8a31b5779a9e" kindref="member">handle_hup</ref>(self)<sp/>-&gt;<sp/>None:<sp/><sp/></highlight><highlight class="comment">#<sp/>pragma:<sp/>py-win32</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.info(</highlight><highlight class="stringliteral">&quot;Received<sp/>SIGHUP,<sp/>restarting<sp/>processes.&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a4b6279e27e9e65cc44ade1b0335ed5d4" kindref="member">restart_all</ref>()</highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight></codeline>
<codeline lineno="207" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1af92c307c3d693ef9baa5f0330ef9030a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1af92c307c3d693ef9baa5f0330ef9030a" kindref="member">handle_ttin</ref>(self)<sp/>-&gt;<sp/>None:<sp/><sp/></highlight><highlight class="comment">#<sp/>pragma:<sp/>py-win32</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.info(</highlight><highlight class="stringliteral">&quot;Received<sp/>SIGTTIN,<sp/>increasing<sp/>the<sp/>number<sp/>of<sp/>processes.&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1abec2a72224450c7bb2d4d390631ab156" kindref="member">processes_num</ref><sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process<sp/>=<sp/><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_process" kindref="compound">Process</ref>(self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1abd947a2e6a556b55c0f9aa2fefb7736b" kindref="member">config</ref>,<sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a815a9d5d262dbcd6675bd149a4c97772" kindref="member">target</ref>,<sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ace527c78c35908fa43f35f53bdf2e791" kindref="member">sockets</ref>)</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process.start()</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ac8921b0ec1a680f3ffe7ce31847147c7" kindref="member">processes</ref>.append(process)</highlight></codeline>
<codeline lineno="213"><highlight class="normal"></highlight></codeline>
<codeline lineno="214" refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a51c66b3c1bb4c0df050ed98241036ed6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1a51c66b3c1bb4c0df050ed98241036ed6" kindref="member">handle_ttou</ref>(self)<sp/>-&gt;<sp/>None:<sp/><sp/></highlight><highlight class="comment">#<sp/>pragma:<sp/>py-win32</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.info(</highlight><highlight class="stringliteral">&quot;Received<sp/>SIGTTOU,<sp/>decreasing<sp/>number<sp/>of<sp/>processes.&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1abec2a72224450c7bb2d4d390631ab156" kindref="member">processes_num</ref><sp/>&lt;=<sp/>1:</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logger.info(</highlight><highlight class="stringliteral">&quot;Already<sp/>reached<sp/>one<sp/>process,<sp/>cannot<sp/>decrease<sp/>the<sp/>number<sp/>of<sp/>processes<sp/>anymore.&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1abec2a72224450c7bb2d4d390631ab156" kindref="member">processes_num</ref><sp/>-=<sp/>1</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process<sp/>=<sp/>self.<ref refid="classuvicorn_1_1supervisors_1_1multiprocess_1_1_multiprocess_1ac8921b0ec1a680f3ffe7ce31847147c7" kindref="member">processes</ref>.pop()</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process.terminate()</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>process.join()</highlight></codeline>
    </programlisting>
    <location file="micro_gestion_objetos/venv/Lib/site-packages/uvicorn/supervisors/multiprocess.py"/>
  </compounddef>
</doxygen>
