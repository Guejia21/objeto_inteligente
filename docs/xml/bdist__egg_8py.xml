<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="es">
  <compounddef id="bdist__egg_8py" kind="file" language="Python">
    <compoundname>bdist_egg.py</compoundname>
    <innerclass refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg" prot="public">setuptools::command::bdist_egg::bdist_egg</innerclass>
    <innernamespace refid="namespacesetuptools">setuptools</innernamespace>
    <innernamespace refid="namespacesetuptools_1_1command">setuptools::command</innernamespace>
    <innernamespace refid="namespacesetuptools_1_1command_1_1bdist__egg">setuptools::command::bdist_egg</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacesetuptools_1_1command_1_1bdist__egg" refkind="compound"><highlight class="stringliteral">&quot;&quot;&quot;setuptools.command.bdist_egg</highlight></codeline>
<codeline lineno="2"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="3"><highlight class="stringliteral">Build<sp/>.egg<sp/>distributions&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>distutils.dir_util<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>remove_tree,<sp/>mkpath</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>distutils<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>log</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>types<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>CodeType</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>sys</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>os</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>re</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>textwrap</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>marshal</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>pkg_resources<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>get_build_platform,<sp/>Distribution</highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1extension" kindref="compound">setuptools.extension</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Library</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>setuptools<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Command</highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>.._path<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>ensure_directory</highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>sysconfig<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>get_path,<sp/>get_python_version</highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22" refid="namespacesetuptools_1_1command_1_1bdist__egg_1ac062dd88a9aaf6a7e7e01bedb708def7" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1ac062dd88a9aaf6a7e7e01bedb708def7" kindref="member">_get_purelib</ref>():</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_path(</highlight><highlight class="stringliteral">&quot;purelib&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight></codeline>
<codeline lineno="26" refid="namespacesetuptools_1_1command_1_1bdist__egg_1a6f46a734b9accefbb0c535c33192c2bd" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1a6f46a734b9accefbb0c535c33192c2bd" kindref="member">strip_module</ref>(filename):</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;.&apos;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>filename:</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>filename<sp/>=<sp/>os.path.splitext(filename)[0]</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>filename.endswith(</highlight><highlight class="stringliteral">&apos;module&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>filename<sp/>=<sp/>filename[:-6]</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>filename</highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34" refid="namespacesetuptools_1_1command_1_1bdist__egg_1ab01faf69d550a8d0f8a3333063ac1e59" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1ab01faf69d550a8d0f8a3333063ac1e59" kindref="member">sorted_walk</ref>(dir):</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Do<sp/>os.walk<sp/>in<sp/>a<sp/>reproducible<sp/>way,</highlight></codeline>
<codeline lineno="36"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>independent<sp/>of<sp/>indeterministic<sp/>filesystem<sp/>readdir<sp/>order</highlight></codeline>
<codeline lineno="37"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>base,<sp/>dirs,<sp/>files<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>os.walk(dir):</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dirs.sort()</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>files.sort()</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">yield</highlight><highlight class="normal"><sp/>base,<sp/>dirs,<sp/>files</highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44" refid="namespacesetuptools_1_1command_1_1bdist__egg_1adbb041aaa953768c0df85af01a8bb2d9" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1adbb041aaa953768c0df85af01a8bb2d9" kindref="member">write_stub</ref>(resource,<sp/>pyfile):</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/>_stub_template<sp/>=<sp/>textwrap.dedent(</highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="46"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>def<sp/>__bootstrap__():</highlight></codeline>
<codeline lineno="47"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>global<sp/>__bootstrap__,<sp/>__loader__,<sp/>__file__</highlight></codeline>
<codeline lineno="48"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>import<sp/>sys,<sp/>pkg_resources,<sp/>importlib.util</highlight></codeline>
<codeline lineno="49"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__file__<sp/>=<sp/>pkg_resources.resource_filename(__name__,<sp/>%r)</highlight></codeline>
<codeline lineno="50"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__loader__<sp/>=<sp/>None;<sp/>del<sp/>__bootstrap__,<sp/>__loader__</highlight></codeline>
<codeline lineno="51"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec<sp/>=<sp/>importlib.util.spec_from_file_location(__name__,__file__)</highlight></codeline>
<codeline lineno="52"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mod<sp/>=<sp/>importlib.util.module_from_spec(spec)</highlight></codeline>
<codeline lineno="53"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>spec.loader.exec_module(mod)</highlight></codeline>
<codeline lineno="54"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__bootstrap__()</highlight></codeline>
<codeline lineno="55"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">).lstrip()</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/>open(pyfile,<sp/></highlight><highlight class="stringliteral">&apos;w&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>f:</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f.write(_stub_template<sp/>%<sp/>resource)</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight></codeline>
<codeline lineno="60" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg" kindref="compound">bdist_egg</ref>(<ref refid="classsetuptools_1_1_command" kindref="compound">Command</ref>):</highlight></codeline>
<codeline lineno="61" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a3a7e24a351a7faeb607798b8d2b4d242" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>description<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;create<sp/>an<sp/>\&quot;egg\&quot;<sp/>distribution&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="63" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a625526ef011d3aad26b056ce2e947b79" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>user_options<sp/>=<sp/>[</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;bdist-dir=&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;b&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;temporary<sp/>directory<sp/>for<sp/>creating<sp/>the<sp/>distribution&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;plat-name=&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;p&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;platform<sp/>name<sp/>to<sp/>embed<sp/>in<sp/>generated<sp/>filenames<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;(default:<sp/>%s)&quot;</highlight><highlight class="normal"><sp/>%<sp/>get_build_platform()),</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;exclude-source-files&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;remove<sp/>all<sp/>.py<sp/>files<sp/>from<sp/>the<sp/>generated<sp/>egg&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;keep-temp&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;k&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;keep<sp/>the<sp/>pseudo-installation<sp/>tree<sp/>around<sp/>after<sp/>&quot;</highlight><highlight class="normal"><sp/>+</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;creating<sp/>the<sp/>distribution<sp/>archive&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;dist-dir=&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;d&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;directory<sp/>to<sp/>put<sp/>final<sp/>built<sp/>distributions<sp/>in&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;skip-build&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;skip<sp/>rebuilding<sp/>everything<sp/>(for<sp/>testing/debugging)&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>]</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight></codeline>
<codeline lineno="79" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a3494599e563087cc3d5a9934cc7aa873" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>boolean_options<sp/>=<sp/>[</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;keep-temp&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;skip-build&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;exclude-source-files&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/>]</highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight></codeline>
<codeline lineno="83" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a6793de36e92eb7151c0869673fc28410" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a6793de36e92eb7151c0869673fc28410" kindref="member">initialize_options</ref>(self):</highlight></codeline>
<codeline lineno="84" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a32b7373558697e1b843885ac1b9b9f80" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a32b7373558697e1b843885ac1b9b9f80" kindref="member">bdist_dir</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a6336ff216efe48ca45956611ed223888" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a6336ff216efe48ca45956611ed223888" kindref="member">plat_name</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="86" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a4083c3d98d128f2cee31448fe61c4121" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a4083c3d98d128f2cee31448fe61c4121" kindref="member">keep_temp</ref><sp/>=<sp/>0</highlight></codeline>
<codeline lineno="87" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a4a93325179b5418e468b6e48c51edd65" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a4a93325179b5418e468b6e48c51edd65" kindref="member">dist_dir</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="88" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1abb9224020349f0490e768a1199ceb493" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1abb9224020349f0490e768a1199ceb493" kindref="member">skip_build</ref><sp/>=<sp/>0</highlight></codeline>
<codeline lineno="89" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a2060988e40d8ddc08eb084f873170498" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a2060988e40d8ddc08eb084f873170498" kindref="member">egg_output</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="90" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1af17758c4b939b1fa91b10db1eb02a179" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1af17758c4b939b1fa91b10db1eb02a179" kindref="member">exclude_source_files</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1abd8da03cb1197c75b70bcf861de3477f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1abd8da03cb1197c75b70bcf861de3477f" kindref="member">finalize_options</ref>(self):</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ei_cmd<sp/>=<sp/>self.ei_cmd<sp/>=<sp/>self.get_finalized_command(</highlight><highlight class="stringliteral">&quot;egg_info&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="94" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a280f35f1dcbc9775b6b8d802aa0c83f4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a280f35f1dcbc9775b6b8d802aa0c83f4" kindref="member">egg_info</ref><sp/>=<sp/>ei_cmd.egg_info</highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a32b7373558697e1b843885ac1b9b9f80" kindref="member">bdist_dir</ref><sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bdist_base<sp/>=<sp/>self.get_finalized_command(</highlight><highlight class="stringliteral">&apos;bdist&apos;</highlight><highlight class="normal">).bdist_base</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a32b7373558697e1b843885ac1b9b9f80" kindref="member">bdist_dir</ref><sp/>=<sp/>os.path.join(bdist_base,<sp/></highlight><highlight class="stringliteral">&apos;egg&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a6336ff216efe48ca45956611ed223888" kindref="member">plat_name</ref><sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a6336ff216efe48ca45956611ed223888" kindref="member">plat_name</ref><sp/>=<sp/>get_build_platform()</highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.set_undefined_options(</highlight><highlight class="stringliteral">&apos;bdist&apos;</highlight><highlight class="normal">,<sp/>(</highlight><highlight class="stringliteral">&apos;dist_dir&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;dist_dir&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a2060988e40d8ddc08eb084f873170498" kindref="member">egg_output</ref><sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Compute<sp/>filename<sp/>of<sp/>the<sp/>output<sp/>egg</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>basename<sp/>=<sp/><ref refid="classpkg__resources_1_1_distribution" kindref="compound">Distribution</ref>(</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/>ei_cmd.egg_name,<sp/>ei_cmd.egg_version,</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>get_python_version(),</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a62bb2a64b6d90523d16db72369ec2838" kindref="member">distribution</ref>.has_ext_modules()<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a6336ff216efe48ca45956611ed223888" kindref="member">plat_name</ref></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>).egg_name()</highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a2060988e40d8ddc08eb084f873170498" kindref="member">egg_output</ref><sp/>=<sp/>os.path.join(self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a4a93325179b5418e468b6e48c51edd65" kindref="member">dist_dir</ref>,<sp/>basename<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;.egg&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight></codeline>
<codeline lineno="116" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a5ad23f3be8aa100f4fb50f88d1c6fdee" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a5ad23f3be8aa100f4fb50f88d1c6fdee" kindref="member">do_install_data</ref>(self):</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Hack<sp/>for<sp/>packages<sp/>that<sp/>install<sp/>data<sp/>to<sp/>install&apos;s<sp/>--install-lib</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_finalized_command(</highlight><highlight class="stringliteral">&apos;install&apos;</highlight><highlight class="normal">).install_lib<sp/>=<sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a32b7373558697e1b843885ac1b9b9f80" kindref="member">bdist_dir</ref></highlight></codeline>
<codeline lineno="119"><highlight class="normal"></highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>site_packages<sp/>=<sp/>os.path.normcase(os.path.realpath(<ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1ac062dd88a9aaf6a7e7e01bedb708def7" kindref="member">_get_purelib</ref>()))</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>old,<sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a62bb2a64b6d90523d16db72369ec2838" kindref="member">distribution</ref>.data_files<sp/>=<sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a62bb2a64b6d90523d16db72369ec2838" kindref="member">distribution</ref>.data_files,<sp/>[]</highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>item<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>old:</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(item,<sp/>tuple)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>len(item)<sp/>==<sp/>2:</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.isabs(item[0]):</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>realpath<sp/>=<sp/>os.path.realpath(item[0])</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>normalized<sp/>=<sp/>os.path.normcase(realpath)</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>normalized<sp/>==<sp/>site_packages<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>normalized.startswith(</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>site_packages<sp/>+<sp/>os.sep</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>):</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>item<sp/>=<sp/>realpath[len(site_packages)<sp/>+<sp/>1:],<sp/>item[1]</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>XXX<sp/>else:<sp/>raise<sp/>???</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a62bb2a64b6d90523d16db72369ec2838" kindref="member">distribution</ref>.data_files.append(item)</highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.info(</highlight><highlight class="stringliteral">&quot;installing<sp/>package<sp/>data<sp/>to<sp/>%s&quot;</highlight><highlight class="normal">,<sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a32b7373558697e1b843885ac1b9b9f80" kindref="member">bdist_dir</ref>)</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a372fb0e74bb36ea74d118a0a12b2e952" kindref="member">call_command</ref>(</highlight><highlight class="stringliteral">&apos;install_data&apos;</highlight><highlight class="normal">,<sp/>force=0,<sp/>root=</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">finally</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a62bb2a64b6d90523d16db72369ec2838" kindref="member">distribution</ref>.data_files<sp/>=<sp/>old</highlight></codeline>
<codeline lineno="140"><highlight class="normal"></highlight></codeline>
<codeline lineno="141" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1ae1ac4ab0eb7dc2ee42697565a95858e1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1ae1ac4ab0eb7dc2ee42697565a95858e1" kindref="member">get_outputs</ref>(self):</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a2060988e40d8ddc08eb084f873170498" kindref="member">egg_output</ref>]</highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight></codeline>
<codeline lineno="144" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a372fb0e74bb36ea74d118a0a12b2e952" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a372fb0e74bb36ea74d118a0a12b2e952" kindref="member">call_command</ref>(self,<sp/>cmdname,<sp/>**kw):</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Invoke<sp/>reinitialized<sp/>command<sp/>`cmdname`<sp/>with<sp/>keyword<sp/>args&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>dirname<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>INSTALL_DIRECTORY_ATTRS:</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kw.setdefault(dirname,<sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a32b7373558697e1b843885ac1b9b9f80" kindref="member">bdist_dir</ref>)</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kw.setdefault(</highlight><highlight class="stringliteral">&apos;skip_build&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1abb9224020349f0490e768a1199ceb493" kindref="member">skip_build</ref>)</highlight></codeline>
<codeline lineno="149" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a5423a581bea209f964e5cbf77a5c29e7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>kw.setdefault(</highlight><highlight class="stringliteral">&apos;dry_run&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a5423a581bea209f964e5cbf77a5c29e7" kindref="member">dry_run</ref>)</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd<sp/>=<sp/>self.<ref refid="classsetuptools_1_1_command_1a9d9c051523abcdd1a31f1b0af60aecbb" kindref="member">reinitialize_command</ref>(cmdname,<sp/>**kw)</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.run_command(cmdname)</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>cmd</highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight></codeline>
<codeline lineno="154" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a1d5efaf94859f9b85520a1ca39e59d39" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a1d5efaf94859f9b85520a1ca39e59d39" kindref="member">run</ref>(self):<sp/><sp/></highlight><highlight class="comment">#<sp/>noqa:<sp/>C901<sp/><sp/>#<sp/>is<sp/>too<sp/>complex<sp/>(14)<sp/><sp/>#<sp/>FIXME</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Generate<sp/>metadata<sp/>first</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.run_command(</highlight><highlight class="stringliteral">&quot;egg_info&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>We<sp/>run<sp/>install_lib<sp/>before<sp/>install_data,<sp/>because<sp/>some<sp/>data<sp/>hacks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>pull<sp/>their<sp/>data<sp/>path<sp/>from<sp/>the<sp/>install_lib<sp/>command.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.info(</highlight><highlight class="stringliteral">&quot;installing<sp/>library<sp/>code<sp/>to<sp/>%s&quot;</highlight><highlight class="normal">,<sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a32b7373558697e1b843885ac1b9b9f80" kindref="member">bdist_dir</ref>)</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>instcmd<sp/>=<sp/>self.get_finalized_command(</highlight><highlight class="stringliteral">&apos;install&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>old_root<sp/>=<sp/>instcmd.root</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>instcmd.root<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a62bb2a64b6d90523d16db72369ec2838" kindref="member">distribution</ref>.has_c_libraries()<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1abb9224020349f0490e768a1199ceb493" kindref="member">skip_build</ref>:</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.run_command(</highlight><highlight class="stringliteral">&apos;build_clib&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd<sp/>=<sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a372fb0e74bb36ea74d118a0a12b2e952" kindref="member">call_command</ref>(</highlight><highlight class="stringliteral">&apos;install_lib&apos;</highlight><highlight class="normal">,<sp/>warn_dir=0)</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>instcmd.root<sp/>=<sp/>old_root</highlight></codeline>
<codeline lineno="167"><highlight class="normal"></highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>all_outputs,<sp/>ext_outputs<sp/>=<sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a4743926d482c043859f2d8ca9267a324" kindref="member">get_ext_outputs</ref>()</highlight></codeline>
<codeline lineno="169" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1aa7cc5f6bb0bea739aed5fa363eb3efd5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1aa7cc5f6bb0bea739aed5fa363eb3efd5" kindref="member">stubs</ref><sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>to_compile<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(p,<sp/>ext_name)<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>enumerate(ext_outputs):</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>filename,<sp/>ext<sp/>=<sp/>os.path.splitext(ext_name)</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pyfile<sp/>=<sp/>os.path.join(self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a32b7373558697e1b843885ac1b9b9f80" kindref="member">bdist_dir</ref>,<sp/><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1a6f46a734b9accefbb0c535c33192c2bd" kindref="member">strip_module</ref>(filename)<sp/>+</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;.py&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1aa7cc5f6bb0bea739aed5fa363eb3efd5" kindref="member">stubs</ref>.append(pyfile)</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.info(</highlight><highlight class="stringliteral">&quot;creating<sp/>stub<sp/>loader<sp/>for<sp/>%s&quot;</highlight><highlight class="normal">,<sp/>ext_name)</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a5423a581bea209f964e5cbf77a5c29e7" kindref="member">dry_run</ref>:</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1adbb041aaa953768c0df85af01a8bb2d9" kindref="member">write_stub</ref>(os.path.basename(ext_name),<sp/>pyfile)</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>to_compile.append(pyfile)</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ext_outputs[p]<sp/>=<sp/>ext_name.replace(os.sep,<sp/></highlight><highlight class="stringliteral">&apos;/&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="181"><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>to_compile:</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd.byte_compile(to_compile)</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a62bb2a64b6d90523d16db72369ec2838" kindref="member">distribution</ref>.data_files:</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a5ad23f3be8aa100f4fb50f88d1c6fdee" kindref="member">do_install_data</ref>()</highlight></codeline>
<codeline lineno="186"><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Make<sp/>the<sp/>EGG-INFO<sp/>directory</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>archive_root<sp/>=<sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a32b7373558697e1b843885ac1b9b9f80" kindref="member">bdist_dir</ref></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>egg_info<sp/>=<sp/>os.path.join(archive_root,<sp/></highlight><highlight class="stringliteral">&apos;EGG-INFO&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.mkpath(egg_info)</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a62bb2a64b6d90523d16db72369ec2838" kindref="member">distribution</ref>.scripts:</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>script_dir<sp/>=<sp/>os.path.join(egg_info,<sp/></highlight><highlight class="stringliteral">&apos;scripts&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.info(</highlight><highlight class="stringliteral">&quot;installing<sp/>scripts<sp/>to<sp/>%s&quot;</highlight><highlight class="normal">,<sp/>script_dir)</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a372fb0e74bb36ea74d118a0a12b2e952" kindref="member">call_command</ref>(</highlight><highlight class="stringliteral">&apos;install_scripts&apos;</highlight><highlight class="normal">,<sp/>install_dir=script_dir,</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>no_ep=1)</highlight></codeline>
<codeline lineno="196"><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1aa65a9fae2220d7284fd4f67bc48c8128" kindref="member">copy_metadata_to</ref>(egg_info)</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>native_libs<sp/>=<sp/>os.path.join(egg_info,<sp/></highlight><highlight class="stringliteral">&quot;native_libs.txt&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>all_outputs:</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.info(</highlight><highlight class="stringliteral">&quot;writing<sp/>%s&quot;</highlight><highlight class="normal">,<sp/>native_libs)</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a5423a581bea209f964e5cbf77a5c29e7" kindref="member">dry_run</ref>:</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ensure_directory(native_libs)</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>libs_file<sp/>=<sp/>open(native_libs,<sp/></highlight><highlight class="stringliteral">&apos;wt&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>libs_file.write(</highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(all_outputs))</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>libs_file.write(</highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>libs_file.close()</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>os.path.isfile(native_libs):</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.info(</highlight><highlight class="stringliteral">&quot;removing<sp/>%s&quot;</highlight><highlight class="normal">,<sp/>native_libs)</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a5423a581bea209f964e5cbf77a5c29e7" kindref="member">dry_run</ref>:</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.unlink(native_libs)</highlight></codeline>
<codeline lineno="211"><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1a005d20b7ce571b6499d7ac2b0af76188" kindref="member">write_safety_flag</ref>(</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.path.join(archive_root,<sp/></highlight><highlight class="stringliteral">&apos;EGG-INFO&apos;</highlight><highlight class="normal">),<sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a35127d6e46a1d08f367c6f479ea762b8" kindref="member">zip_safe</ref>()</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.exists(os.path.join(self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a280f35f1dcbc9775b6b8d802aa0c83f4" kindref="member">egg_info</ref>,<sp/></highlight><highlight class="stringliteral">&apos;depends.txt&apos;</highlight><highlight class="normal">)):</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.warn(</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;WARNING:<sp/>&apos;depends.txt&apos;<sp/>will<sp/>not<sp/>be<sp/>used<sp/>by<sp/>setuptools<sp/>0.6!\n&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Use<sp/>the<sp/>install_requires/extras_require<sp/>setup()<sp/>args<sp/>instead.&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="221"><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1af17758c4b939b1fa91b10db1eb02a179" kindref="member">exclude_source_files</ref>:</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a569c3a93d7f6576cfba98ad18287d0f3" kindref="member">zap_pyfiles</ref>()</highlight></codeline>
<codeline lineno="224"><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Make<sp/>the<sp/>archive</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1a17aef531f564d95c3e6e5d2266f784f2" kindref="member">make_zipfile</ref>(self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a2060988e40d8ddc08eb084f873170498" kindref="member">egg_output</ref>,<sp/>archive_root,<sp/>verbose=self.verbose,</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dry_run=self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a5423a581bea209f964e5cbf77a5c29e7" kindref="member">dry_run</ref>,<sp/>mode=self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a6bd40daa0cb9ae4a457f159015da562a" kindref="member">gen_header</ref>())</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a4083c3d98d128f2cee31448fe61c4121" kindref="member">keep_temp</ref>:</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>remove_tree(self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a32b7373558697e1b843885ac1b9b9f80" kindref="member">bdist_dir</ref>,<sp/>dry_run=self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a5423a581bea209f964e5cbf77a5c29e7" kindref="member">dry_run</ref>)</highlight></codeline>
<codeline lineno="230"><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Add<sp/>to<sp/>&apos;Distribution.dist_files&apos;<sp/>so<sp/>that<sp/>the<sp/>&quot;upload&quot;<sp/>command<sp/>works</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="232" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a62bb2a64b6d90523d16db72369ec2838" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>getattr(self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a62bb2a64b6d90523d16db72369ec2838" kindref="member">distribution</ref>,<sp/></highlight><highlight class="stringliteral">&apos;dist_files&apos;</highlight><highlight class="normal">,<sp/>[]).append(</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;bdist_egg&apos;</highlight><highlight class="normal">,<sp/>get_python_version(),<sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a2060988e40d8ddc08eb084f873170498" kindref="member">egg_output</ref>))</highlight></codeline>
<codeline lineno="234"><highlight class="normal"></highlight></codeline>
<codeline lineno="235" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a569c3a93d7f6576cfba98ad18287d0f3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a569c3a93d7f6576cfba98ad18287d0f3" kindref="member">zap_pyfiles</ref>(self):</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.info(</highlight><highlight class="stringliteral">&quot;Removing<sp/>.py<sp/>files<sp/>from<sp/>temporary<sp/>directory&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>base,<sp/>dirs,<sp/>files<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1aea6b6d8b3825bc3ef327e94e03989019" kindref="member">walk_egg</ref>(self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a32b7373558697e1b843885ac1b9b9f80" kindref="member">bdist_dir</ref>):</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>files:</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path<sp/>=<sp/>os.path.join(base,<sp/>name)</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>name.endswith(</highlight><highlight class="stringliteral">&apos;.py&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.debug(</highlight><highlight class="stringliteral">&quot;Deleting<sp/>%s&quot;</highlight><highlight class="normal">,<sp/>path)</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.unlink(path)</highlight></codeline>
<codeline lineno="244"><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>base.endswith(</highlight><highlight class="stringliteral">&apos;__pycache__&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path_old<sp/>=<sp/>path</highlight></codeline>
<codeline lineno="247"><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern<sp/>=<sp/></highlight><highlight class="stringliteral">r&apos;(?P&lt;name&gt;.+)\.(?P&lt;magic&gt;[^.]+)\.pyc&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m<sp/>=<sp/>re.match(pattern,<sp/>name)</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path_new<sp/>=<sp/>os.path.join(</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>base,<sp/>os.pardir,<sp/>m.group(</highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal">)<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;.pyc&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.info(</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Renaming<sp/>file<sp/>from<sp/>[%s]<sp/>to<sp/>[%s]&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%<sp/>(path_old,<sp/>path_new))</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.remove(path_new)</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>OSError:</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.rename(path_old,<sp/>path_new)</highlight></codeline>
<codeline lineno="260"><highlight class="normal"></highlight></codeline>
<codeline lineno="261" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a35127d6e46a1d08f367c6f479ea762b8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a35127d6e46a1d08f367c6f479ea762b8" kindref="member">zip_safe</ref>(self):</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>safe<sp/>=<sp/>getattr(self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a62bb2a64b6d90523d16db72369ec2838" kindref="member">distribution</ref>,<sp/></highlight><highlight class="stringliteral">&apos;zip_safe&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>safe<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>safe</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.warn(</highlight><highlight class="stringliteral">&quot;zip_safe<sp/>flag<sp/>not<sp/>set;<sp/>analyzing<sp/>archive<sp/>contents...&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1abb93aa6725dcd2c6cc1f8a1e826510a1" kindref="member">analyze_egg</ref>(self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a32b7373558697e1b843885ac1b9b9f80" kindref="member">bdist_dir</ref>,<sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1aa7cc5f6bb0bea739aed5fa363eb3efd5" kindref="member">stubs</ref>)</highlight></codeline>
<codeline lineno="267"><highlight class="normal"></highlight></codeline>
<codeline lineno="268" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a6bd40daa0cb9ae4a457f159015da562a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a6bd40daa0cb9ae4a457f159015da562a" kindref="member">gen_header</ref>(self):</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;w&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"></highlight></codeline>
<codeline lineno="271" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1aa65a9fae2220d7284fd4f67bc48c8128" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1aa65a9fae2220d7284fd4f67bc48c8128" kindref="member">copy_metadata_to</ref>(self,<sp/>target_dir):</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Copy<sp/>metadata<sp/>(egg<sp/>info)<sp/>to<sp/>the<sp/>target_dir&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>normalize<sp/>the<sp/>path<sp/>(so<sp/>that<sp/>a<sp/>forward-slash<sp/>in<sp/>egg_info<sp/>will</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>match<sp/>using<sp/>startswith<sp/>below)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>norm_egg_info<sp/>=<sp/>os.path.normpath(self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a280f35f1dcbc9775b6b8d802aa0c83f4" kindref="member">egg_info</ref>)</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prefix<sp/>=<sp/>os.path.join(norm_egg_info,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>path<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.ei_cmd.filelist.files:</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>path.startswith(prefix):</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target<sp/>=<sp/>os.path.join(target_dir,<sp/>path[len(prefix):])</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ensure_directory(target)</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.copy_file(path,<sp/>target)</highlight></codeline>
<codeline lineno="282"><highlight class="normal"></highlight></codeline>
<codeline lineno="283" refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a4743926d482c043859f2d8ca9267a324" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a4743926d482c043859f2d8ca9267a324" kindref="member">get_ext_outputs</ref>(self):</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Get<sp/>a<sp/>list<sp/>of<sp/>relative<sp/>paths<sp/>to<sp/>C<sp/>extensions<sp/>in<sp/>the<sp/>output<sp/>distro&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="285"><highlight class="normal"></highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>all_outputs<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ext_outputs<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="288"><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>paths<sp/>=<sp/>{self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a32b7373558697e1b843885ac1b9b9f80" kindref="member">bdist_dir</ref>:<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">}</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>base,<sp/>dirs,<sp/>files<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1ab01faf69d550a8d0f8a3333063ac1e59" kindref="member">sorted_walk</ref>(self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a32b7373558697e1b843885ac1b9b9f80" kindref="member">bdist_dir</ref>):</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>filename<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>files:</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.splitext(filename)[1].lower()<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>NATIVE_EXTENSIONS:</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>all_outputs.append(paths[base]<sp/>+<sp/>filename)</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>filename<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>dirs:</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>paths[os.path.join(base,<sp/>filename)]<sp/>=<sp/>(paths[base]<sp/>+</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>filename<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;/&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="297"><highlight class="normal"></highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a62bb2a64b6d90523d16db72369ec2838" kindref="member">distribution</ref>.has_ext_modules():</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>build_cmd<sp/>=<sp/>self.get_finalized_command(</highlight><highlight class="stringliteral">&apos;build_ext&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>ext<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>build_cmd.extensions:</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(ext,<sp/>Library):</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fullname<sp/>=<sp/>build_cmd.get_ext_fullname(ext.name)</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>filename<sp/>=<sp/>build_cmd.get_ext_filename(fullname)</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>os.path.basename(filename).startswith(</highlight><highlight class="stringliteral">&apos;dl-&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.exists(os.path.join(self.<ref refid="classsetuptools_1_1command_1_1bdist__egg_1_1bdist__egg_1a32b7373558697e1b843885ac1b9b9f80" kindref="member">bdist_dir</ref>,<sp/>filename)):</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ext_outputs.append(filename)</highlight></codeline>
<codeline lineno="308"><highlight class="normal"></highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>all_outputs,<sp/>ext_outputs</highlight></codeline>
<codeline lineno="310"><highlight class="normal"></highlight></codeline>
<codeline lineno="311"><highlight class="normal"></highlight></codeline>
<codeline lineno="312" refid="namespacesetuptools_1_1command_1_1bdist__egg_1a0cf06b567bd34638c4533f36c5c90c25" refkind="member"><highlight class="normal">NATIVE_EXTENSIONS<sp/>=<sp/>dict.fromkeys(</highlight><highlight class="stringliteral">&apos;.dll<sp/>.so<sp/>.dylib<sp/>.pyd&apos;</highlight><highlight class="normal">.split())</highlight></codeline>
<codeline lineno="313"><highlight class="normal"></highlight></codeline>
<codeline lineno="314"><highlight class="normal"></highlight></codeline>
<codeline lineno="315" refid="namespacesetuptools_1_1command_1_1bdist__egg_1aea6b6d8b3825bc3ef327e94e03989019" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1aea6b6d8b3825bc3ef327e94e03989019" kindref="member">walk_egg</ref>(egg_dir):</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Walk<sp/>an<sp/>unpacked<sp/>egg&apos;s<sp/>contents,<sp/>skipping<sp/>the<sp/>metadata<sp/>directory&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/>walker<sp/>=<sp/><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1ab01faf69d550a8d0f8a3333063ac1e59" kindref="member">sorted_walk</ref>(egg_dir)</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/>base,<sp/>dirs,<sp/>files<sp/>=<sp/>next(walker)</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;EGG-INFO&apos;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>dirs:</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dirs.remove(</highlight><highlight class="stringliteral">&apos;EGG-INFO&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">yield</highlight><highlight class="normal"><sp/>base,<sp/>dirs,<sp/>files</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>bdf<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>walker:</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">yield</highlight><highlight class="normal"><sp/>bdf</highlight></codeline>
<codeline lineno="324"><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"></highlight></codeline>
<codeline lineno="326" refid="namespacesetuptools_1_1command_1_1bdist__egg_1abb93aa6725dcd2c6cc1f8a1e826510a1" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1abb93aa6725dcd2c6cc1f8a1e826510a1" kindref="member">analyze_egg</ref>(egg_dir,<sp/>stubs):</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>check<sp/>for<sp/>existing<sp/>flag<sp/>in<sp/>EGG-INFO</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>flag,<sp/>fn<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>safety_flags.items():</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.exists(os.path.join(egg_dir,<sp/></highlight><highlight class="stringliteral">&apos;EGG-INFO&apos;</highlight><highlight class="normal">,<sp/>fn)):</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>flag</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1af401a64c94a883afab1fab217f5801fe" kindref="member">can_scan</ref>():</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/>safe<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>base,<sp/>dirs,<sp/>files<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1aea6b6d8b3825bc3ef327e94e03989019" kindref="member">walk_egg</ref>(egg_dir):</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>files:</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>name.endswith(</highlight><highlight class="stringliteral">&apos;.py&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>name.endswith(</highlight><highlight class="stringliteral">&apos;.pyw&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>name.endswith(</highlight><highlight class="stringliteral">&apos;.pyc&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>name.endswith(</highlight><highlight class="stringliteral">&apos;.pyo&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>always<sp/>scan,<sp/>even<sp/>if<sp/>we<sp/>already<sp/>know<sp/>we&apos;re<sp/>not<sp/>safe</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>safe<sp/>=<sp/><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1ac41042502bdb987beb58c82e08f8d036" kindref="member">scan_module</ref>(egg_dir,<sp/>base,<sp/>name,<sp/>stubs)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>safe</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>safe</highlight></codeline>
<codeline lineno="342"><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"></highlight></codeline>
<codeline lineno="344" refid="namespacesetuptools_1_1command_1_1bdist__egg_1a005d20b7ce571b6499d7ac2b0af76188" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1a005d20b7ce571b6499d7ac2b0af76188" kindref="member">write_safety_flag</ref>(egg_dir,<sp/>safe):</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Write<sp/>or<sp/>remove<sp/>zip<sp/>safety<sp/>flag<sp/>file(s)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>flag,<sp/>fn<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>safety_flags.items():</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fn<sp/>=<sp/>os.path.join(egg_dir,<sp/>fn)</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.exists(fn):</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>safe<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>bool(safe)<sp/>!=<sp/>flag:</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.unlink(fn)</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>safe<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>bool(safe)<sp/>==<sp/>flag:</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f<sp/>=<sp/>open(fn,<sp/></highlight><highlight class="stringliteral">&apos;wt&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f.write(</highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f.close()</highlight></codeline>
<codeline lineno="355"><highlight class="normal"></highlight></codeline>
<codeline lineno="356"><highlight class="normal"></highlight></codeline>
<codeline lineno="357" refid="namespacesetuptools_1_1command_1_1bdist__egg_1a07d27a9d1cd1e82f5429cbd81ae9b450" refkind="member"><highlight class="normal">safety_flags<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;zip-safe&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;not-zip-safe&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="360"><highlight class="normal">}</highlight></codeline>
<codeline lineno="361"><highlight class="normal"></highlight></codeline>
<codeline lineno="362"><highlight class="normal"></highlight></codeline>
<codeline lineno="363" refid="namespacesetuptools_1_1command_1_1bdist__egg_1ac41042502bdb987beb58c82e08f8d036" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1ac41042502bdb987beb58c82e08f8d036" kindref="member">scan_module</ref>(egg_dir,<sp/>base,<sp/>name,<sp/>stubs):</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Check<sp/>whether<sp/>module<sp/>possibly<sp/>uses<sp/>unsafe-for-zipfile<sp/>stuff&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="365"><highlight class="normal"></highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/>filename<sp/>=<sp/>os.path.join(base,<sp/>name)</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>filename[:-1]<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>stubs:</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">#<sp/>Extension<sp/>module</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/>pkg<sp/>=<sp/>base[len(egg_dir)<sp/>+<sp/>1:].replace(os.sep,<sp/></highlight><highlight class="stringliteral">&apos;.&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/>module<sp/>=<sp/>pkg<sp/>+<sp/>(pkg<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;.&apos;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">)<sp/>+<sp/>os.path.splitext(name)[0]</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>sys.version_info<sp/>&lt;<sp/>(3,<sp/>7):</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>skip<sp/>=<sp/>12<sp/><sp/></highlight><highlight class="comment">#<sp/>skip<sp/>magic<sp/>&amp;<sp/>date<sp/>&amp;<sp/>file<sp/>size</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>skip<sp/>=<sp/>16<sp/><sp/></highlight><highlight class="comment">#<sp/>skip<sp/>magic<sp/>&amp;<sp/>reserved?<sp/>&amp;<sp/>date<sp/>&amp;<sp/>file<sp/>size</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/>f<sp/>=<sp/>open(filename,<sp/></highlight><highlight class="stringliteral">&apos;rb&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/>f.read(skip)</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/>code<sp/>=<sp/>marshal.load(f)</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/>f.close()</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/>safe<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/>symbols<sp/>=<sp/>dict.fromkeys(<ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1af750e7218e24c1762d958ccb683d7dc8" kindref="member">iter_symbols</ref>(code))</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>bad<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>[</highlight><highlight class="stringliteral">&apos;__file__&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;__path__&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>bad<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>symbols:</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.warn(</highlight><highlight class="stringliteral">&quot;%s:<sp/>module<sp/>references<sp/>%s&quot;</highlight><highlight class="normal">,<sp/>module,<sp/>bad)</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>safe<sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;inspect&apos;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>symbols:</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>bad<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>[</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;getsource&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;getabsfile&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;getsourcefile&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;getfile&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;getsourcelines&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;findsource&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;getcomments&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;getframeinfo&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;getinnerframes&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;getouterframes&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;stack&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;trace&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>]:</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>bad<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>symbols:</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.warn(</highlight><highlight class="stringliteral">&quot;%s:<sp/>module<sp/>MAY<sp/>be<sp/>using<sp/>inspect.%s&quot;</highlight><highlight class="normal">,<sp/>module,<sp/>bad)</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>safe<sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>safe</highlight></codeline>
<codeline lineno="395"><highlight class="normal"></highlight></codeline>
<codeline lineno="396"><highlight class="normal"></highlight></codeline>
<codeline lineno="397" refid="namespacesetuptools_1_1command_1_1bdist__egg_1af750e7218e24c1762d958ccb683d7dc8" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1af750e7218e24c1762d958ccb683d7dc8" kindref="member">iter_symbols</ref>(code):</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Yield<sp/>names<sp/>and<sp/>strings<sp/>used<sp/>by<sp/>`code`<sp/>and<sp/>its<sp/>nested<sp/>code<sp/>objects&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>code.co_names:</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">yield</highlight><highlight class="normal"><sp/>name</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>const<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>code.co_consts:</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(const,<sp/>str):</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">yield</highlight><highlight class="normal"><sp/>const</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>isinstance(const,<sp/>CodeType):</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1af750e7218e24c1762d958ccb683d7dc8" kindref="member">iter_symbols</ref>(const):</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">yield</highlight><highlight class="normal"><sp/>name</highlight></codeline>
<codeline lineno="407"><highlight class="normal"></highlight></codeline>
<codeline lineno="408"><highlight class="normal"></highlight></codeline>
<codeline lineno="409" refid="namespacesetuptools_1_1command_1_1bdist__egg_1af401a64c94a883afab1fab217f5801fe" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1af401a64c94a883afab1fab217f5801fe" kindref="member">can_scan</ref>():</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>sys.platform.startswith(</highlight><highlight class="stringliteral">&apos;java&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>sys.platform<sp/>!=<sp/></highlight><highlight class="stringliteral">&apos;cli&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>CPython,<sp/>PyPy,<sp/>etc.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/>log.warn(</highlight><highlight class="stringliteral">&quot;Unable<sp/>to<sp/>analyze<sp/>compiled<sp/>code<sp/>on<sp/>this<sp/>platform.&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/>log.warn(</highlight><highlight class="stringliteral">&quot;Please<sp/>ask<sp/>the<sp/>author<sp/>to<sp/>include<sp/>a<sp/>&apos;zip_safe&apos;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;<sp/>setting<sp/>(either<sp/>True<sp/>or<sp/>False)<sp/>in<sp/>the<sp/>package&apos;s<sp/>setup.py&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="416"><highlight class="normal"></highlight></codeline>
<codeline lineno="417"><highlight class="normal"></highlight></codeline>
<codeline lineno="418"><highlight class="normal"></highlight><highlight class="comment">#<sp/>Attribute<sp/>names<sp/>of<sp/>options<sp/>for<sp/>commands<sp/>that<sp/>might<sp/>need<sp/>to<sp/>be<sp/>convinced<sp/>to</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="419"><highlight class="normal"></highlight><highlight class="comment">#<sp/>install<sp/>to<sp/>the<sp/>egg<sp/>build<sp/>directory</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="420"><highlight class="normal"></highlight></codeline>
<codeline lineno="421" refid="namespacesetuptools_1_1command_1_1bdist__egg_1a20c5dfc3311167c3ebba47edba85ba83" refkind="member"><highlight class="normal">INSTALL_DIRECTORY_ATTRS<sp/>=<sp/>[</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;install_lib&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;install_dir&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;install_data&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;install_base&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="423"><highlight class="normal">]</highlight></codeline>
<codeline lineno="424"><highlight class="normal"></highlight></codeline>
<codeline lineno="425"><highlight class="normal"></highlight></codeline>
<codeline lineno="426" refid="namespacesetuptools_1_1command_1_1bdist__egg_1a17aef531f564d95c3e6e5d2266f784f2" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1a17aef531f564d95c3e6e5d2266f784f2" kindref="member">make_zipfile</ref>(zip_filename,<sp/>base_dir,<sp/>verbose=0,<sp/>dry_run=0,<sp/>compress=True,</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mode=&apos;w&apos;):</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Create<sp/>a<sp/>zip<sp/>file<sp/>from<sp/>all<sp/>the<sp/>files<sp/>under<sp/>&apos;base_dir&apos;.<sp/><sp/>The<sp/>output</highlight></codeline>
<codeline lineno="429"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>zip<sp/>file<sp/>will<sp/>be<sp/>named<sp/>&apos;base_dir&apos;<sp/>+<sp/>&quot;.zip&quot;.<sp/><sp/>Uses<sp/>either<sp/>the<sp/>&quot;zipfile&quot;</highlight></codeline>
<codeline lineno="430"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Python<sp/>module<sp/>(if<sp/>available)<sp/>or<sp/>the<sp/>InfoZIP<sp/>&quot;zip&quot;<sp/>utility<sp/>(if<sp/>installed</highlight></codeline>
<codeline lineno="431"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>and<sp/>found<sp/>on<sp/>the<sp/>default<sp/>search<sp/>path).<sp/><sp/>If<sp/>neither<sp/>tool<sp/>is<sp/>available,</highlight></codeline>
<codeline lineno="432"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>raises<sp/>DistutilsExecError.<sp/><sp/>Returns<sp/>the<sp/>name<sp/>of<sp/>the<sp/>output<sp/>zip<sp/>file.</highlight></codeline>
<codeline lineno="433"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>zipfile</highlight></codeline>
<codeline lineno="435"><highlight class="normal"></highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/>mkpath(os.path.dirname(zip_filename),<sp/>dry_run=dry_run)</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/>log.info(</highlight><highlight class="stringliteral">&quot;creating<sp/>&apos;%s&apos;<sp/>and<sp/>adding<sp/>&apos;%s&apos;<sp/>to<sp/>it&quot;</highlight><highlight class="normal">,<sp/>zip_filename,<sp/>base_dir)</highlight></codeline>
<codeline lineno="438"><highlight class="normal"></highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">visit(z,<sp/>dirname,<sp/>names):</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>names:</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path<sp/>=<sp/>os.path.normpath(os.path.join(dirname,<sp/>name))</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.isfile(path):</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p<sp/>=<sp/>path[len(base_dir)<sp/>+<sp/>1:]</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>dry_run:</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>z.write(path,<sp/>p)</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.debug(</highlight><highlight class="stringliteral">&quot;adding<sp/>&apos;%s&apos;&quot;</highlight><highlight class="normal">,<sp/>p)</highlight></codeline>
<codeline lineno="447"><highlight class="normal"></highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/>compression<sp/>=<sp/>zipfile.ZIP_DEFLATED<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>compress<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>zipfile.ZIP_STORED</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>dry_run:</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>z<sp/>=<sp/>zipfile.ZipFile(zip_filename,<sp/>mode,<sp/>compression=compression)</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>dirname,<sp/>dirs,<sp/>files<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1ab01faf69d550a8d0f8a3333063ac1e59" kindref="member">sorted_walk</ref>(base_dir):</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>visit(z,<sp/>dirname,<sp/>files)</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>z.close()</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>dirname,<sp/>dirs,<sp/>files<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1command_1_1bdist__egg_1ab01faf69d550a8d0f8a3333063ac1e59" kindref="member">sorted_walk</ref>(base_dir):</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>visit(</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/>dirname,<sp/>files)</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>zip_filename</highlight></codeline>
    </programlisting>
    <location file="microservicio_data_stream/venv/Lib/site-packages/setuptools/command/bdist_egg.py"/>
  </compounddef>
</doxygen>
