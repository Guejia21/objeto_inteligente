<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="es">
  <compounddef id="namespacemain" kind="namespace" language="Python">
    <compoundname>main</compoundname>
    <sectiondef kind="var">
      <memberdef kind="variable" id="namespacemain_1a5fa94f0581009434c7a63791944d6ff4" prot="public" static="no" mutable="no">
        <type></type>
        <definition>main.app</definition>
        <argsstring></argsstring>
        <name>app</name>
        <qualifiedname>main.app</qualifiedname>
        <initializer>=  <ref refid="classfastapi_1_1applications_1_1_fast_a_p_i" kindref="compound">FastAPI</ref>()</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="gateway/app/main.py" line="4" column="1" bodyfile="gateway/app/main.py" bodystart="4" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="namespacemain_1a0cf58d9b4a444874a8cf80fdf162b0fb" prot="public" static="no" mutable="no">
        <type></type>
        <definition>main.host</definition>
        <argsstring></argsstring>
        <name>host</name>
        <qualifiedname>main.host</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="gateway/app/main.py" line="24" column="1" bodyfile="gateway/app/main.py" bodystart="24" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="namespacemain_1a12fac67ac230690557ab76d3faa71d8c" prot="public" static="no" mutable="no">
        <type></type>
        <definition>main.port</definition>
        <argsstring></argsstring>
        <name>port</name>
        <qualifiedname>main.port</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="gateway/app/main.py" line="25" column="1" bodyfile="gateway/app/main.py" bodystart="25" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="namespacemain_1a9d9c0f06ea285d6128fdce786fa66851" prot="public" static="no" mutable="no">
        <type></type>
        <definition>main.shutdown_event</definition>
        <argsstring></argsstring>
        <name>shutdown_event</name>
        <qualifiedname>main.shutdown_event</qualifiedname>
        <initializer>=  asyncio.Event()</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="microservicio_data_stream/main.py" line="50" column="1" bodyfile="microservicio_data_stream/main.py" bodystart="50" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="namespacemain_1aa530773ea5df6edbdc7807a0eaa51773" prot="public" static="no" mutable="no">
        <type>list</type>
        <definition>list main.running_tasks</definition>
        <argsstring></argsstring>
        <name>running_tasks</name>
        <qualifiedname>main.running_tasks</qualifiedname>
        <initializer>=  []</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="microservicio_data_stream/main.py" line="51" column="1" bodyfile="microservicio_data_stream/main.py" bodystart="51" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="func">
      <memberdef kind="function" id="namespacemain_1a5e8523353d7c034328ad494a0cacb6eb" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>main.route</definition>
        <argsstring>(Request request, str path_name, APIRouter api_router=Depends(APIRouter))</argsstring>
        <name>route</name>
        <qualifiedname>main.route</qualifiedname>
        <param>
          <type>Request</type>
          <declname>request</declname>
        </param>
        <param>
          <type>str</type>
          <declname>path_name</declname>
        </param>
        <param>
          <type>APIRouter</type>
          <declname>api_router</declname>
          <defval>Depends(APIRouter)</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="gateway/app/main.py" line="7" column="1" bodyfile="gateway/app/main.py" bodystart="7" bodyend="19"/>
      </memberdef>
      <memberdef kind="function" id="namespacemain_1ae435cbc6ee0c9077a8ed5c42a77b49d5" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>main::redirect_to_docs</definition>
        <argsstring>()</argsstring>
        <name>redirect_to_docs</name>
        <qualifiedname>main.redirect_to_docs</qualifiedname>
        <briefdescription>
<para>Redirige raíz a documentación Swagger. </para>
        </briefdescription>
        <detaileddescription>
<para><verbatim>    @brief Redirige raíz a documentación Swagger.
    
    @return RedirectResponse a /docs.
</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="micro_gestion_objetos/app/main.py" line="34" column="1" bodyfile="micro_gestion_objetos/app/main.py" bodystart="34" bodyend="41"/>
      </memberdef>
      <memberdef kind="function" id="namespacemain_1a4b0afba9bb946ff70defaa002c1f41e2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>main.lifespan</definition>
        <argsstring>(FastAPI app)</argsstring>
        <name>lifespan</name>
        <qualifiedname>main.lifespan</qualifiedname>
        <param>
          <type><ref refid="classfastapi_1_1applications_1_1_fast_a_p_i" kindref="compound">FastAPI</ref></type>
          <declname>app</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="micro_automatizacion_ecas/app/main.py" line="12" column="1" bodyfile="micro_automatizacion_ecas/app/main.py" bodystart="12" bodyend="16"/>
      </memberdef>
      <memberdef kind="function" id="namespacemain_1a79124365d1c83d2112cc071a29831386" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>main.conectar_wifi</definition>
        <argsstring>()</argsstring>
        <name>conectar_wifi</name>
        <qualifiedname>main.conectar_wifi</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="microservicio_data_stream/main.py" line="54" column="1" bodyfile="microservicio_data_stream/main.py" bodystart="54" bodyend="62"/>
      </memberdef>
      <memberdef kind="function" id="namespacemain_1a799b0d523414a91d4d3924ae19ec6e0f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>main.shutdown</definition>
        <argsstring>()</argsstring>
        <name>shutdown</name>
        <qualifiedname>main.shutdown</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><verbatim> * @brief Maneja el cierre seguro del servidor Microdot
 * @details
 * Coordina la detención ordenada de:
 * 1. Event loop - propaga shutdown_event
 * 2. Tareas asyncio - cancela todas las tareas en running_tasks
 * 3. Conexiones MQTT - cierra clientes mosquitto y ThingBoard
 * 4. Servidor HTTP - detiene Microdot
 * 
 * @return void
 * @see running_tasks lista de tareas en ejecución
 * @see mosquitto_broker cliente MQTT Mosquitto
 * @see tb_broker cliente MQTT ThingBoard
</verbatim></para>
<para><verbatim>Maneja el cierre seguro del servidor</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="microservicio_data_stream/main.py" line="63" column="1" bodyfile="microservicio_data_stream/main.py" bodystart="63" bodyend="115"/>
      </memberdef>
      <memberdef kind="function" id="namespacemain_1a3140e9a5b6a71ffbf498198cfc471b88" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>main.main</definition>
        <argsstring>()</argsstring>
        <name>main</name>
        <qualifiedname>main.main</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><verbatim> * @brief Función principal que inicializa y ejecuta el servidor Microdot
 * @details
 * Secuencia de inicialización:
 * 1. Imprime configuración del servicio (HOST, PORT, OSID, TITLE)
 * 2. Registra manejadores de señales UNIX (SIGINT, SIGTERM) para shutdown seguro
 * 3. Inicia servidor Microdot asincrónico
 * 4. Si OSID está configurado:
 *    - Publica telemetría periódicamente a ThingBoard (si token disponible)
 *    - Publica telemetría periódicamente a Mosquitto
 * 5. Si OSID no está configurado: espera mensajes MQTT de inicialización
 * 6. Aguarda evento de shutdown
 * 
 * @return void (async)
 * @see shutdown() función invocada en cierre
 * @see Config configuración centralizada
 * @see publicar_valores tarea de publicación periódica
 * @see consumer_mqtt consumidor de mensajes de inicialización
</verbatim> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="microservicio_data_stream/main.py" line="116" column="1" bodyfile="microservicio_data_stream/main.py" bodystart="116" bodyend="179"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para><verbatim>    @file main.py
    @brief Punto de entrada y configuración de la aplicación FastAPI para micro_gestion_objetos.
    @details
    Define la aplicación FastAPI, registra routers, y configura el servidor ASGI.
    Este microservicio gestiona el ciclo de vida de objetos inteligentes:
    creación, consultas de estado, envío de datos, y comunicación con datastreams.
    
    @author  NexTech
    @version 1.0.0
    @date 2025-01-10
    
    @see objeto_controller Para endpoints REST
    @see ObjetoService Para lógica de negocio
</verbatim></para>
<para><verbatim>    @file main.py
    @brief Punto de entrada para micro_gestion_conocimiento.
    @details Gestiona ontologías OWL, consultas SPARQL, y reglas ECA.
    @version 1.0.0
</verbatim></para>
<para><verbatim> * @file main.py
 * @brief Punto de entrada principal del Microservicio de Datastreams (Microdot)
 * @details
 * Servicio responsable de gestionar datastreams de objetos inteligentes usando Microdot framework (MicroPython).
 * 
 * Funcionalidades principales:
 * - Servidor HTTP asincrónico basado en Microdot
 * - Gestión de datastreams (sensores y actuadores)
 * - Publicación periódica de telemetría a ThingBoard y Mosquitto
 * - Consumo de mensajes MQTT para inicialización y actuaciones
 * - Cierre seguro con manejo de señales UNIX
 * - Soporte para WiFi en dispositivos ESP32
 * 
 * @see routes/datastreams.py para definición de endpoints
 * @see services/datastream_service.py para lógica de negocio
 * @see config.py para configuración del servicio
 * 
 * @author Sistema de Objetos Inteligentes
 * @version 1.0.0
 * @date 2024
</verbatim> </para>
    </detaileddescription>
    <location file="gateway/app/main.py" line="1" column="1"/>
  </compounddef>
</doxygen>
