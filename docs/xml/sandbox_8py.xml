<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="es">
  <compounddef id="sandbox_8py" kind="file" language="Python">
    <compoundname>sandbox.py</compoundname>
    <innerclass refid="classsetuptools_1_1sandbox_1_1_unpickleable_exception" prot="public">setuptools::sandbox::UnpickleableException</innerclass>
    <innerclass refid="classsetuptools_1_1sandbox_1_1_exception_saver" prot="public">setuptools::sandbox::ExceptionSaver</innerclass>
    <innerclass refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox" prot="public">setuptools::sandbox::AbstractSandbox</innerclass>
    <innerclass refid="classsetuptools_1_1sandbox_1_1_directory_sandbox" prot="public">setuptools::sandbox::DirectorySandbox</innerclass>
    <innerclass refid="classsetuptools_1_1sandbox_1_1_sandbox_violation" prot="public">setuptools::sandbox::SandboxViolation</innerclass>
    <innernamespace refid="namespacesetuptools">setuptools</innernamespace>
    <innernamespace refid="namespacesetuptools_1_1sandbox">setuptools::sandbox</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacesetuptools_1_1sandbox" refkind="compound"><highlight class="keyword">import</highlight><highlight class="normal"><sp/>os</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>sys</highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>tempfile</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>operator</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>functools</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>itertools</highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>re</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>contextlib</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>pickle</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>textwrap</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>builtins</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>pkg_resources</highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>distutils.errors<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>DistutilsError</highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>pkg_resources<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>working_set</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>sys.platform.startswith(</highlight><highlight class="stringliteral">&apos;java&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>org.python.modules.posix.PosixModule<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>_os</highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="20" refid="namespacesetuptools_1_1sandbox_1a99f75779e14f881f51f4c38d4a586167" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>_os<sp/>=<sp/>sys.modules[os.name]</highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="22" refid="namespacesetuptools_1_1sandbox_1a606d2df05a9166bff220807da3b98823" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>_file<sp/>=<sp/>file</highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>NameError:</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/>_file<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25" refid="namespacesetuptools_1_1sandbox_1a616fa17a666518a02267233ecdc9df33" refkind="member"><highlight class="normal">_open<sp/>=<sp/>open</highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal">__all__<sp/>=<sp/>[</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;AbstractSandbox&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;DirectorySandbox&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;SandboxViolation&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;run_setup&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="33"><highlight class="normal">]</highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight></codeline>
<codeline lineno="36" refid="namespacesetuptools_1_1sandbox_1a6d08b124d7fc3752504cea663fb8c233" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1sandbox_1a6d08b124d7fc3752504cea663fb8c233" kindref="member">_execfile</ref>(filename,<sp/>globals,<sp/>locals=None):</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="38"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Python<sp/>3<sp/>implementation<sp/>of<sp/>execfile.</highlight></codeline>
<codeline lineno="39"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/>mode<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;rb&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/>open(filename,<sp/>mode)<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>stream:</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>script<sp/>=<sp/>stream.read()</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>locals<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>locals<sp/>=<sp/>globals</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/>code<sp/>=<sp/>compile(script,<sp/>filename,<sp/></highlight><highlight class="stringliteral">&apos;exec&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/>exec(code,<sp/>globals,<sp/>locals)</highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="preprocessor">@contextlib.contextmanager</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50" refid="namespacesetuptools_1_1sandbox_1a90b846a7925c83d8f9ce1749286849ea" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1sandbox_1a90b846a7925c83d8f9ce1749286849ea" kindref="member">save_argv</ref>(repl=None):</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/>saved<sp/>=<sp/>sys.argv[:]</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>repl<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sys.argv[:]<sp/>=<sp/>repl</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">yield</highlight><highlight class="normal"><sp/>saved</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">finally</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sys.argv[:]<sp/>=<sp/>saved</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight><highlight class="preprocessor">@contextlib.contextmanager</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61" refid="namespacesetuptools_1_1sandbox_1ad158dc58681bf5b4f0d4ecf3eb55370e" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1sandbox_1ad158dc58681bf5b4f0d4ecf3eb55370e" kindref="member">save_path</ref>():</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/>saved<sp/>=<sp/>sys.path[:]</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">yield</highlight><highlight class="normal"><sp/>saved</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">finally</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sys.path[:]<sp/>=<sp/>saved</highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight><highlight class="preprocessor">@contextlib.contextmanager</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="70" refid="namespacesetuptools_1_1sandbox_1a6f51ebddfe81ff65264f49b215961f47" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1sandbox_1a6f51ebddfe81ff65264f49b215961f47" kindref="member">override_temp</ref>(replacement):</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="72"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Monkey-patch<sp/>tempfile.tempdir<sp/>with<sp/>replacement,<sp/>ensuring<sp/>it<sp/>exists</highlight></codeline>
<codeline lineno="73"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/>os.makedirs(replacement,<sp/>exist_ok=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/>saved<sp/>=<sp/>tempfile.tempdir</highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/>tempfile.tempdir<sp/>=<sp/>replacement</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">yield</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">finally</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tempfile.tempdir<sp/>=<sp/>saved</highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight><highlight class="preprocessor">@contextlib.contextmanager</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="87" refid="namespacesetuptools_1_1sandbox_1a08a2a439e9ca37133fe9382e30b1ea40" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1sandbox_1a08a2a439e9ca37133fe9382e30b1ea40" kindref="member">pushd</ref>(target):</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/>saved<sp/>=<sp/>os.getcwd()</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/>os.chdir(target)</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">yield</highlight><highlight class="normal"><sp/>saved</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">finally</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.chdir(saved)</highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96" refid="classsetuptools_1_1sandbox_1_1_unpickleable_exception" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_unpickleable_exception" kindref="compound">UnpickleableException</ref>(Exception):</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="98"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>An<sp/>exception<sp/>representing<sp/>another<sp/>Exception<sp/>that<sp/>could<sp/>not<sp/>be<sp/>pickled.</highlight></codeline>
<codeline lineno="99"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@staticmethod</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="102" refid="classsetuptools_1_1sandbox_1_1_unpickleable_exception_1ad3751807db04232b3c991bda92783b95" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_unpickleable_exception_1ad3751807db04232b3c991bda92783b95" kindref="member">dump</ref>(type,<sp/>exc):</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="104"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Always<sp/>return<sp/>a<sp/>dumped<sp/>(pickled)<sp/>type<sp/>and<sp/>exc.<sp/>If<sp/>exc<sp/>can&apos;t<sp/>be<sp/>pickled,</highlight></codeline>
<codeline lineno="105"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wrap<sp/>it<sp/>in<sp/>UnpickleableException<sp/>first.</highlight></codeline>
<codeline lineno="106"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pickle.dumps(type),<sp/>pickle.dumps(exc)</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>Exception:</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>get<sp/>UnpickleableException<sp/>inside<sp/>the<sp/>sandbox</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1sandbox" kindref="compound">setuptools.sandbox</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>UnpickleableException<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>cls</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>cls.<ref refid="classsetuptools_1_1sandbox_1_1_unpickleable_exception_1ad3751807db04232b3c991bda92783b95" kindref="member">dump</ref>(cls,<sp/>cls(repr(exc)))</highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight></codeline>
<codeline lineno="116" refid="classsetuptools_1_1sandbox_1_1_exception_saver" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_exception_saver" kindref="compound">ExceptionSaver</ref>:</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="118"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>A<sp/>Context<sp/>Manager<sp/>that<sp/>will<sp/>save<sp/>an<sp/>exception,<sp/>serialized,<sp/>and<sp/>restore<sp/>it</highlight></codeline>
<codeline lineno="119"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>later.</highlight></codeline>
<codeline lineno="120"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__enter__(self):</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self</highlight></codeline>
<codeline lineno="124"><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__exit__(self,<sp/>type,<sp/>exc,<sp/>tb):</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>exc:</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>dump<sp/>the<sp/>exception</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="130" refid="classsetuptools_1_1sandbox_1_1_exception_saver_1a42aec241b7e701c539cf2e6fdfb9c4fd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_exception_saver_1a42aec241b7e701c539cf2e6fdfb9c4fd" kindref="member">_saved</ref><sp/>=<sp/>UnpickleableException.dump(type,<sp/>exc)</highlight></codeline>
<codeline lineno="131" refid="classsetuptools_1_1sandbox_1_1_exception_saver_1ad61930d0d7160effa38aa5a875d3fcf8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_exception_saver_1ad61930d0d7160effa38aa5a875d3fcf8" kindref="member">_tb</ref><sp/>=<sp/>tb</highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>suppress<sp/>the<sp/>exception</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight></codeline>
<codeline lineno="136" refid="classsetuptools_1_1sandbox_1_1_exception_saver_1afd9fab9e533ea1562cc753ed362e0bca" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_exception_saver_1afd9fab9e533ea1562cc753ed362e0bca" kindref="member">resume</ref>(self):</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;restore<sp/>and<sp/>re-raise<sp/>any<sp/>exception&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;_saved&apos;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>vars(self):</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>type,<sp/>exc<sp/>=<sp/>map(pickle.loads,<sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_exception_saver_1a42aec241b7e701c539cf2e6fdfb9c4fd" kindref="member">_saved</ref>)</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>exc.with_traceback(self.<ref refid="classsetuptools_1_1sandbox_1_1_exception_saver_1ad61930d0d7160effa38aa5a875d3fcf8" kindref="member">_tb</ref>)</highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight><highlight class="preprocessor">@contextlib.contextmanager</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="147" refid="namespacesetuptools_1_1sandbox_1a9df46ce1bd17dbce065c7e11dc46d010" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1sandbox_1a9df46ce1bd17dbce065c7e11dc46d010" kindref="member">save_modules</ref>():</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="149"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Context<sp/>in<sp/>which<sp/>imported<sp/>modules<sp/>are<sp/>saved.</highlight></codeline>
<codeline lineno="150"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="151"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Translates<sp/>exceptions<sp/>internal<sp/>to<sp/>the<sp/>context<sp/>into<sp/>the<sp/>equivalent<sp/>exception</highlight></codeline>
<codeline lineno="152"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>outside<sp/>the<sp/>context.</highlight></codeline>
<codeline lineno="153"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/>saved<sp/>=<sp/>sys.modules.copy()</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/><ref refid="classsetuptools_1_1sandbox_1_1_exception_saver" kindref="compound">ExceptionSaver</ref>()<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>saved_exc:</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">yield</highlight><highlight class="normal"><sp/>saved</highlight></codeline>
<codeline lineno="157"><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/>sys.modules.update(saved)</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>remove<sp/>any<sp/>modules<sp/>imported<sp/>since</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/>del_modules<sp/>=<sp/>(</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mod_name</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>mod_name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>sys.modules</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>mod_name<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>saved</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>exclude<sp/>any<sp/>encodings<sp/>modules.<sp/>See<sp/>#285</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>mod_name.startswith(</highlight><highlight class="stringliteral">&apos;encodings.&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacesetuptools_1_1sandbox_1a643f2aae05bdb3af1a073416aa4436e4" kindref="member">_clear_modules</ref>(del_modules)</highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/>saved_exc.resume()</highlight></codeline>
<codeline lineno="170"><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight></codeline>
<codeline lineno="172" refid="namespacesetuptools_1_1sandbox_1a643f2aae05bdb3af1a073416aa4436e4" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1sandbox_1a643f2aae05bdb3af1a073416aa4436e4" kindref="member">_clear_modules</ref>(module_names):</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>mod_name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>list(module_names):</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>del<sp/>sys.modules[mod_name]</highlight></codeline>
<codeline lineno="175"><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight><highlight class="preprocessor">@contextlib.contextmanager</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="178" refid="namespacesetuptools_1_1sandbox_1a2c716f0ba46e678dd85be72db41c4e14" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1sandbox_1a2c716f0ba46e678dd85be72db41c4e14" kindref="member">save_pkg_resources_state</ref>():</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/>saved<sp/>=<sp/>pkg_resources.__getstate__()</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">yield</highlight><highlight class="normal"><sp/>saved</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">finally</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pkg_resources.__setstate__(saved)</highlight></codeline>
<codeline lineno="184"><highlight class="normal"></highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"></highlight><highlight class="preprocessor">@contextlib.contextmanager</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="187" refid="namespacesetuptools_1_1sandbox_1a8e87463f0039530f6b3b039c58ec09da" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1sandbox_1a8e87463f0039530f6b3b039c58ec09da" kindref="member">setup_context</ref>(setup_dir):</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/>temp_dir<sp/>=<sp/>os.path.join(setup_dir,<sp/></highlight><highlight class="stringliteral">&apos;temp&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1sandbox_1a2c716f0ba46e678dd85be72db41c4e14" kindref="member">save_pkg_resources_state</ref>():</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1sandbox_1a9df46ce1bd17dbce065c7e11dc46d010" kindref="member">save_modules</ref>():</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1sandbox_1ad158dc58681bf5b4f0d4ecf3eb55370e" kindref="member">save_path</ref>():</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacesetuptools_1_1sandbox_1a579ab6c2031e94770efe338681e83bd7" kindref="member">hide_setuptools</ref>()</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1sandbox_1a90b846a7925c83d8f9ce1749286849ea" kindref="member">save_argv</ref>():</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1sandbox_1a6f51ebddfe81ff65264f49b215961f47" kindref="member">override_temp</ref>(temp_dir):</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1sandbox_1a08a2a439e9ca37133fe9382e30b1ea40" kindref="member">pushd</ref>(setup_dir):</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>ensure<sp/>setuptools<sp/>commands<sp/>are<sp/>available</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__import__(</highlight><highlight class="stringliteral">&apos;setuptools&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">yield</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight></codeline>
<codeline lineno="201" refid="namespacesetuptools_1_1sandbox_1ac97e22be742d4ea8e38a68abd51c0410" refkind="member"><highlight class="normal">_MODULES_TO_HIDE<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;setuptools&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;distutils&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;pkg_resources&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Cython&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;_distutils_hack&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="207"><highlight class="normal">}</highlight></codeline>
<codeline lineno="208"><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"></highlight></codeline>
<codeline lineno="210" refid="namespacesetuptools_1_1sandbox_1a3e3f4d25efb1d719550e5d80d1f5e16b" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1sandbox_1a3e3f4d25efb1d719550e5d80d1f5e16b" kindref="member">_needs_hiding</ref>(mod_name):</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="212"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>_needs_hiding(&apos;setuptools&apos;)</highlight></codeline>
<codeline lineno="213"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>True</highlight></codeline>
<codeline lineno="214"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>_needs_hiding(&apos;pkg_resources&apos;)</highlight></codeline>
<codeline lineno="215"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>True</highlight></codeline>
<codeline lineno="216"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>_needs_hiding(&apos;setuptools_plugin&apos;)</highlight></codeline>
<codeline lineno="217"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>False</highlight></codeline>
<codeline lineno="218"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>_needs_hiding(&apos;setuptools.__init__&apos;)</highlight></codeline>
<codeline lineno="219"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>True</highlight></codeline>
<codeline lineno="220"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>_needs_hiding(&apos;distutils&apos;)</highlight></codeline>
<codeline lineno="221"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>True</highlight></codeline>
<codeline lineno="222"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>_needs_hiding(&apos;os&apos;)</highlight></codeline>
<codeline lineno="223"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>False</highlight></codeline>
<codeline lineno="224"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>_needs_hiding(&apos;Cython&apos;)</highlight></codeline>
<codeline lineno="225"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>True</highlight></codeline>
<codeline lineno="226"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/>base_module<sp/>=<sp/>mod_name.split(</highlight><highlight class="stringliteral">&apos;.&apos;</highlight><highlight class="normal">,<sp/>1)[0]</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>base_module<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>_MODULES_TO_HIDE</highlight></codeline>
<codeline lineno="229"><highlight class="normal"></highlight></codeline>
<codeline lineno="230"><highlight class="normal"></highlight></codeline>
<codeline lineno="231" refid="namespacesetuptools_1_1sandbox_1a579ab6c2031e94770efe338681e83bd7" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1sandbox_1a579ab6c2031e94770efe338681e83bd7" kindref="member">hide_setuptools</ref>():</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="233"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Remove<sp/>references<sp/>to<sp/>setuptools&apos;<sp/>modules<sp/>from<sp/>sys.modules<sp/>to<sp/>allow<sp/>the</highlight></codeline>
<codeline lineno="234"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>invocation<sp/>to<sp/>import<sp/>the<sp/>most<sp/>appropriate<sp/>setuptools.<sp/>This<sp/>technique<sp/>is</highlight></codeline>
<codeline lineno="235"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>necessary<sp/>to<sp/>avoid<sp/>issues<sp/>such<sp/>as<sp/>#315<sp/>where<sp/>setuptools<sp/>upgrading<sp/>itself</highlight></codeline>
<codeline lineno="236"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>would<sp/>fail<sp/>to<sp/>find<sp/>a<sp/>function<sp/>declared<sp/>in<sp/>the<sp/>metadata.</highlight></codeline>
<codeline lineno="237"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/>_distutils_hack<sp/>=<sp/>sys.modules.get(</highlight><highlight class="stringliteral">&apos;_distutils_hack&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>_distutils_hack<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespace__distutils__hack_1aeae986458f97ec3e8d59021d28be6958" kindref="member">_distutils_hack.remove_shim</ref>()</highlight></codeline>
<codeline lineno="241"><highlight class="normal"></highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/>modules<sp/>=<sp/>filter(_needs_hiding,<sp/>sys.modules)</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacesetuptools_1_1sandbox_1a643f2aae05bdb3af1a073416aa4436e4" kindref="member">_clear_modules</ref>(modules)</highlight></codeline>
<codeline lineno="244"><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight></codeline>
<codeline lineno="246" refid="namespacesetuptools_1_1sandbox_1a964522b9141f1d217f4c117aae1a409f" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1sandbox_1a964522b9141f1d217f4c117aae1a409f" kindref="member">run_setup</ref>(setup_script,<sp/>args):</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Run<sp/>a<sp/>distutils<sp/>setup<sp/>script,<sp/>sandboxed<sp/>in<sp/>its<sp/>directory&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/>setup_dir<sp/>=<sp/>os.path.abspath(os.path.dirname(setup_script))</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1sandbox_1a8e87463f0039530f6b3b039c58ec09da" kindref="member">setup_context</ref>(setup_dir):</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sys.argv[:]<sp/>=<sp/>[setup_script]<sp/>+<sp/>list(args)</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sys.path.insert(0,<sp/>setup_dir)</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>reset<sp/>to<sp/>include<sp/>setup<sp/>dir,<sp/>w/clean<sp/>callback<sp/>list</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>working_set.__init__()</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>working_set.callbacks.append(</highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>dist:<sp/>dist.activate())</highlight></codeline>
<codeline lineno="256"><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/><ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox" kindref="compound">DirectorySandbox</ref>(setup_dir):</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ns<sp/>=<sp/>dict(__file__=setup_script,<sp/>__name__=</highlight><highlight class="stringliteral">&apos;__main__&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacesetuptools_1_1sandbox_1a6d08b124d7fc3752504cea663fb8c233" kindref="member">_execfile</ref>(setup_script,<sp/>ns)</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>SystemExit<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>v:</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>v.args<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>v.args[0]:</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Normal<sp/>exit,<sp/>just<sp/>return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight></codeline>
<codeline lineno="265"><highlight class="normal"></highlight></codeline>
<codeline lineno="266" refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox" kindref="compound">AbstractSandbox</ref>:</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Wrap<sp/>&apos;os&apos;<sp/>module<sp/>and<sp/>&apos;open()&apos;<sp/>builtin<sp/>for<sp/>virtualizing<sp/>setup<sp/>scripts&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight></codeline>
<codeline lineno="269" refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ac3a181406de5531d1b8469079846e9d4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>_active<sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__init__(self):</highlight></codeline>
<codeline lineno="272" refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1af08adae9af4c82fbcf285bab2bd7e412" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1af08adae9af4c82fbcf285bab2bd7e412" kindref="member">_attrs</ref><sp/>=<sp/>[</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>dir(_os)</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>name.startswith(</highlight><highlight class="stringliteral">&apos;_&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>hasattr(self,<sp/>name)</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>]</highlight></codeline>
<codeline lineno="277"><highlight class="normal"></highlight></codeline>
<codeline lineno="278" refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1af4da8a59a0028203f552a2ce6054a2bc" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1af4da8a59a0028203f552a2ce6054a2bc" kindref="member">_copy</ref>(self,<sp/>source):</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1af08adae9af4c82fbcf285bab2bd7e412" kindref="member">_attrs</ref>:</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setattr(os,<sp/>name,<sp/>getattr(source,<sp/>name))</highlight></codeline>
<codeline lineno="281"><highlight class="normal"></highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__enter__(self):</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1af4da8a59a0028203f552a2ce6054a2bc" kindref="member">_copy</ref>(self)</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>_file:</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>builtins.file<sp/>=<sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ae6750304e87a747e89d951e86347ca78" kindref="member">_file</ref></highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>builtins.open<sp/>=<sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1af0de8eafa5257a30a2d4df3c8f9d1551" kindref="member">_open</ref></highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ac3a181406de5531d1b8469079846e9d4" kindref="member">_active</ref><sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="288"><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__exit__(self,<sp/>exc_type,<sp/>exc_value,<sp/>traceback):</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ac3a181406de5531d1b8469079846e9d4" kindref="member">_active</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>_file:</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>builtins.file<sp/>=<sp/>_file</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>builtins.open<sp/>=<sp/>_open</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1af4da8a59a0028203f552a2ce6054a2bc" kindref="member">_copy</ref>(_os)</highlight></codeline>
<codeline lineno="295"><highlight class="normal"></highlight></codeline>
<codeline lineno="296" refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a2b5ffd2afb462155ee7efea7758305b9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a2b5ffd2afb462155ee7efea7758305b9" kindref="member">run</ref>(self,<sp/>func):</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Run<sp/>&apos;func&apos;<sp/>under<sp/>os<sp/>sandboxing&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">with</highlight><highlight class="normal"><sp/>self:</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>func()</highlight></codeline>
<codeline lineno="300"><highlight class="normal"></highlight></codeline>
<codeline lineno="301" refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a3eb0a11ddeec950e33854f3e61230793" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a3eb0a11ddeec950e33854f3e61230793" kindref="member">_mk_dual_path_wrapper</ref>(name):</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>original<sp/>=<sp/>getattr(_os,<sp/>name)</highlight></codeline>
<codeline lineno="303"><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">wrap(self,<sp/>src,<sp/>dst,<sp/>*args,<sp/>**kw):</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ac3a181406de5531d1b8469079846e9d4" kindref="member">_active</ref>:</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>src,<sp/>dst<sp/>=<sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a0d8bf7201df71da2d9def02b75344396" kindref="member">_remap_pair</ref>(name,<sp/>src,<sp/>dst,<sp/>*args,<sp/>**kw)</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>original(src,<sp/>dst,<sp/>*args,<sp/>**kw)</highlight></codeline>
<codeline lineno="308"><highlight class="normal"></highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>wrap</highlight></codeline>
<codeline lineno="310"><highlight class="normal"></highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>[</highlight><highlight class="stringliteral">&quot;rename&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;link&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;symlink&quot;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>hasattr(_os,<sp/>name):</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>locals()[name]<sp/>=<sp/><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a3eb0a11ddeec950e33854f3e61230793" kindref="member">_mk_dual_path_wrapper</ref>(name)</highlight></codeline>
<codeline lineno="314"><highlight class="normal"></highlight></codeline>
<codeline lineno="315" refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a7bf77839bba80934a006c87fd91956ac" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a7bf77839bba80934a006c87fd91956ac" kindref="member">_mk_single_path_wrapper</ref>(name,<sp/>original=None):</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>original<sp/>=<sp/>original<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>getattr(_os,<sp/>name)</highlight></codeline>
<codeline lineno="317"><highlight class="normal"></highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">wrap(self,<sp/>path,<sp/>*args,<sp/>**kw):</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ac3a181406de5531d1b8469079846e9d4" kindref="member">_active</ref>:</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path<sp/>=<sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ac1e398a32fa84456a467d86937fdd1ac" kindref="member">_remap_input</ref>(name,<sp/>path,<sp/>*args,<sp/>**kw)</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>original(path,<sp/>*args,<sp/>**kw)</highlight></codeline>
<codeline lineno="322"><highlight class="normal"></highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>wrap</highlight></codeline>
<codeline lineno="324"><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>_file:</highlight></codeline>
<codeline lineno="326" refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ae6750304e87a747e89d951e86347ca78" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_file<sp/>=<sp/><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a7bf77839bba80934a006c87fd91956ac" kindref="member">_mk_single_path_wrapper</ref>(</highlight><highlight class="stringliteral">&apos;file&apos;</highlight><highlight class="normal">,<sp/>_file)</highlight></codeline>
<codeline lineno="327" refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1af0de8eafa5257a30a2d4df3c8f9d1551" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>_open<sp/>=<sp/><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a7bf77839bba80934a006c87fd91956ac" kindref="member">_mk_single_path_wrapper</ref>(</highlight><highlight class="stringliteral">&apos;open&apos;</highlight><highlight class="normal">,<sp/>_open)</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>[</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;stat&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;listdir&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;chdir&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;open&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;chmod&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;chown&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;mkdir&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;remove&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;unlink&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;rmdir&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;utime&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;lchown&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;chroot&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;lstat&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;startfile&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;mkfifo&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;mknod&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;pathconf&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;access&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/>]:</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>hasattr(_os,<sp/>name):</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>locals()[name]<sp/>=<sp/><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a7bf77839bba80934a006c87fd91956ac" kindref="member">_mk_single_path_wrapper</ref>(name)</highlight></codeline>
<codeline lineno="351"><highlight class="normal"></highlight></codeline>
<codeline lineno="352" refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1aaac94aedfc97617488bf08379c770ac2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1aaac94aedfc97617488bf08379c770ac2" kindref="member">_mk_single_with_return</ref>(name):</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>original<sp/>=<sp/>getattr(_os,<sp/>name)</highlight></codeline>
<codeline lineno="354"><highlight class="normal"></highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">wrap(self,<sp/>path,<sp/>*args,<sp/>**kw):</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ac3a181406de5531d1b8469079846e9d4" kindref="member">_active</ref>:</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path<sp/>=<sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ac1e398a32fa84456a467d86937fdd1ac" kindref="member">_remap_input</ref>(name,<sp/>path,<sp/>*args,<sp/>**kw)</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a07405764bf4fd6565b5e49b931c45e89" kindref="member">_remap_output</ref>(name,<sp/>original(path,<sp/>*args,<sp/>**kw))</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>original(path,<sp/>*args,<sp/>**kw)</highlight></codeline>
<codeline lineno="360"><highlight class="normal"></highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>wrap</highlight></codeline>
<codeline lineno="362"><highlight class="normal"></highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>[</highlight><highlight class="stringliteral">&apos;readlink&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;tempnam&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>hasattr(_os,<sp/>name):</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>locals()[name]<sp/>=<sp/><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1aaac94aedfc97617488bf08379c770ac2" kindref="member">_mk_single_with_return</ref>(name)</highlight></codeline>
<codeline lineno="366"><highlight class="normal"></highlight></codeline>
<codeline lineno="367" refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a6f9568f468da126000aa228cc18961e4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a6f9568f468da126000aa228cc18961e4" kindref="member">_mk_query</ref>(name):</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>original<sp/>=<sp/>getattr(_os,<sp/>name)</highlight></codeline>
<codeline lineno="369"><highlight class="normal"></highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">wrap(self,<sp/>*args,<sp/>**kw):</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retval<sp/>=<sp/>original(*args,<sp/>**kw)</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ac3a181406de5531d1b8469079846e9d4" kindref="member">_active</ref>:</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a07405764bf4fd6565b5e49b931c45e89" kindref="member">_remap_output</ref>(name,<sp/>retval)</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>retval</highlight></codeline>
<codeline lineno="375"><highlight class="normal"></highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>wrap</highlight></codeline>
<codeline lineno="377"><highlight class="normal"></highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>[</highlight><highlight class="stringliteral">&apos;getcwd&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;tmpnam&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>hasattr(_os,<sp/>name):</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>locals()[name]<sp/>=<sp/><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a6f9568f468da126000aa228cc18961e4" kindref="member">_mk_query</ref>(name)</highlight></codeline>
<codeline lineno="381"><highlight class="normal"></highlight></codeline>
<codeline lineno="382" refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a2f8c8a7f84e73a6db64eaae13f5024a1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a2f8c8a7f84e73a6db64eaae13f5024a1" kindref="member">_validate_path</ref>(self,<sp/>path):</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Called<sp/>to<sp/>remap<sp/>or<sp/>validate<sp/>any<sp/>path,<sp/>whether<sp/>input<sp/>or<sp/>output&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>path</highlight></codeline>
<codeline lineno="385"><highlight class="normal"></highlight></codeline>
<codeline lineno="386" refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ac1e398a32fa84456a467d86937fdd1ac" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ac1e398a32fa84456a467d86937fdd1ac" kindref="member">_remap_input</ref>(self,<sp/>operation,<sp/>path,<sp/>*args,<sp/>**kw):</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Called<sp/>for<sp/>path<sp/>inputs&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a2f8c8a7f84e73a6db64eaae13f5024a1" kindref="member">_validate_path</ref>(path)</highlight></codeline>
<codeline lineno="389"><highlight class="normal"></highlight></codeline>
<codeline lineno="390" refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a07405764bf4fd6565b5e49b931c45e89" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a07405764bf4fd6565b5e49b931c45e89" kindref="member">_remap_output</ref>(self,<sp/>operation,<sp/>path):</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Called<sp/>for<sp/>path<sp/>outputs&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a2f8c8a7f84e73a6db64eaae13f5024a1" kindref="member">_validate_path</ref>(path)</highlight></codeline>
<codeline lineno="393"><highlight class="normal"></highlight></codeline>
<codeline lineno="394" refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a0d8bf7201df71da2d9def02b75344396" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1a0d8bf7201df71da2d9def02b75344396" kindref="member">_remap_pair</ref>(self,<sp/>operation,<sp/>src,<sp/>dst,<sp/>*args,<sp/>**kw):</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Called<sp/>for<sp/>path<sp/>pairs<sp/>like<sp/>rename,<sp/>link,<sp/>and<sp/>symlink<sp/>operations&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ac1e398a32fa84456a467d86937fdd1ac" kindref="member">_remap_input</ref>(operation<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;-from&apos;</highlight><highlight class="normal">,<sp/>src,<sp/>*args,<sp/>**kw),</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ac1e398a32fa84456a467d86937fdd1ac" kindref="member">_remap_input</ref>(operation<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;-to&apos;</highlight><highlight class="normal">,<sp/>dst,<sp/>*args,<sp/>**kw),</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="400"><highlight class="normal"></highlight></codeline>
<codeline lineno="401"><highlight class="normal"></highlight></codeline>
<codeline lineno="402"><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>hasattr(os,<sp/></highlight><highlight class="stringliteral">&apos;devnull&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="403" refid="namespacesetuptools_1_1sandbox_1aa68adb36abe8accb61bfff7f33e49462" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>_EXCEPTIONS<sp/>=<sp/>[os.devnull]</highlight></codeline>
<codeline lineno="404"><highlight class="normal"></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/>_EXCEPTIONS<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="406"><highlight class="normal"></highlight></codeline>
<codeline lineno="407"><highlight class="normal"></highlight></codeline>
<codeline lineno="408" refid="classsetuptools_1_1sandbox_1_1_directory_sandbox" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox" kindref="compound">DirectorySandbox</ref>(<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox" kindref="compound">AbstractSandbox</ref>):</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Restrict<sp/>operations<sp/>to<sp/>a<sp/>single<sp/>subdirectory<sp/>-<sp/>pseudo-chroot&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="410"><highlight class="normal"></highlight></codeline>
<codeline lineno="411" refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1aff584c6cf57155616b5e0c03db1dd317" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>write_ops<sp/>=<sp/>dict.fromkeys(</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;open&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;chmod&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;chown&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;mkdir&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;remove&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;unlink&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;rmdir&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;utime&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;lchown&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;chroot&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;mkfifo&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;mknod&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;tempnam&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>]</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="428"><highlight class="normal"></highlight></codeline>
<codeline lineno="429" refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a1da06365c513a5524d6c8becda3a212d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>_exception_patterns<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;exempt<sp/>writing<sp/>to<sp/>paths<sp/>that<sp/>match<sp/>the<sp/>pattern&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="431"><highlight class="normal"></highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__init__(self,<sp/>sandbox,<sp/>exceptions=_EXCEPTIONS):</highlight></codeline>
<codeline lineno="433" refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a50fa6d4896785089868450e65c674273" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a50fa6d4896785089868450e65c674273" kindref="member">_sandbox</ref><sp/>=<sp/>os.path.normcase(os.path.realpath(sandbox))</highlight></codeline>
<codeline lineno="434" refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a3189362008bcaa3668b563ed66fd01ef" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a3189362008bcaa3668b563ed66fd01ef" kindref="member">_prefix</ref><sp/>=<sp/>os.path.join(self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a50fa6d4896785089868450e65c674273" kindref="member">_sandbox</ref>,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="435" refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a5476b744dc4ab60a40fca999d7632c3a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a5476b744dc4ab60a40fca999d7632c3a" kindref="member">_exceptions</ref><sp/>=<sp/>[</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.path.normcase(os.path.realpath(path))<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>path<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>exceptions</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>]</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>AbstractSandbox.__init__(self)</highlight></codeline>
<codeline lineno="439"><highlight class="normal"></highlight></codeline>
<codeline lineno="440" refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a8c89d3b8ec435167b115d5baa50e244f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a8c89d3b8ec435167b115d5baa50e244f" kindref="member">_violation</ref>(self,<sp/>operation,<sp/>*args,<sp/>**kw):</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1sandbox" kindref="compound">setuptools.sandbox</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>SandboxViolation</highlight></codeline>
<codeline lineno="442"><highlight class="normal"></highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classsetuptools_1_1sandbox_1_1_sandbox_violation" kindref="compound">SandboxViolation</ref>(operation,<sp/>args,<sp/>kw)</highlight></codeline>
<codeline lineno="444"><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>_file:</highlight></codeline>
<codeline lineno="446"><highlight class="normal"></highlight></codeline>
<codeline lineno="447" refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1acf799106ef73553cbfdf57cc16babd98" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ae6750304e87a747e89d951e86347ca78" kindref="member">_file</ref>(self,<sp/>path,<sp/>mode=&apos;r&apos;,<sp/>*args,<sp/>**kw):</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>mode<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>(</highlight><highlight class="stringliteral">&apos;r&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;rt&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;rb&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;rU&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;U&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1abfdcff9b89e73dd53456f61f8e4faffe" kindref="member">_ok</ref>(path):</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a8c89d3b8ec435167b115d5baa50e244f" kindref="member">_violation</ref>(</highlight><highlight class="stringliteral">&quot;file&quot;</highlight><highlight class="normal">,<sp/>path,<sp/>mode,<sp/>*args,<sp/>**kw)</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ae6750304e87a747e89d951e86347ca78" kindref="member">_file</ref>(path,<sp/>mode,<sp/>*args,<sp/>**kw)</highlight></codeline>
<codeline lineno="451"><highlight class="normal"></highlight></codeline>
<codeline lineno="452" refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1adde036059e5fcd0e0655278d744b99db" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1af0de8eafa5257a30a2d4df3c8f9d1551" kindref="member">_open</ref>(self,<sp/>path,<sp/>mode=&apos;r&apos;,<sp/>*args,<sp/>**kw):</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>mode<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>(</highlight><highlight class="stringliteral">&apos;r&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;rt&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;rb&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;rU&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;U&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1abfdcff9b89e73dd53456f61f8e4faffe" kindref="member">_ok</ref>(path):</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a8c89d3b8ec435167b115d5baa50e244f" kindref="member">_violation</ref>(</highlight><highlight class="stringliteral">&quot;open&quot;</highlight><highlight class="normal">,<sp/>path,<sp/>mode,<sp/>*args,<sp/>**kw)</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1af0de8eafa5257a30a2d4df3c8f9d1551" kindref="member">_open</ref>(path,<sp/>mode,<sp/>*args,<sp/>**kw)</highlight></codeline>
<codeline lineno="456"><highlight class="normal"></highlight></codeline>
<codeline lineno="457" refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a20c4a51f56c1ad1bc3ac634741f2f057" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a20c4a51f56c1ad1bc3ac634741f2f057" kindref="member">tmpnam</ref>(self):</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a8c89d3b8ec435167b115d5baa50e244f" kindref="member">_violation</ref>(</highlight><highlight class="stringliteral">&quot;tmpnam&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="459"><highlight class="normal"></highlight></codeline>
<codeline lineno="460" refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1abfdcff9b89e73dd53456f61f8e4faffe" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1abfdcff9b89e73dd53456f61f8e4faffe" kindref="member">_ok</ref>(self,<sp/>path):</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>active<sp/>=<sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ac3a181406de5531d1b8469079846e9d4" kindref="member">_active</ref></highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="463" refid="classsetuptools_1_1sandbox_1_1_directory_sandbox" refkind="compound"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ac3a181406de5531d1b8469079846e9d4" kindref="member">_active</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>realpath<sp/>=<sp/>os.path.normcase(os.path.realpath(path))</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1ac753002f21e3fc57946ade66171ed6e3" kindref="member">_exempted</ref>(realpath)</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>realpath<sp/>==<sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a50fa6d4896785089868450e65c674273" kindref="member">_sandbox</ref></highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>realpath.startswith(self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a3189362008bcaa3668b563ed66fd01ef" kindref="member">_prefix</ref>)</highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">finally</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_abstract_sandbox_1ac3a181406de5531d1b8469079846e9d4" kindref="member">_active</ref><sp/>=<sp/>active</highlight></codeline>
<codeline lineno="472"><highlight class="normal"></highlight></codeline>
<codeline lineno="473" refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1ac753002f21e3fc57946ade66171ed6e3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1ac753002f21e3fc57946ade66171ed6e3" kindref="member">_exempted</ref>(self,<sp/>filepath):</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>start_matches<sp/>=<sp/>(</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>filepath.startswith(exception)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>exception<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a5476b744dc4ab60a40fca999d7632c3a" kindref="member">_exceptions</ref></highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern_matches<sp/>=<sp/>(</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>re.match(pattern,<sp/>filepath)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>pattern<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a1da06365c513a5524d6c8becda3a212d" kindref="member">_exception_patterns</ref></highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>candidates<sp/>=<sp/>itertools.chain(start_matches,<sp/>pattern_matches)</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>any(candidates)</highlight></codeline>
<codeline lineno="482"><highlight class="normal"></highlight></codeline>
<codeline lineno="483" refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a048d782bf0fd34acedea0607481539e4" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a048d782bf0fd34acedea0607481539e4" kindref="member">_remap_input</ref>(self,<sp/>operation,<sp/>path,<sp/>*args,<sp/>**kw):</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Called<sp/>for<sp/>path<sp/>inputs&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>operation<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1aff584c6cf57155616b5e0c03db1dd317" kindref="member">write_ops</ref><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1abfdcff9b89e73dd53456f61f8e4faffe" kindref="member">_ok</ref>(path):</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a8c89d3b8ec435167b115d5baa50e244f" kindref="member">_violation</ref>(operation,<sp/>os.path.realpath(path),<sp/>*args,<sp/>**kw)</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>path</highlight></codeline>
<codeline lineno="488"><highlight class="normal"></highlight></codeline>
<codeline lineno="489" refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a91fcaa09107e9d234d702e0d83a0ead6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a91fcaa09107e9d234d702e0d83a0ead6" kindref="member">_remap_pair</ref>(self,<sp/>operation,<sp/>src,<sp/>dst,<sp/>*args,<sp/>**kw):</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Called<sp/>for<sp/>path<sp/>pairs<sp/>like<sp/>rename,<sp/>link,<sp/>and<sp/>symlink<sp/>operations&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1abfdcff9b89e73dd53456f61f8e4faffe" kindref="member">_ok</ref>(src)<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1abfdcff9b89e73dd53456f61f8e4faffe" kindref="member">_ok</ref>(dst):</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a8c89d3b8ec435167b115d5baa50e244f" kindref="member">_violation</ref>(operation,<sp/>src,<sp/>dst,<sp/>*args,<sp/>**kw)</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(src,<sp/>dst)</highlight></codeline>
<codeline lineno="494"><highlight class="normal"></highlight></codeline>
<codeline lineno="495" refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a511d2b442bd19a4a6315c686aa9b3a42" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a511d2b442bd19a4a6315c686aa9b3a42" kindref="member">open</ref>(self,<sp/>file,<sp/>flags,<sp/>mode=0o777,<sp/>*args,<sp/>**kw):</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Called<sp/>for<sp/>low-level<sp/>os.open()&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>flags<sp/>&amp;<sp/>WRITE_FLAGS<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1abfdcff9b89e73dd53456f61f8e4faffe" kindref="member">_ok</ref>(file):</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_directory_sandbox_1a8c89d3b8ec435167b115d5baa50e244f" kindref="member">_violation</ref>(</highlight><highlight class="stringliteral">&quot;os.open&quot;</highlight><highlight class="normal">,<sp/>file,<sp/>flags,<sp/>mode,<sp/>*args,<sp/>**kw)</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_os.open(file,<sp/>flags,<sp/>mode,<sp/>*args,<sp/>**kw)</highlight></codeline>
<codeline lineno="500"><highlight class="normal"></highlight></codeline>
<codeline lineno="501"><highlight class="normal"></highlight></codeline>
<codeline lineno="502" refid="namespacesetuptools_1_1sandbox_1ae2d3c0e479bb79bd56a7f884d5a5826b" refkind="member"><highlight class="normal">WRITE_FLAGS<sp/>=<sp/>functools.reduce(</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/>operator.or_,</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/>[</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>getattr(_os,<sp/>a,<sp/>0)</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>a<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;O_WRONLY<sp/>O_RDWR<sp/>O_APPEND<sp/>O_CREAT<sp/>O_TRUNC<sp/>O_TEMPORARY&quot;</highlight><highlight class="normal">.split()</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/>],</highlight></codeline>
<codeline lineno="508"><highlight class="normal">)</highlight></codeline>
<codeline lineno="509"><highlight class="normal"></highlight></codeline>
<codeline lineno="510"><highlight class="normal"></highlight></codeline>
<codeline lineno="511" refid="classsetuptools_1_1sandbox_1_1_sandbox_violation" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1sandbox_1_1_sandbox_violation" kindref="compound">SandboxViolation</ref>(DistutilsError):</highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;A<sp/>setup<sp/>script<sp/>attempted<sp/>to<sp/>modify<sp/>the<sp/>filesystem<sp/>outside<sp/>the<sp/>sandbox&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="513"><highlight class="normal"></highlight></codeline>
<codeline lineno="514" refid="classsetuptools_1_1sandbox_1_1_sandbox_violation_1a9ad18d8a93d06a6b96fca910177998d6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>tmpl<sp/>=<sp/>textwrap.dedent(</highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="516"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SandboxViolation:<sp/>{cmd}{args!r}<sp/>{kwargs}</highlight></codeline>
<codeline lineno="517"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="518"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>The<sp/>package<sp/>setup<sp/>script<sp/>has<sp/>attempted<sp/>to<sp/>modify<sp/>files<sp/>on<sp/>your<sp/>system</highlight></codeline>
<codeline lineno="519"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>that<sp/>are<sp/>not<sp/>within<sp/>the<sp/>EasyInstall<sp/>build<sp/>area,<sp/>and<sp/>has<sp/>been<sp/>aborted.</highlight></codeline>
<codeline lineno="520"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="521"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>package<sp/>cannot<sp/>be<sp/>safely<sp/>installed<sp/>by<sp/>EasyInstall,<sp/>and<sp/>may<sp/>not</highlight></codeline>
<codeline lineno="522"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>support<sp/>alternate<sp/>installation<sp/>locations<sp/>even<sp/>if<sp/>you<sp/>run<sp/>its<sp/>setup</highlight></codeline>
<codeline lineno="523"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>script<sp/>by<sp/>hand.<sp/><sp/>Please<sp/>inform<sp/>the<sp/>package&apos;s<sp/>author<sp/>and<sp/>the<sp/>EasyInstall</highlight></codeline>
<codeline lineno="524"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>maintainers<sp/>to<sp/>find<sp/>out<sp/>if<sp/>a<sp/>fix<sp/>or<sp/>workaround<sp/>is<sp/>available.</highlight></codeline>
<codeline lineno="525"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/>).lstrip()</highlight></codeline>
<codeline lineno="527"><highlight class="normal"></highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__str__(self):</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd,<sp/>args,<sp/>kwargs<sp/>=<sp/>self.args</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1sandbox_1_1_sandbox_violation_1a9ad18d8a93d06a6b96fca910177998d6" kindref="member">tmpl</ref>.format(**locals())</highlight></codeline>
    </programlisting>
    <location file="microservicio_data_stream/venv/Lib/site-packages/setuptools/sandbox.py"/>
  </compounddef>
</doxygen>
