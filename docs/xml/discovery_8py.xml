<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="es">
  <compounddef id="discovery_8py" kind="file" language="Python">
    <compoundname>discovery.py</compoundname>
    <innerclass refid="classsetuptools_1_1discovery_1_1___finder" prot="protected">setuptools::discovery::_Finder</innerclass>
    <innerclass refid="classsetuptools_1_1discovery_1_1_package_finder" prot="public">setuptools::discovery::PackageFinder</innerclass>
    <innerclass refid="classsetuptools_1_1discovery_1_1_p_e_p420_package_finder" prot="public">setuptools::discovery::PEP420PackageFinder</innerclass>
    <innerclass refid="classsetuptools_1_1discovery_1_1_module_finder" prot="public">setuptools::discovery::ModuleFinder</innerclass>
    <innerclass refid="classsetuptools_1_1discovery_1_1_flat_layout_package_finder" prot="public">setuptools::discovery::FlatLayoutPackageFinder</innerclass>
    <innerclass refid="classsetuptools_1_1discovery_1_1_flat_layout_module_finder" prot="public">setuptools::discovery::FlatLayoutModuleFinder</innerclass>
    <innerclass refid="classsetuptools_1_1discovery_1_1_config_discovery" prot="public">setuptools::discovery::ConfigDiscovery</innerclass>
    <innernamespace refid="namespacesetuptools">setuptools</innernamespace>
    <innernamespace refid="namespacesetuptools_1_1discovery">setuptools::discovery</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacesetuptools_1_1discovery" refkind="compound"><highlight class="stringliteral">&quot;&quot;&quot;Automatic<sp/>discovery<sp/>of<sp/>Python<sp/>modules<sp/>and<sp/>packages<sp/>(for<sp/>inclusion<sp/>in<sp/>the</highlight></codeline>
<codeline lineno="2"><highlight class="stringliteral">distribution)<sp/>and<sp/>other<sp/>config<sp/>values.</highlight></codeline>
<codeline lineno="3"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="4"><highlight class="stringliteral">For<sp/>the<sp/>purposes<sp/>of<sp/>this<sp/>module,<sp/>the<sp/>following<sp/>nomenclature<sp/>is<sp/>used:</highlight></codeline>
<codeline lineno="5"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="6"><highlight class="stringliteral">-<sp/>&quot;src-layout&quot;:<sp/>a<sp/>directory<sp/>representing<sp/>a<sp/>Python<sp/>project<sp/>that<sp/>contains<sp/>a<sp/>&quot;src&quot;</highlight></codeline>
<codeline lineno="7"><highlight class="stringliteral"><sp/><sp/>folder.<sp/>Everything<sp/>under<sp/>the<sp/>&quot;src&quot;<sp/>folder<sp/>is<sp/>meant<sp/>to<sp/>be<sp/>included<sp/>in<sp/>the</highlight></codeline>
<codeline lineno="8"><highlight class="stringliteral"><sp/><sp/>distribution<sp/>when<sp/>packaging<sp/>the<sp/>project.<sp/>Example::</highlight></codeline>
<codeline lineno="9"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="10"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>.</highlight></codeline>
<codeline lineno="11"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>├──<sp/>tox.ini</highlight></codeline>
<codeline lineno="12"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>├──<sp/>pyproject.toml</highlight></codeline>
<codeline lineno="13"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>└──<sp/>src/</highlight></codeline>
<codeline lineno="14"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>└──<sp/>mypkg/</highlight></codeline>
<codeline lineno="15"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>├──<sp/>__init__.py</highlight></codeline>
<codeline lineno="16"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>├──<sp/>mymodule.py</highlight></codeline>
<codeline lineno="17"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>└──<sp/>my_data_file.txt</highlight></codeline>
<codeline lineno="18"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="19"><highlight class="stringliteral">-<sp/>&quot;flat-layout&quot;:<sp/>a<sp/>Python<sp/>project<sp/>that<sp/>does<sp/>not<sp/>use<sp/>&quot;src-layout&quot;<sp/>but<sp/>instead</highlight></codeline>
<codeline lineno="20"><highlight class="stringliteral"><sp/><sp/>have<sp/>a<sp/>directory<sp/>under<sp/>the<sp/>project<sp/>root<sp/>for<sp/>each<sp/>package::</highlight></codeline>
<codeline lineno="21"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="22"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>.</highlight></codeline>
<codeline lineno="23"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>├──<sp/>tox.ini</highlight></codeline>
<codeline lineno="24"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>├──<sp/>pyproject.toml</highlight></codeline>
<codeline lineno="25"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>└──<sp/>mypkg/</highlight></codeline>
<codeline lineno="26"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>├──<sp/>__init__.py</highlight></codeline>
<codeline lineno="27"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>├──<sp/>mymodule.py</highlight></codeline>
<codeline lineno="28"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>└──<sp/>my_data_file.txt</highlight></codeline>
<codeline lineno="29"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="30"><highlight class="stringliteral">-<sp/>&quot;single-module&quot;:<sp/>a<sp/>project<sp/>that<sp/>contains<sp/>a<sp/>single<sp/>Python<sp/>script<sp/>direct<sp/>under</highlight></codeline>
<codeline lineno="31"><highlight class="stringliteral"><sp/><sp/>the<sp/>project<sp/>root<sp/>(no<sp/>directory<sp/>used)::</highlight></codeline>
<codeline lineno="32"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="33"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>.</highlight></codeline>
<codeline lineno="34"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>├──<sp/>tox.ini</highlight></codeline>
<codeline lineno="35"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>├──<sp/>pyproject.toml</highlight></codeline>
<codeline lineno="36"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>└──<sp/>mymodule.py</highlight></codeline>
<codeline lineno="37"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="38"><highlight class="stringliteral">&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>itertools</highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>os</highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>fnmatch<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>fnmatchcase</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>glob<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>glob</highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>pathlib<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Path</highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>typing<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/>TYPE_CHECKING,</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/>Callable,</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/>Dict,</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/>Iterable,</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/>Iterator,</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/>List,</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/>Mapping,</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/>Optional,</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/>Tuple,</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/>Union</highlight></codeline>
<codeline lineno="56"><highlight class="normal">)</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/><ref refid="namespace__distutils__hack_1_1override" kindref="compound">_distutils_hack.override</ref><sp/><sp/></highlight><highlight class="comment">#<sp/>noqa:<sp/>F401</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>distutils<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>log</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>distutils.util<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>convert_path</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="63" refid="namespacesetuptools_1_1discovery_1a92aada6a95defc0b8dd7e821f1e5c526" refkind="member"><highlight class="normal">_Path<sp/>=<sp/>Union[str,<sp/>os.PathLike]</highlight></codeline>
<codeline lineno="64" refid="namespacesetuptools_1_1discovery_1a327c211419cd988571abaaae143d5ddf" refkind="member"><highlight class="normal">_Filter<sp/>=<sp/>Callable[[str],<sp/>bool]</highlight></codeline>
<codeline lineno="65" refid="namespacesetuptools_1_1discovery_1ae67c422b67fd0d775f3f0a24143a3c25" refkind="member"><highlight class="normal">StrIter<sp/>=<sp/>Iterator[str]</highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight></codeline>
<codeline lineno="67" refid="namespacesetuptools_1_1discovery_1a8ce1f228a832d9afef9405c06c1f43f3" refkind="member"><highlight class="normal">chain_iter<sp/>=<sp/>itertools.chain.from_iterable</highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>TYPE_CHECKING:</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>setuptools<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Distribution<sp/><sp/></highlight><highlight class="comment">#<sp/>noqa</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight></codeline>
<codeline lineno="73" refid="namespacesetuptools_1_1discovery_1aa9dde2cf41a3b808839e54f19b4f9683" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1discovery_1aa9dde2cf41a3b808839e54f19b4f9683" kindref="member">_valid_name</ref>(path:<sp/>_Path)<sp/>-&gt;<sp/>bool:</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Ignore<sp/>invalid<sp/>names<sp/>that<sp/>cannot<sp/>be<sp/>imported<sp/>directly</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>os.path.basename(path).isidentifier()</highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="78" refid="classsetuptools_1_1discovery_1_1___finder" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1___finder" kindref="compound">_Finder</ref>:</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Base<sp/>class<sp/>that<sp/>exposes<sp/>functionality<sp/>for<sp/>module/package<sp/>finders&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="81" refid="classsetuptools_1_1discovery_1_1___finder_1a05a7fafc1a52aee181f297d7ee179043" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>ALWAYS_EXCLUDE:<sp/>Tuple[str,<sp/>...]<sp/>=<sp/>()</highlight></codeline>
<codeline lineno="82" refid="classsetuptools_1_1discovery_1_1___finder_1a7d851175b924b489911b0697866d804d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>DEFAULT_EXCLUDE:<sp/>Tuple[str,<sp/>...]<sp/>=<sp/>()</highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@classmethod</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85" refid="classsetuptools_1_1discovery_1_1___finder_1accbb7b62e3da27ff52f50e8f1db9c84f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1___finder_1accbb7b62e3da27ff52f50e8f1db9c84f" kindref="member">find</ref>(</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cls,</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>where:<sp/>_Path<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>exclude:<sp/>Iterable[str]<sp/>=<sp/>(),</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>include:<sp/>Iterable[str]<sp/>=<sp/>(</highlight><highlight class="stringliteral">&apos;*&apos;</highlight><highlight class="normal">,)</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/>)<sp/>-&gt;<sp/>List[str]:</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Return<sp/>a<sp/>list<sp/>of<sp/>all<sp/>Python<sp/>items<sp/>(packages<sp/>or<sp/>modules,<sp/>depending<sp/>on</highlight></codeline>
<codeline lineno="92"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>finder<sp/>implementation)<sp/>found<sp/>within<sp/>directory<sp/>&apos;where&apos;.</highlight></codeline>
<codeline lineno="93"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="94"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;where&apos;<sp/>is<sp/>the<sp/>root<sp/>directory<sp/>which<sp/>will<sp/>be<sp/>searched.</highlight></codeline>
<codeline lineno="95"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>It<sp/>should<sp/>be<sp/>supplied<sp/>as<sp/>a<sp/>&quot;cross-platform&quot;<sp/>(i.e.<sp/>URL-style)<sp/>path;</highlight></codeline>
<codeline lineno="96"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>it<sp/>will<sp/>be<sp/>converted<sp/>to<sp/>the<sp/>appropriate<sp/>local<sp/>path<sp/>syntax.</highlight></codeline>
<codeline lineno="97"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="98"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;exclude&apos;<sp/>is<sp/>a<sp/>sequence<sp/>of<sp/>names<sp/>to<sp/>exclude;<sp/>&apos;*&apos;<sp/>can<sp/>be<sp/>used</highlight></codeline>
<codeline lineno="99"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>as<sp/>a<sp/>wildcard<sp/>in<sp/>the<sp/>names.</highlight></codeline>
<codeline lineno="100"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>When<sp/>finding<sp/>packages,<sp/>&apos;foo.*&apos;<sp/>will<sp/>exclude<sp/>all<sp/>subpackages<sp/>of<sp/>&apos;foo&apos;</highlight></codeline>
<codeline lineno="101"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(but<sp/>not<sp/>&apos;foo&apos;<sp/>itself).</highlight></codeline>
<codeline lineno="102"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="103"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;include&apos;<sp/>is<sp/>a<sp/>sequence<sp/>of<sp/>names<sp/>to<sp/>include.</highlight></codeline>
<codeline lineno="104"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>it&apos;s<sp/>specified,<sp/>only<sp/>the<sp/>named<sp/>items<sp/>will<sp/>be<sp/>included.</highlight></codeline>
<codeline lineno="105"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>it&apos;s<sp/>not<sp/>specified,<sp/>all<sp/>found<sp/>items<sp/>will<sp/>be<sp/>included.</highlight></codeline>
<codeline lineno="106"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;include&apos;<sp/>can<sp/>contain<sp/>shell<sp/>style<sp/>wildcard<sp/>patterns<sp/>just<sp/>like</highlight></codeline>
<codeline lineno="107"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;exclude&apos;.</highlight></codeline>
<codeline lineno="108"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>exclude<sp/>=<sp/>exclude<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>cls.<ref refid="classsetuptools_1_1discovery_1_1___finder_1a7d851175b924b489911b0697866d804d" kindref="member">DEFAULT_EXCLUDE</ref></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>list(</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cls.<ref refid="classsetuptools_1_1discovery_1_1___finder_1ad9b3f16e871a214f51147e6c8abb7a7b" kindref="member">_find_iter</ref>(</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacesetuptools_1a88d3013aac4d5258c5379d90a4fac663" kindref="member">convert_path</ref>(str(where)),</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cls.<ref refid="classsetuptools_1_1discovery_1_1___finder_1a3a357c101fd2e561d3eb4c66ab755e43" kindref="member">_build_filter</ref>(*cls.<ref refid="classsetuptools_1_1discovery_1_1___finder_1a05a7fafc1a52aee181f297d7ee179043" kindref="member">ALWAYS_EXCLUDE</ref>,<sp/>*exclude),</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cls.<ref refid="classsetuptools_1_1discovery_1_1___finder_1a3a357c101fd2e561d3eb4c66ab755e43" kindref="member">_build_filter</ref>(*include),</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@classmethod</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="120" refid="classsetuptools_1_1discovery_1_1___finder_1ad9b3f16e871a214f51147e6c8abb7a7b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1___finder_1ad9b3f16e871a214f51147e6c8abb7a7b" kindref="member">_find_iter</ref>(cls,<sp/>where:<sp/>_Path,<sp/>exclude:<sp/>_Filter,<sp/>include:<sp/>_Filter)<sp/>-&gt;<sp/>StrIter:</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>NotImplementedError</highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@staticmethod</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="124" refid="classsetuptools_1_1discovery_1_1___finder_1a3a357c101fd2e561d3eb4c66ab755e43" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1___finder_1a3a357c101fd2e561d3eb4c66ab755e43" kindref="member">_build_filter</ref>(*patterns:<sp/>str)<sp/>-&gt;<sp/>_Filter:</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="126"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Given<sp/>a<sp/>list<sp/>of<sp/>patterns,<sp/>return<sp/>a<sp/>callable<sp/>that<sp/>will<sp/>be<sp/>true<sp/>only<sp/>if</highlight></codeline>
<codeline lineno="127"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>input<sp/>matches<sp/>at<sp/>least<sp/>one<sp/>of<sp/>the<sp/>patterns.</highlight></codeline>
<codeline lineno="128"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>name:<sp/>any(fnmatchcase(name,<sp/>pat)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>pat<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>patterns)</highlight></codeline>
<codeline lineno="130"><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132" refid="classsetuptools_1_1discovery_1_1_package_finder" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_package_finder" kindref="compound">PackageFinder</ref>(<ref refid="classsetuptools_1_1discovery_1_1___finder" kindref="compound">_Finder</ref>):</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="134"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Generate<sp/>a<sp/>list<sp/>of<sp/>all<sp/>Python<sp/>packages<sp/>found<sp/>within<sp/>a<sp/>directory</highlight></codeline>
<codeline lineno="135"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"></highlight></codeline>
<codeline lineno="137" refid="classsetuptools_1_1discovery_1_1_package_finder" refkind="compound"><highlight class="normal"><sp/><sp/><sp/><sp/>ALWAYS_EXCLUDE<sp/>=<sp/>(</highlight><highlight class="stringliteral">&quot;ez_setup&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;*__pycache__&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@classmethod</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="140" refid="classsetuptools_1_1discovery_1_1_package_finder_1a7b7005f6eac4d034e29c4559598ab8d7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_package_finder_1a7b7005f6eac4d034e29c4559598ab8d7" kindref="member">_find_iter</ref>(cls,<sp/>where:<sp/>_Path,<sp/>exclude:<sp/>_Filter,<sp/>include:<sp/>_Filter)<sp/>-&gt;<sp/>StrIter:</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="142"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>All<sp/>the<sp/>packages<sp/>found<sp/>in<sp/>&apos;where&apos;<sp/>that<sp/>pass<sp/>the<sp/>&apos;include&apos;<sp/>filter,<sp/>but</highlight></codeline>
<codeline lineno="143"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>not<sp/>the<sp/>&apos;exclude&apos;<sp/>filter.</highlight></codeline>
<codeline lineno="144"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>root,<sp/>dirs,<sp/>files<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>os.walk(str(where),<sp/>followlinks=</highlight><highlight class="keyword">True</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Copy<sp/>dirs<sp/>to<sp/>iterate<sp/>over<sp/>it,<sp/>then<sp/>empty<sp/>dirs.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>all_dirs<sp/>=<sp/>dirs[:]</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dirs[:]<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="149"><highlight class="normal"></highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>dir<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>all_dirs:</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>full_path<sp/>=<sp/>os.path.join(root,<sp/>dir)</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rel_path<sp/>=<sp/>os.path.relpath(full_path,<sp/>where)</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>package<sp/>=<sp/>rel_path.replace(os.path.sep,<sp/></highlight><highlight class="stringliteral">&apos;.&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Skip<sp/>directory<sp/>trees<sp/>that<sp/>are<sp/>not<sp/>valid<sp/>packages</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;.&apos;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>dir<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>cls.<ref refid="classsetuptools_1_1discovery_1_1_package_finder_1a605893a277bc4fa129b5396aeca88108" kindref="member">_looks_like_package</ref>(full_path,<sp/>package):</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Should<sp/>this<sp/>package<sp/>be<sp/>included?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>include(package)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>exclude(package):</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">yield</highlight><highlight class="normal"><sp/>package</highlight></codeline>
<codeline lineno="162"><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Keep<sp/>searching<sp/>subdirectories,<sp/>as<sp/>there<sp/>may<sp/>be<sp/>more<sp/>packages</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>down<sp/>there,<sp/>even<sp/>if<sp/>the<sp/>parent<sp/>was<sp/>excluded.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dirs.append(dir)</highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@staticmethod</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="168" refid="classsetuptools_1_1discovery_1_1_package_finder_1a605893a277bc4fa129b5396aeca88108" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_package_finder_1a605893a277bc4fa129b5396aeca88108" kindref="member">_looks_like_package</ref>(path:<sp/>_Path,<sp/>_package_name:<sp/>str)<sp/>-&gt;<sp/>bool:</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Does<sp/>a<sp/>directory<sp/>look<sp/>like<sp/>a<sp/>package?&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>os.path.isfile(os.path.join(path,<sp/></highlight><highlight class="stringliteral">&apos;__init__.py&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"></highlight></codeline>
<codeline lineno="173" refid="classsetuptools_1_1discovery_1_1_p_e_p420_package_finder" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_p_e_p420_package_finder" kindref="compound">PEP420PackageFinder</ref>(<ref refid="classsetuptools_1_1discovery_1_1_package_finder" kindref="compound">PackageFinder</ref>):</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@staticmethod</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="175" refid="classsetuptools_1_1discovery_1_1_p_e_p420_package_finder_1ad9e1c0594eb9754def87d69d9c9ad859" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_p_e_p420_package_finder_1ad9e1c0594eb9754def87d69d9c9ad859" kindref="member">_looks_like_package</ref>(_path:<sp/>_Path,<sp/>_package_name:<sp/>str)<sp/>-&gt;<sp/>bool:</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight></codeline>
<codeline lineno="179" refid="classsetuptools_1_1discovery_1_1_module_finder" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_module_finder" kindref="compound">ModuleFinder</ref>(<ref refid="classsetuptools_1_1discovery_1_1___finder" kindref="compound">_Finder</ref>):</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Find<sp/>isolated<sp/>Python<sp/>modules.</highlight></codeline>
<codeline lineno="181"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>This<sp/>function<sp/>will<sp/>**not**<sp/>recurse<sp/>subdirectories.</highlight></codeline>
<codeline lineno="182"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@classmethod</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="185" refid="classsetuptools_1_1discovery_1_1_module_finder_1aa399f5ad9d34a8a66a9980dbddd3c4c9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_module_finder_1aa399f5ad9d34a8a66a9980dbddd3c4c9" kindref="member">_find_iter</ref>(cls,<sp/>where:<sp/>_Path,<sp/>exclude:<sp/>_Filter,<sp/>include:<sp/>_Filter)<sp/>-&gt;<sp/>StrIter:</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>file<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>glob(os.path.join(where,<sp/></highlight><highlight class="stringliteral">&quot;*.py&quot;</highlight><highlight class="normal">)):</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>module,<sp/>_ext<sp/>=<sp/>os.path.splitext(os.path.basename(file))</highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>cls.<ref refid="classsetuptools_1_1discovery_1_1_module_finder_1ace6f417ddfe2ed3781f651410f2b1e60" kindref="member">_looks_like_module</ref>(module):</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>include(module)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>exclude(module):</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">yield</highlight><highlight class="normal"><sp/>module</highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight></codeline>
<codeline lineno="195" refid="classsetuptools_1_1discovery_1_1_module_finder_1ace6f417ddfe2ed3781f651410f2b1e60" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>_looks_like_module<sp/>=<sp/>staticmethod(_valid_name)</highlight></codeline>
<codeline lineno="196"><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"></highlight><highlight class="comment">#<sp/>We<sp/>have<sp/>to<sp/>be<sp/>extra<sp/>careful<sp/>in<sp/>the<sp/>case<sp/>of<sp/>flat<sp/>layout<sp/>to<sp/>not<sp/>include<sp/>files</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight><highlight class="comment">#<sp/>and<sp/>directories<sp/>not<sp/>meant<sp/>for<sp/>distribution<sp/>(e.g.<sp/>tool-related)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight></codeline>
<codeline lineno="202" refid="classsetuptools_1_1discovery_1_1_flat_layout_package_finder" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_flat_layout_package_finder" kindref="compound">FlatLayoutPackageFinder</ref>(<ref refid="classsetuptools_1_1discovery_1_1_p_e_p420_package_finder" kindref="compound">PEP420PackageFinder</ref>):</highlight></codeline>
<codeline lineno="203" refid="classsetuptools_1_1discovery_1_1_flat_layout_package_finder_1a877a76eb240e9cd3f0918601265c789f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>_EXCLUDE<sp/>=<sp/>(</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;ci&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;bin&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;doc&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;docs&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;documentation&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;manpages&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;news&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;changelog&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;test&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;tests&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;unit_test&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;unit_tests&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;example&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;examples&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;scripts&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;tools&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;util&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;utils&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;python&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;build&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;dist&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;venv&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;env&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;requirements&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>----<sp/>Task<sp/>runners<sp/>/<sp/>Build<sp/>tools<sp/>----</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;tasks&quot;</highlight><highlight class="normal">,<sp/><sp/></highlight><highlight class="comment">#<sp/>invoke</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;fabfile&quot;</highlight><highlight class="normal">,<sp/><sp/></highlight><highlight class="comment">#<sp/>fabric</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;site_scons&quot;</highlight><highlight class="normal">,<sp/><sp/></highlight><highlight class="comment">#<sp/>SCons</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>----<sp/>Other<sp/>tools<sp/>----</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;benchmark&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;benchmarks&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;exercise&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;exercises&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>----<sp/>Hidden<sp/>directories/Private<sp/>packages<sp/>----</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;[._]*&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="241" refid="classsetuptools_1_1discovery_1_1_flat_layout_package_finder" refkind="compound"><highlight class="normal"><sp/><sp/><sp/><sp/>DEFAULT_EXCLUDE<sp/>=<sp/>tuple(<ref refid="namespacesetuptools_1_1discovery_1a8ce1f228a832d9afef9405c06c1f43f3" kindref="member">chain_iter</ref>((p,<sp/>f</highlight><highlight class="stringliteral">&quot;{p}.*&quot;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>p<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>_EXCLUDE))</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Reserved<sp/>package<sp/>names&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="243"><highlight class="normal"></highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@staticmethod</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="245" refid="classsetuptools_1_1discovery_1_1_flat_layout_package_finder_1a22fbc40de43e8b59037a563173348b19" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_flat_layout_package_finder_1a22fbc40de43e8b59037a563173348b19" kindref="member">_looks_like_package</ref>(_path:<sp/>_Path,<sp/>package_name:<sp/>str)<sp/>-&gt;<sp/>bool:</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>names<sp/>=<sp/>package_name.split(</highlight><highlight class="stringliteral">&apos;.&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Consider<sp/>PEP<sp/>561</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>root_pkg_is_valid<sp/>=<sp/>names[0].isidentifier()<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>names[0].endswith(</highlight><highlight class="stringliteral">&quot;-stubs&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>root_pkg_is_valid<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>all(name.isidentifier()<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>names[1:])</highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight></codeline>
<codeline lineno="251"><highlight class="normal"></highlight></codeline>
<codeline lineno="252" refid="classsetuptools_1_1discovery_1_1_flat_layout_module_finder" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_flat_layout_module_finder" kindref="compound">FlatLayoutModuleFinder</ref>(<ref refid="classsetuptools_1_1discovery_1_1_module_finder" kindref="compound">ModuleFinder</ref>):</highlight></codeline>
<codeline lineno="253" refid="classsetuptools_1_1discovery_1_1_flat_layout_module_finder" refkind="compound"><highlight class="normal"><sp/><sp/><sp/><sp/>DEFAULT_EXCLUDE<sp/>=<sp/>(</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;setup&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;conftest&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;test&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;tests&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;example&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;examples&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;build&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>----<sp/>Task<sp/>runners<sp/>----</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;toxfile&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;noxfile&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;pavement&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;dodo&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;tasks&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;fabfile&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>----<sp/>Other<sp/>tools<sp/>----</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;[Ss][Cc]onstruct&quot;</highlight><highlight class="normal">,<sp/><sp/></highlight><highlight class="comment">#<sp/>SCons</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;conanfile&quot;</highlight><highlight class="normal">,<sp/><sp/></highlight><highlight class="comment">#<sp/>Connan:<sp/>C/C++<sp/>build<sp/>tool</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;manage&quot;</highlight><highlight class="normal">,<sp/><sp/></highlight><highlight class="comment">#<sp/>Django</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;benchmark&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;benchmarks&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;exercise&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;exercises&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>----<sp/>Hidden<sp/>files/Private<sp/>modules<sp/>----</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;[._]*&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Reserved<sp/>top-level<sp/>module<sp/>names&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"></highlight></codeline>
<codeline lineno="281"><highlight class="normal"></highlight></codeline>
<codeline lineno="282" refid="namespacesetuptools_1_1discovery_1a0a750a2b895076785e978aaee27bec04" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1discovery_1a0a750a2b895076785e978aaee27bec04" kindref="member">_find_packages_within</ref>(root_pkg:<sp/>str,<sp/>pkg_dir:<sp/>_Path)<sp/>-&gt;<sp/>List[str]:</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/>nested<sp/>=<sp/>PEP420PackageFinder.find(pkg_dir)</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[root_pkg]<sp/>+<sp/>[</highlight><highlight class="stringliteral">&quot;.&quot;</highlight><highlight class="normal">.join((root_pkg,<sp/>n))<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>n<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>nested]</highlight></codeline>
<codeline lineno="285"><highlight class="normal"></highlight></codeline>
<codeline lineno="286"><highlight class="normal"></highlight></codeline>
<codeline lineno="287" refid="classsetuptools_1_1discovery_1_1_config_discovery" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_config_discovery" kindref="compound">ConfigDiscovery</ref>:</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Fill-in<sp/>metadata<sp/>and<sp/>options<sp/>that<sp/>can<sp/>be<sp/>automatically<sp/>derived</highlight></codeline>
<codeline lineno="289"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>(from<sp/>other<sp/>metadata/options,<sp/>the<sp/>file<sp/>system<sp/>or<sp/>conventions)</highlight></codeline>
<codeline lineno="290"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="291"><highlight class="normal"></highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__init__(self,<sp/>distribution:<sp/></highlight><highlight class="stringliteral">&quot;Distribution&quot;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="293" refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref><sp/>=<sp/>distribution</highlight></codeline>
<codeline lineno="294" refid="classsetuptools_1_1discovery_1_1_config_discovery_1aa7b24f4b1ca3bee9e196e4faccf4beda" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1aa7b24f4b1ca3bee9e196e4faccf4beda" kindref="member">_called</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="295" refid="classsetuptools_1_1discovery_1_1_config_discovery_1a84978c1ab8be6be3dfcdedefff3cd64a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a84978c1ab8be6be3dfcdedefff3cd64a" kindref="member">_disabled</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="296" refid="classsetuptools_1_1discovery_1_1_config_discovery_1ac483bc24f53c303c5db54deef27b6079" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1ac483bc24f53c303c5db54deef27b6079" kindref="member">_skip_ext_modules</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"></highlight></codeline>
<codeline lineno="298" refid="classsetuptools_1_1discovery_1_1_config_discovery_1a0858862c0e387d5f08d6bcd096ffb5b6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a0858862c0e387d5f08d6bcd096ffb5b6" kindref="member">_disable</ref>(self):</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Internal<sp/>API<sp/>to<sp/>disable<sp/>automatic<sp/>discovery&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a84978c1ab8be6be3dfcdedefff3cd64a" kindref="member">_disabled</ref><sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="301"><highlight class="normal"></highlight></codeline>
<codeline lineno="302" refid="classsetuptools_1_1discovery_1_1_config_discovery_1a3bbae3b934e779c8f097f9fc58e3efb7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a3bbae3b934e779c8f097f9fc58e3efb7" kindref="member">_ignore_ext_modules</ref>(self):</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Internal<sp/>API<sp/>to<sp/>disregard<sp/>ext_modules.</highlight></codeline>
<codeline lineno="304"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="305"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Normally<sp/>auto-discovery<sp/>would<sp/>not<sp/>be<sp/>triggered<sp/>if<sp/>``ext_modules``<sp/>are<sp/>set</highlight></codeline>
<codeline lineno="306"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(this<sp/>is<sp/>done<sp/>for<sp/>backward<sp/>compatibility<sp/>with<sp/>existing<sp/>packages<sp/>relying<sp/>on</highlight></codeline>
<codeline lineno="307"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>``setup.py``<sp/>or<sp/>``setup.cfg``).<sp/>However,<sp/>``setuptools``<sp/>can<sp/>call<sp/>this<sp/>function</highlight></codeline>
<codeline lineno="308"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>to<sp/>ignore<sp/>given<sp/>``ext_modules``<sp/>and<sp/>proceed<sp/>with<sp/>the<sp/>auto-discovery<sp/>if</highlight></codeline>
<codeline lineno="309"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>``packages``<sp/>and<sp/>``py_modules``<sp/>are<sp/>not<sp/>given<sp/>(e.g.<sp/>when<sp/>using<sp/>pyproject.toml</highlight></codeline>
<codeline lineno="310"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>metadata).</highlight></codeline>
<codeline lineno="311"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1ac483bc24f53c303c5db54deef27b6079" kindref="member">_skip_ext_modules</ref><sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="313"><highlight class="normal"></highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@property</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="315" refid="classsetuptools_1_1discovery_1_1_config_discovery_1a4e8030d0499e80f74c24d8a2d62bb554" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a4e8030d0499e80f74c24d8a2d62bb554" kindref="member">_root_dir</ref>(self)<sp/>-&gt;<sp/>_Path:</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>The<sp/>best<sp/>is<sp/>to<sp/>wait<sp/>until<sp/>`src_root`<sp/>is<sp/>set<sp/>in<sp/>dist,<sp/>before<sp/>using<sp/>_root_dir.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.src_root<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>os.curdir</highlight></codeline>
<codeline lineno="318"><highlight class="normal"></highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@property</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="320" refid="classsetuptools_1_1discovery_1_1_config_discovery_1a293442efa6cdc81132385c5d42e4c22e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a293442efa6cdc81132385c5d42e4c22e" kindref="member">_package_dir</ref>(self)<sp/>-&gt;<sp/>Dict[str,<sp/>str]:</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.package_dir<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>{}</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.package_dir</highlight></codeline>
<codeline lineno="324"><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__call__(self,<sp/>force=False,<sp/>name=True,<sp/>ignore_ext_modules=False):</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Automatically<sp/>discover<sp/>missing<sp/>configuration<sp/>fields</highlight></codeline>
<codeline lineno="327"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>modifies<sp/>the<sp/>given<sp/>``distribution``<sp/>object<sp/>in-place.</highlight></codeline>
<codeline lineno="328"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="329"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Note<sp/>that<sp/>by<sp/>default<sp/>this<sp/>will<sp/>only<sp/>have<sp/>an<sp/>effect<sp/>the<sp/>first<sp/>time<sp/>the</highlight></codeline>
<codeline lineno="330"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>``ConfigDiscovery``<sp/>object<sp/>is<sp/>called.</highlight></codeline>
<codeline lineno="331"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="332"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>To<sp/>repeatedly<sp/>invoke<sp/>automatic<sp/>discovery<sp/>(e.g.<sp/>when<sp/>the<sp/>project</highlight></codeline>
<codeline lineno="333"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>directory<sp/>changes),<sp/>please<sp/>use<sp/>``force=True``<sp/>(or<sp/>create<sp/>a<sp/>new</highlight></codeline>
<codeline lineno="334"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>``ConfigDiscovery``<sp/>instance).</highlight></codeline>
<codeline lineno="335"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>force<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>(self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1aa7b24f4b1ca3bee9e196e4faccf4beda" kindref="member">_called</ref><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a84978c1ab8be6be3dfcdedefff3cd64a" kindref="member">_disabled</ref>):</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Avoid<sp/>overhead<sp/>of<sp/>multiple<sp/>calls</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="339"><highlight class="normal"></highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a4b8758e979e3a98ee5e5e482d998378d" kindref="member">_analyse_package_layout</ref>(ignore_ext_modules)</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>name:</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a10b2c840048049990593c08521f96ddf" kindref="member">analyse_name</ref>()<sp/><sp/></highlight><highlight class="comment">#<sp/>depends<sp/>on<sp/>``packages``<sp/>and<sp/>``py_modules``</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"></highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1aa7b24f4b1ca3bee9e196e4faccf4beda" kindref="member">_called</ref><sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="345"><highlight class="normal"></highlight></codeline>
<codeline lineno="346" refid="classsetuptools_1_1discovery_1_1_config_discovery_1a1cc853387f67946e2e181226858be217" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a1cc853387f67946e2e181226858be217" kindref="member">_explicitly_specified</ref>(self,<sp/>ignore_ext_modules:<sp/>bool)<sp/>-&gt;<sp/>bool:</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;``True``<sp/>if<sp/>the<sp/>user<sp/>has<sp/>specified<sp/>some<sp/>form<sp/>of<sp/>package/module<sp/>listing&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ignore_ext_modules<sp/>=<sp/>ignore_ext_modules<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1ac483bc24f53c303c5db54deef27b6079" kindref="member">_skip_ext_modules</ref></highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ext_modules<sp/>=<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>(self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.ext_modules<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>ignore_ext_modules)</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.packages<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.py_modules<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>ext_modules</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>hasattr(self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>,<sp/></highlight><highlight class="stringliteral">&quot;configuration&quot;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.configuration</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>^<sp/>Some<sp/>projects<sp/>use<sp/>numpy.distutils.misc_util.Configuration</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="357"><highlight class="normal"></highlight></codeline>
<codeline lineno="358" refid="classsetuptools_1_1discovery_1_1_config_discovery_1a4b8758e979e3a98ee5e5e482d998378d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a4b8758e979e3a98ee5e5e482d998378d" kindref="member">_analyse_package_layout</ref>(self,<sp/>ignore_ext_modules:<sp/>bool)<sp/>-&gt;<sp/>bool:</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a1cc853387f67946e2e181226858be217" kindref="member">_explicitly_specified</ref>(ignore_ext_modules):</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>For<sp/>backward<sp/>compatibility,<sp/>just<sp/>try<sp/>to<sp/>find<sp/>modules/packages</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>when<sp/>nothing<sp/>is<sp/>given</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="363"><highlight class="normal"></highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.debug(</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;No<sp/>`packages`<sp/>or<sp/>`py_modules`<sp/>configuration,<sp/>performing<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;automatic<sp/>discovery.&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="368"><highlight class="normal"></highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1aacf217112551b6ca50fa9082d83e409d" kindref="member">_analyse_explicit_layout</ref>()</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1acd7819284451e0d790e976d8388dbb70" kindref="member">_analyse_src_layout</ref>()</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>flat-layout<sp/>is<sp/>the<sp/>trickiest<sp/>for<sp/>discovery<sp/>so<sp/>it<sp/>should<sp/>be<sp/>last</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a3d94f6ff7539d3fb63b9023e0f78dccc" kindref="member">_analyse_flat_layout</ref>()</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="375"><highlight class="normal"></highlight></codeline>
<codeline lineno="376" refid="classsetuptools_1_1discovery_1_1_config_discovery_1aacf217112551b6ca50fa9082d83e409d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1aacf217112551b6ca50fa9082d83e409d" kindref="member">_analyse_explicit_layout</ref>(self)<sp/>-&gt;<sp/>bool:</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;The<sp/>user<sp/>can<sp/>explicitly<sp/>give<sp/>a<sp/>package<sp/>layout<sp/>via<sp/>``package_dir``&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>package_dir<sp/>=<sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a293442efa6cdc81132385c5d42e4c22e" kindref="member">_package_dir</ref>.copy()<sp/><sp/></highlight><highlight class="comment">#<sp/>don&apos;t<sp/>modify<sp/>directly</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>package_dir.pop(</highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)<sp/><sp/></highlight><highlight class="comment">#<sp/>This<sp/>falls<sp/>under<sp/>the<sp/>&quot;src-layout&quot;<sp/>umbrella</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>root_dir<sp/>=<sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a4e8030d0499e80f74c24d8a2d62bb554" kindref="member">_root_dir</ref></highlight></codeline>
<codeline lineno="381"><highlight class="normal"></highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>package_dir:</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="384"><highlight class="normal"></highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.debug(f</highlight><highlight class="stringliteral">&quot;`explicit-layout`<sp/>detected<sp/>--<sp/>analysing<sp/>{package_dir}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pkgs<sp/>=<sp/><ref refid="namespacesetuptools_1_1discovery_1a8ce1f228a832d9afef9405c06c1f43f3" kindref="member">chain_iter</ref>(</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacesetuptools_1_1discovery_1a0a750a2b895076785e978aaee27bec04" kindref="member">_find_packages_within</ref>(pkg,<sp/>os.path.join(root_dir,<sp/>parent_dir))</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>pkg,<sp/>parent_dir<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>package_dir.items()</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.packages<sp/>=<sp/>list(pkgs)</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.debug(f</highlight><highlight class="stringliteral">&quot;discovered<sp/>packages<sp/>--<sp/>{self.dist.packages}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="393"><highlight class="normal"></highlight></codeline>
<codeline lineno="394" refid="classsetuptools_1_1discovery_1_1_config_discovery_1acd7819284451e0d790e976d8388dbb70" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1acd7819284451e0d790e976d8388dbb70" kindref="member">_analyse_src_layout</ref>(self)<sp/>-&gt;<sp/>bool:</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Try<sp/>to<sp/>find<sp/>all<sp/>packages<sp/>or<sp/>modules<sp/>under<sp/>the<sp/>``src``<sp/>directory</highlight></codeline>
<codeline lineno="396"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(or<sp/>anything<sp/>pointed<sp/>by<sp/>``package_dir[&quot;&quot;]``).</highlight></codeline>
<codeline lineno="397"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="398"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>The<sp/>&quot;src-layout&quot;<sp/>is<sp/>relatively<sp/>safe<sp/>for<sp/>automatic<sp/>discovery.</highlight></codeline>
<codeline lineno="399"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>We<sp/>assume<sp/>that<sp/>everything<sp/>within<sp/>is<sp/>meant<sp/>to<sp/>be<sp/>included<sp/>in<sp/>the</highlight></codeline>
<codeline lineno="400"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>distribution.</highlight></codeline>
<codeline lineno="401"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="402"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>``package_dir[&quot;&quot;]``<sp/>is<sp/>not<sp/>given,<sp/>but<sp/>the<sp/>``src``<sp/>directory<sp/>exists,</highlight></codeline>
<codeline lineno="403"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this<sp/>function<sp/>will<sp/>set<sp/>``package_dir[&quot;&quot;]<sp/>=<sp/>&quot;src&quot;``.</highlight></codeline>
<codeline lineno="404"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>package_dir<sp/>=<sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a293442efa6cdc81132385c5d42e4c22e" kindref="member">_package_dir</ref></highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>src_dir<sp/>=<sp/>os.path.join(self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a4e8030d0499e80f74c24d8a2d62bb554" kindref="member">_root_dir</ref>,<sp/>package_dir.get(</highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;src&quot;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>os.path.isdir(src_dir):</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="409"><highlight class="normal"></highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.debug(f</highlight><highlight class="stringliteral">&quot;`src-layout`<sp/>detected<sp/>--<sp/>analysing<sp/>{src_dir}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>package_dir.setdefault(</highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">,<sp/>os.path.basename(src_dir))</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.package_dir<sp/>=<sp/>package_dir<sp/><sp/></highlight><highlight class="comment">#<sp/>persist<sp/>eventual<sp/>modifications</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.packages<sp/>=<sp/>PEP420PackageFinder.find(src_dir)</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.py_modules<sp/>=<sp/>ModuleFinder.find(src_dir)</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.debug(f</highlight><highlight class="stringliteral">&quot;discovered<sp/>packages<sp/>--<sp/>{self.dist.packages}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.debug(f</highlight><highlight class="stringliteral">&quot;discovered<sp/>py_modules<sp/>--<sp/>{self.dist.py_modules}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="418"><highlight class="normal"></highlight></codeline>
<codeline lineno="419" refid="classsetuptools_1_1discovery_1_1_config_discovery_1a3d94f6ff7539d3fb63b9023e0f78dccc" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a3d94f6ff7539d3fb63b9023e0f78dccc" kindref="member">_analyse_flat_layout</ref>(self)<sp/>-&gt;<sp/>bool:</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Try<sp/>to<sp/>find<sp/>all<sp/>packages<sp/>and<sp/>modules<sp/>under<sp/>the<sp/>project<sp/>root.</highlight></codeline>
<codeline lineno="421"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="422"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Since<sp/>the<sp/>``flat-layout``<sp/>is<sp/>more<sp/>dangerous<sp/>in<sp/>terms<sp/>of<sp/>accidentally<sp/>including</highlight></codeline>
<codeline lineno="423"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>extra<sp/>files/directories,<sp/>this<sp/>function<sp/>is<sp/>more<sp/>conservative<sp/>and<sp/>will<sp/>raise<sp/>an</highlight></codeline>
<codeline lineno="424"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>error<sp/>if<sp/>multiple<sp/>packages<sp/>or<sp/>modules<sp/>are<sp/>found.</highlight></codeline>
<codeline lineno="425"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="426"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>assumes<sp/>that<sp/>multi-package<sp/>dists<sp/>are<sp/>uncommon<sp/>and<sp/>refuse<sp/>to<sp/>support<sp/>that</highlight></codeline>
<codeline lineno="427"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>use<sp/>case<sp/>in<sp/>order<sp/>to<sp/>be<sp/>able<sp/>to<sp/>prevent<sp/>unintended<sp/>errors.</highlight></codeline>
<codeline lineno="428"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.debug(f</highlight><highlight class="stringliteral">&quot;`flat-layout`<sp/>detected<sp/>--<sp/>analysing<sp/>{self._root_dir}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1af4fa78b426eca610c57995eea046c649" kindref="member">_analyse_flat_packages</ref>()<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1af3cd9b9366edf2ef04d3bbc7a0e18016" kindref="member">_analyse_flat_modules</ref>()</highlight></codeline>
<codeline lineno="431"><highlight class="normal"></highlight></codeline>
<codeline lineno="432" refid="classsetuptools_1_1discovery_1_1_config_discovery_1af4fa78b426eca610c57995eea046c649" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1af4fa78b426eca610c57995eea046c649" kindref="member">_analyse_flat_packages</ref>(self)<sp/>-&gt;<sp/>bool:</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.packages<sp/>=<sp/>FlatLayoutPackageFinder.find(self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a4e8030d0499e80f74c24d8a2d62bb554" kindref="member">_root_dir</ref>)</highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>top_level<sp/>=<sp/><ref refid="namespacesetuptools_1_1discovery_1a500e6a32d38299828de25766b59df3fa" kindref="member">remove_nested_packages</ref>(<ref refid="namespacesetuptools_1_1discovery_1a78a1d502fc05dfd5cd477f8c5d194219" kindref="member">remove_stubs</ref>(self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.packages))</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.debug(f</highlight><highlight class="stringliteral">&quot;discovered<sp/>packages<sp/>--<sp/>{self.dist.packages}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a9d7670d5979502cde15b2f2b1b57832b" kindref="member">_ensure_no_accidental_inclusion</ref>(top_level,<sp/></highlight><highlight class="stringliteral">&quot;packages&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>bool(top_level)</highlight></codeline>
<codeline lineno="438"><highlight class="normal"></highlight></codeline>
<codeline lineno="439" refid="classsetuptools_1_1discovery_1_1_config_discovery_1af3cd9b9366edf2ef04d3bbc7a0e18016" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1af3cd9b9366edf2ef04d3bbc7a0e18016" kindref="member">_analyse_flat_modules</ref>(self)<sp/>-&gt;<sp/>bool:</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.py_modules<sp/>=<sp/>FlatLayoutModuleFinder.find(self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a4e8030d0499e80f74c24d8a2d62bb554" kindref="member">_root_dir</ref>)</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.debug(f</highlight><highlight class="stringliteral">&quot;discovered<sp/>py_modules<sp/>--<sp/>{self.dist.py_modules}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a9d7670d5979502cde15b2f2b1b57832b" kindref="member">_ensure_no_accidental_inclusion</ref>(self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.py_modules,<sp/></highlight><highlight class="stringliteral">&quot;modules&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>bool(self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.py_modules)</highlight></codeline>
<codeline lineno="444"><highlight class="normal"></highlight></codeline>
<codeline lineno="445" refid="classsetuptools_1_1discovery_1_1_config_discovery_1a9d7670d5979502cde15b2f2b1b57832b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a9d7670d5979502cde15b2f2b1b57832b" kindref="member">_ensure_no_accidental_inclusion</ref>(self,<sp/>detected:<sp/>List[str],<sp/>kind:<sp/>str):</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(detected)<sp/>&gt;<sp/>1:</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>inspect<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>cleandoc</highlight></codeline>
<codeline lineno="448"><highlight class="normal"></highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacesetuptools_1_1errors" kindref="compound">setuptools.errors</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>PackageDiscoveryError</highlight></codeline>
<codeline lineno="450"><highlight class="normal"></highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>f</highlight><highlight class="stringliteral">&quot;&quot;&quot;Multiple<sp/>top-level<sp/>{kind}<sp/>discovered<sp/>in<sp/>a<sp/>flat-layout:<sp/>{detected}.</highlight></codeline>
<codeline lineno="452"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="453"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>To<sp/>avoid<sp/>accidental<sp/>inclusion<sp/>of<sp/>unwanted<sp/>files<sp/>or<sp/>directories,</highlight></codeline>
<codeline lineno="454"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setuptools<sp/>will<sp/>not<sp/>proceed<sp/>with<sp/>this<sp/>build.</highlight></codeline>
<codeline lineno="455"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="456"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>you<sp/>are<sp/>trying<sp/>to<sp/>create<sp/>a<sp/>single<sp/>distribution<sp/>with<sp/>multiple<sp/>{kind}</highlight></codeline>
<codeline lineno="457"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>on<sp/>purpose,<sp/>you<sp/>should<sp/>not<sp/>rely<sp/>on<sp/>automatic<sp/>discovery.</highlight></codeline>
<codeline lineno="458"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Instead,<sp/>consider<sp/>the<sp/>following<sp/>options:</highlight></codeline>
<codeline lineno="459"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="460"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.<sp/>set<sp/>up<sp/>custom<sp/>discovery<sp/>(`find`<sp/>directive<sp/>with<sp/>`include`<sp/>or<sp/>`exclude`)</highlight></codeline>
<codeline lineno="461"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>2.<sp/>use<sp/>a<sp/>`src-layout`</highlight></codeline>
<codeline lineno="462"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>3.<sp/>explicitly<sp/>set<sp/>`py_modules`<sp/>or<sp/>`packages`<sp/>with<sp/>a<sp/>list<sp/>of<sp/>names</highlight></codeline>
<codeline lineno="463"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="464"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>To<sp/>find<sp/>more<sp/>information,<sp/>look<sp/>for<sp/>&quot;package<sp/>discovery&quot;<sp/>on<sp/>setuptools<sp/>docs.</highlight></codeline>
<codeline lineno="465"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>PackageDiscoveryError(cleandoc(msg))</highlight></codeline>
<codeline lineno="467"><highlight class="normal"></highlight></codeline>
<codeline lineno="468" refid="classsetuptools_1_1discovery_1_1_config_discovery_1a10b2c840048049990593c08521f96ddf" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a10b2c840048049990593c08521f96ddf" kindref="member">analyse_name</ref>(self):</highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;The<sp/>packages/modules<sp/>are<sp/>the<sp/>essential<sp/>contribution<sp/>of<sp/>the<sp/>author.</highlight></codeline>
<codeline lineno="470"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Therefore<sp/>the<sp/>name<sp/>of<sp/>the<sp/>distribution<sp/>can<sp/>be<sp/>derived<sp/>from<sp/>them.</highlight></codeline>
<codeline lineno="471"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.metadata.name<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.name:</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>get_name()<sp/>is<sp/>not<sp/>reliable<sp/>(can<sp/>return<sp/>&quot;UNKNOWN&quot;)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="475"><highlight class="normal"></highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.debug(</highlight><highlight class="stringliteral">&quot;No<sp/>`name`<sp/>configuration,<sp/>performing<sp/>automatic<sp/>discovery&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="477"><highlight class="normal"></highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>=<sp/>(</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a60002d71bc2308ab73a0ec179c656ba7" kindref="member">_find_name_single_package_or_module</ref>()</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1acbb6e4f5019c74569b6de711747917a8" kindref="member">_find_name_from_packages</ref>()</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>name:</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.metadata.name<sp/>=<sp/>name</highlight></codeline>
<codeline lineno="484"><highlight class="normal"></highlight></codeline>
<codeline lineno="485" refid="classsetuptools_1_1discovery_1_1_config_discovery_1a60002d71bc2308ab73a0ec179c656ba7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a60002d71bc2308ab73a0ec179c656ba7" kindref="member">_find_name_single_package_or_module</ref>(self)<sp/>-&gt;<sp/>Optional[str]:</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Exactly<sp/>one<sp/>module<sp/>or<sp/>package&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>field<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>(</highlight><highlight class="stringliteral">&apos;packages&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;py_modules&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>items<sp/>=<sp/>getattr(self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>,<sp/>field,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>[]</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>items<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>len(items)<sp/>==<sp/>1:</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.debug(f</highlight><highlight class="stringliteral">&quot;Single<sp/>module/package<sp/>detected,<sp/>name:<sp/>{items[0]}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>items[0]</highlight></codeline>
<codeline lineno="492"><highlight class="normal"></highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="494"><highlight class="normal"></highlight></codeline>
<codeline lineno="495" refid="classsetuptools_1_1discovery_1_1_config_discovery_1acbb6e4f5019c74569b6de711747917a8" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1acbb6e4f5019c74569b6de711747917a8" kindref="member">_find_name_from_packages</ref>(self)<sp/>-&gt;<sp/>Optional[str]:</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Try<sp/>to<sp/>find<sp/>the<sp/>root<sp/>package<sp/>that<sp/>is<sp/>not<sp/>a<sp/>PEP<sp/>420<sp/>namespace&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.packages:</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="499"><highlight class="normal"></highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>packages<sp/>=<sp/><ref refid="namespacesetuptools_1_1discovery_1a78a1d502fc05dfd5cd477f8c5d194219" kindref="member">remove_stubs</ref>(sorted(self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.packages,<sp/>key=len))</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>package_dir<sp/>=<sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a34ab7b9f1e33ad8fda84def636a5b5bb" kindref="member">dist</ref>.package_dir<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>{}</highlight></codeline>
<codeline lineno="502"><highlight class="normal"></highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>parent_pkg<sp/>=<sp/><ref refid="namespacesetuptools_1_1discovery_1a2eb025148180ffaa7b6292bfc4f2cbd3" kindref="member">find_parent_package</ref>(packages,<sp/>package_dir,<sp/>self.<ref refid="classsetuptools_1_1discovery_1_1_config_discovery_1a4e8030d0499e80f74c24d8a2d62bb554" kindref="member">_root_dir</ref>)</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>parent_pkg:</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.debug(f</highlight><highlight class="stringliteral">&quot;Common<sp/>parent<sp/>package<sp/>detected,<sp/>name:<sp/>{parent_pkg}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>parent_pkg</highlight></codeline>
<codeline lineno="507"><highlight class="normal"></highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log.warn(</highlight><highlight class="stringliteral">&quot;No<sp/>parent<sp/>package<sp/>detected,<sp/>impossible<sp/>to<sp/>derive<sp/>`name`&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="510"><highlight class="normal"></highlight></codeline>
<codeline lineno="511"><highlight class="normal"></highlight></codeline>
<codeline lineno="512" refid="namespacesetuptools_1_1discovery_1a500e6a32d38299828de25766b59df3fa" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1discovery_1a500e6a32d38299828de25766b59df3fa" kindref="member">remove_nested_packages</ref>(packages:<sp/>List[str])<sp/>-&gt;<sp/>List[str]:</highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Remove<sp/>nested<sp/>packages<sp/>from<sp/>a<sp/>list<sp/>of<sp/>packages.</highlight></codeline>
<codeline lineno="514"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="515"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>remove_nested_packages([&quot;a&quot;,<sp/>&quot;a.b1&quot;,<sp/>&quot;a.b2&quot;,<sp/>&quot;a.b1.c1&quot;])</highlight></codeline>
<codeline lineno="516"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>[&apos;a&apos;]</highlight></codeline>
<codeline lineno="517"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>remove_nested_packages([&quot;a&quot;,<sp/>&quot;b&quot;,<sp/>&quot;c.d&quot;,<sp/>&quot;c.d.e.f&quot;,<sp/>&quot;g.h&quot;,<sp/>&quot;a.a1&quot;])</highlight></codeline>
<codeline lineno="518"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>[&apos;a&apos;,<sp/>&apos;b&apos;,<sp/>&apos;c.d&apos;,<sp/>&apos;g.h&apos;]</highlight></codeline>
<codeline lineno="519"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/>pkgs<sp/>=<sp/>sorted(packages,<sp/>key=len)</highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/>top_level<sp/>=<sp/>pkgs[:]</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/>size<sp/>=<sp/>len(pkgs)</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i,<sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>enumerate(reversed(pkgs)):</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>any(name.startswith(f</highlight><highlight class="stringliteral">&quot;{other}.&quot;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>other<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>top_level):</highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>top_level.pop(size<sp/>-<sp/>i<sp/>-<sp/>1)</highlight></codeline>
<codeline lineno="526"><highlight class="normal"></highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>top_level</highlight></codeline>
<codeline lineno="528"><highlight class="normal"></highlight></codeline>
<codeline lineno="529"><highlight class="normal"></highlight></codeline>
<codeline lineno="530" refid="namespacesetuptools_1_1discovery_1a78a1d502fc05dfd5cd477f8c5d194219" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1discovery_1a78a1d502fc05dfd5cd477f8c5d194219" kindref="member">remove_stubs</ref>(packages:<sp/>List[str])<sp/>-&gt;<sp/>List[str]:</highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Remove<sp/>type<sp/>stubs<sp/>(:pep:`561`)<sp/>from<sp/>a<sp/>list<sp/>of<sp/>packages.</highlight></codeline>
<codeline lineno="532"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="533"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>remove_stubs([&quot;a&quot;,<sp/>&quot;a.b&quot;,<sp/>&quot;a-stubs&quot;,<sp/>&quot;a-stubs.b.c&quot;,<sp/>&quot;b&quot;,<sp/>&quot;c-stubs&quot;])</highlight></codeline>
<codeline lineno="534"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>[&apos;a&apos;,<sp/>&apos;a.b&apos;,<sp/>&apos;b&apos;]</highlight></codeline>
<codeline lineno="535"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[pkg<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>pkg<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>packages<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>pkg.split(</highlight><highlight class="stringliteral">&quot;.&quot;</highlight><highlight class="normal">)[0].endswith(</highlight><highlight class="stringliteral">&quot;-stubs&quot;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="537"><highlight class="normal"></highlight></codeline>
<codeline lineno="538"><highlight class="normal"></highlight></codeline>
<codeline lineno="539" refid="namespacesetuptools_1_1discovery_1a2eb025148180ffaa7b6292bfc4f2cbd3" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1discovery_1a2eb025148180ffaa7b6292bfc4f2cbd3" kindref="member">find_parent_package</ref>(</highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/>packages:<sp/>List[str],<sp/>package_dir:<sp/>Mapping[str,<sp/>str],<sp/>root_dir:<sp/>_Path</highlight></codeline>
<codeline lineno="541"><highlight class="normal">)<sp/>-&gt;<sp/>Optional[str]:</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Find<sp/>the<sp/>parent<sp/>package<sp/>that<sp/>is<sp/>not<sp/>a<sp/>namespace.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/>packages<sp/>=<sp/>sorted(packages,<sp/>key=len)</highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/>common_ancestors<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i,<sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>enumerate(packages):</highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>all(n.startswith(f</highlight><highlight class="stringliteral">&quot;{name}.&quot;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>n<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>packages[i+1:]):</highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Since<sp/>packages<sp/>are<sp/>sorted<sp/>by<sp/>length,<sp/>this<sp/>condition<sp/>is<sp/>able</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>to<sp/>find<sp/>a<sp/>list<sp/>of<sp/>all<sp/>common<sp/>ancestors.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>When<sp/>there<sp/>is<sp/>divergence<sp/>(e.g.<sp/>multiple<sp/>root<sp/>packages)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>the<sp/>list<sp/>will<sp/>be<sp/>empty</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>common_ancestors.append(name)</highlight></codeline>
<codeline lineno="553"><highlight class="normal"></highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>common_ancestors:</highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pkg_path<sp/>=<sp/><ref refid="namespacesetuptools_1_1discovery_1a52e46849bcb908d5904687698991d2dd" kindref="member">find_package_path</ref>(name,<sp/>package_dir,<sp/>root_dir)</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>init<sp/>=<sp/>os.path.join(pkg_path,<sp/></highlight><highlight class="stringliteral">&quot;__init__.py&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>os.path.isfile(init):</highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>name</highlight></codeline>
<codeline lineno="559"><highlight class="normal"></highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="561"><highlight class="normal"></highlight></codeline>
<codeline lineno="562"><highlight class="normal"></highlight></codeline>
<codeline lineno="563" refid="namespacesetuptools_1_1discovery_1a52e46849bcb908d5904687698991d2dd" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1discovery_1a52e46849bcb908d5904687698991d2dd" kindref="member">find_package_path</ref>(</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/>name:<sp/>str,<sp/>package_dir:<sp/>Mapping[str,<sp/>str],<sp/>root_dir:<sp/>_Path</highlight></codeline>
<codeline lineno="565"><highlight class="normal">)<sp/>-&gt;<sp/>str:</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Given<sp/>a<sp/>package<sp/>name,<sp/>return<sp/>the<sp/>path<sp/>where<sp/>it<sp/>should<sp/>be<sp/>found<sp/>on</highlight></codeline>
<codeline lineno="567"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>disk,<sp/>considering<sp/>the<sp/>``package_dir``<sp/>option.</highlight></codeline>
<codeline lineno="568"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="569"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>path<sp/>=<sp/>find_package_path(&quot;my.pkg&quot;,<sp/>{&quot;&quot;:<sp/>&quot;root/is/nested&quot;},<sp/>&quot;.&quot;)</highlight></codeline>
<codeline lineno="570"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>path.replace(os.sep,<sp/>&quot;/&quot;)</highlight></codeline>
<codeline lineno="571"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&apos;./root/is/nested/my/pkg&apos;</highlight></codeline>
<codeline lineno="572"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="573"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>path<sp/>=<sp/>find_package_path(&quot;my.pkg&quot;,<sp/>{&quot;my&quot;:<sp/>&quot;root/is/nested&quot;},<sp/>&quot;.&quot;)</highlight></codeline>
<codeline lineno="574"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>path.replace(os.sep,<sp/>&quot;/&quot;)</highlight></codeline>
<codeline lineno="575"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&apos;./root/is/nested/pkg&apos;</highlight></codeline>
<codeline lineno="576"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="577"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>path<sp/>=<sp/>find_package_path(&quot;my.pkg&quot;,<sp/>{&quot;my.pkg&quot;:<sp/>&quot;root/is/nested&quot;},<sp/>&quot;.&quot;)</highlight></codeline>
<codeline lineno="578"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>path.replace(os.sep,<sp/>&quot;/&quot;)</highlight></codeline>
<codeline lineno="579"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&apos;./root/is/nested&apos;</highlight></codeline>
<codeline lineno="580"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="581"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>path<sp/>=<sp/>find_package_path(&quot;other.pkg&quot;,<sp/>{&quot;my.pkg&quot;:<sp/>&quot;root/is/nested&quot;},<sp/>&quot;.&quot;)</highlight></codeline>
<codeline lineno="582"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>path.replace(os.sep,<sp/>&quot;/&quot;)</highlight></codeline>
<codeline lineno="583"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&apos;./other/pkg&apos;</highlight></codeline>
<codeline lineno="584"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><sp/>parts<sp/>=<sp/>name.split(</highlight><highlight class="stringliteral">&quot;.&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(len(parts),<sp/>0,<sp/>-1):</highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Look<sp/>backwards,<sp/>the<sp/>most<sp/>specific<sp/>package_dir<sp/>first</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>partial_name<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;.&quot;</highlight><highlight class="normal">.join(parts[:i])</highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>partial_name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>package_dir:</highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>parent<sp/>=<sp/>package_dir[partial_name]</highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>os.path.join(root_dir,<sp/>parent,<sp/>*parts[i:])</highlight></codeline>
<codeline lineno="592"><highlight class="normal"></highlight></codeline>
<codeline lineno="593"><highlight class="normal"><sp/><sp/><sp/><sp/>parent<sp/>=<sp/>package_dir.get(</highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>os.path.join(root_dir,<sp/>*parent.split(</highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal">),<sp/>*parts)</highlight></codeline>
<codeline lineno="595"><highlight class="normal"></highlight></codeline>
<codeline lineno="596"><highlight class="normal"></highlight></codeline>
<codeline lineno="597" refid="namespacesetuptools_1_1discovery_1ac569c7d830d346f6bbeb2625bf506920" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacesetuptools_1_1discovery_1ac569c7d830d346f6bbeb2625bf506920" kindref="member">construct_package_dir</ref>(packages:<sp/>List[str],<sp/>package_path:<sp/>_Path)<sp/>-&gt;<sp/>Dict[str,<sp/>str]:</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/>parent_pkgs<sp/>=<sp/><ref refid="namespacesetuptools_1_1discovery_1a500e6a32d38299828de25766b59df3fa" kindref="member">remove_nested_packages</ref>(packages)</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/>prefix<sp/>=<sp/>Path(package_path).parts</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>{pkg:<sp/></highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal">.join([*prefix,<sp/>*pkg.split(</highlight><highlight class="stringliteral">&quot;.&quot;</highlight><highlight class="normal">)])<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>pkg<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>parent_pkgs}</highlight></codeline>
    </programlisting>
    <location file="microservicio_data_stream/venv/Lib/site-packages/setuptools/discovery.py"/>
  </compounddef>
</doxygen>
