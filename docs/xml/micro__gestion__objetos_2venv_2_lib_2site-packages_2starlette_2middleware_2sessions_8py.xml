<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="es">
  <compounddef id="micro__gestion__objetos_2venv_2_lib_2site-packages_2starlette_2middleware_2sessions_8py" kind="file" language="Python">
    <compoundname>sessions.py</compoundname>
    <innerclass refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware" prot="public">starlette::middleware::sessions::SessionMiddleware</innerclass>
    <innernamespace refid="namespacestarlette">starlette</innernamespace>
    <innernamespace refid="namespacestarlette_1_1middleware">starlette::middleware</innernamespace>
    <innernamespace refid="namespacestarlette_1_1middleware_1_1sessions">starlette::middleware::sessions</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacestarlette_1_1middleware_1_1sessions" refkind="compound"><highlight class="keyword">from</highlight><highlight class="normal"><sp/>__future__<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>annotations</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>json</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>base64<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>b64decode,<sp/>b64encode</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>typing<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Literal</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>itsdangerous</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>itsdangerous.exc<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>BadSignature</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacestarlette_1_1datastructures" kindref="compound">starlette.datastructures</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>MutableHeaders,<sp/>Secret</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacestarlette_1_1requests" kindref="compound">starlette.requests</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>HTTPConnection</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacestarlette_1_1types" kindref="compound">starlette.types</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>ASGIApp,<sp/>Message,<sp/>Receive,<sp/>Scope,<sp/>Send</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15" refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware" kindref="compound">SessionMiddleware</ref>:</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__init__(</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self,</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>app:<sp/>ASGIApp,</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>secret_key:<sp/>str<sp/>|<sp/>Secret,</highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>session_cookie:<sp/>str<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;session&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_age:<sp/>int<sp/>|<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/>=<sp/>14<sp/>*<sp/>24<sp/>*<sp/>60<sp/>*<sp/>60,<sp/><sp/></highlight><highlight class="comment">#<sp/>14<sp/>days,<sp/>in<sp/>seconds</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path:<sp/>str<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>same_site:<sp/>Literal[</highlight><highlight class="stringliteral">&quot;lax&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;strict&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;none&quot;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;lax&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>https_only:<sp/>bool<sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>domain:<sp/>str<sp/>|<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/>)<sp/>-&gt;<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="27" refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1ab4a43d38b773beb27a807a6ed50c6c6f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1ab4a43d38b773beb27a807a6ed50c6c6f" kindref="member">app</ref><sp/>=<sp/>app</highlight></codeline>
<codeline lineno="28" refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1a219084bde650b62ad0b93255958287fe" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1a219084bde650b62ad0b93255958287fe" kindref="member">signer</ref><sp/>=<sp/>itsdangerous.TimestampSigner(str(secret_key))</highlight></codeline>
<codeline lineno="29" refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1aa9cbfd88b7ce378606ddc07ab2e0d6c7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1aa9cbfd88b7ce378606ddc07ab2e0d6c7" kindref="member">session_cookie</ref><sp/>=<sp/>session_cookie</highlight></codeline>
<codeline lineno="30" refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1a49846ac8047541cc8241cbab79b4e9f1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1a49846ac8047541cc8241cbab79b4e9f1" kindref="member">max_age</ref><sp/>=<sp/>max_age</highlight></codeline>
<codeline lineno="31" refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1aaec43259e4ac2014662cb8dbf2f9bca2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1aaec43259e4ac2014662cb8dbf2f9bca2" kindref="member">path</ref><sp/>=<sp/>path</highlight></codeline>
<codeline lineno="32" refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1abd3c0e1c5017ba02e8ff6a01484fedc6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1abd3c0e1c5017ba02e8ff6a01484fedc6" kindref="member">security_flags</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;httponly;<sp/>samesite=&quot;</highlight><highlight class="normal"><sp/>+<sp/>same_site</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>https_only:<sp/><sp/></highlight><highlight class="comment">#<sp/>Secure<sp/>flag<sp/>can<sp/>be<sp/>used<sp/>with<sp/>HTTPS<sp/>only</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1abd3c0e1c5017ba02e8ff6a01484fedc6" kindref="member">security_flags</ref><sp/>+=<sp/></highlight><highlight class="stringliteral">&quot;;<sp/>secure&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>domain<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1abd3c0e1c5017ba02e8ff6a01484fedc6" kindref="member">security_flags</ref><sp/>+=<sp/>f</highlight><highlight class="stringliteral">&quot;;<sp/>domain={domain}&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">async<sp/>def<sp/></highlight><highlight class="normal">__call__(self,<sp/>scope:<sp/>Scope,<sp/>receive:<sp/>Receive,<sp/>send:<sp/>Send)<sp/>-&gt;<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>scope[</highlight><highlight class="stringliteral">&quot;type&quot;</highlight><highlight class="normal">]<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>(</highlight><highlight class="stringliteral">&quot;http&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;websocket&quot;</highlight><highlight class="normal">):<sp/><sp/></highlight><highlight class="comment">#<sp/>pragma:<sp/>no<sp/>cover</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>await<sp/>self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1ab4a43d38b773beb27a807a6ed50c6c6f" kindref="member">app</ref>(scope,<sp/>receive,<sp/>send)</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>connection<sp/>=<sp/><ref refid="classstarlette_1_1requests_1_1_h_t_t_p_connection" kindref="compound">HTTPConnection</ref>(scope)</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>initial_session_was_empty<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1aa9cbfd88b7ce378606ddc07ab2e0d6c7" kindref="member">session_cookie</ref><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>connection.cookies:</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>connection.cookies[self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1aa9cbfd88b7ce378606ddc07ab2e0d6c7" kindref="member">session_cookie</ref>].encode(</highlight><highlight class="stringliteral">&quot;utf-8&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1a219084bde650b62ad0b93255958287fe" kindref="member">signer</ref>.unsign(data,<sp/>max_age=self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1a49846ac8047541cc8241cbab79b4e9f1" kindref="member">max_age</ref>)</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>scope[</highlight><highlight class="stringliteral">&quot;session&quot;</highlight><highlight class="normal">]<sp/>=<sp/>json.loads(b64decode(data))</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>initial_session_was_empty<sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>BadSignature:</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>scope[</highlight><highlight class="stringliteral">&quot;session&quot;</highlight><highlight class="normal">]<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>scope[</highlight><highlight class="stringliteral">&quot;session&quot;</highlight><highlight class="normal">]<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">async<sp/>def<sp/></highlight><highlight class="normal">send_wrapper(message:<sp/>Message)<sp/>-&gt;<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>message[</highlight><highlight class="stringliteral">&quot;type&quot;</highlight><highlight class="normal">]<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;http.response.start&quot;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>scope[</highlight><highlight class="stringliteral">&quot;session&quot;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>We<sp/>have<sp/>session<sp/>data<sp/>to<sp/>persist.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>b64encode(json.dumps(scope[</highlight><highlight class="stringliteral">&quot;session&quot;</highlight><highlight class="normal">]).encode(</highlight><highlight class="stringliteral">&quot;utf-8&quot;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1a219084bde650b62ad0b93255958287fe" kindref="member">signer</ref>.sign(data)</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>headers<sp/>=<sp/><ref refid="classstarlette_1_1datastructures_1_1_mutable_headers" kindref="compound">MutableHeaders</ref>(scope=message)</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>header_value<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;{session_cookie}={data};<sp/>path={path};<sp/>{max_age}{security_flags}&quot;</highlight><highlight class="normal">.format(</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>session_cookie=self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1aa9cbfd88b7ce378606ddc07ab2e0d6c7" kindref="member">session_cookie</ref>,</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data=data.decode(</highlight><highlight class="stringliteral">&quot;utf-8&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path=self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1aaec43259e4ac2014662cb8dbf2f9bca2" kindref="member">path</ref>,</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_age=f</highlight><highlight class="stringliteral">&quot;Max-Age={self.max_age};<sp/>&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1a49846ac8047541cc8241cbab79b4e9f1" kindref="member">max_age</ref><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>security_flags=self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1abd3c0e1c5017ba02e8ff6a01484fedc6" kindref="member">security_flags</ref>,</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>headers.append(</highlight><highlight class="stringliteral">&quot;Set-Cookie&quot;</highlight><highlight class="normal">,<sp/>header_value)</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>initial_session_was_empty:</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>The<sp/>session<sp/>has<sp/>been<sp/>cleared.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>headers<sp/>=<sp/><ref refid="classstarlette_1_1datastructures_1_1_mutable_headers" kindref="compound">MutableHeaders</ref>(scope=message)</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>header_value<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;{session_cookie}={data};<sp/>path={path};<sp/>{expires}{security_flags}&quot;</highlight><highlight class="normal">.format(</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>session_cookie=self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1aa9cbfd88b7ce378606ddc07ab2e0d6c7" kindref="member">session_cookie</ref>,</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data=</highlight><highlight class="stringliteral">&quot;null&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>path=self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1aaec43259e4ac2014662cb8dbf2f9bca2" kindref="member">path</ref>,</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expires=</highlight><highlight class="stringliteral">&quot;expires=Thu,<sp/>01<sp/>Jan<sp/>1970<sp/>00:00:00<sp/>GMT;<sp/>&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>security_flags=self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1abd3c0e1c5017ba02e8ff6a01484fedc6" kindref="member">security_flags</ref>,</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>headers.append(</highlight><highlight class="stringliteral">&quot;Set-Cookie&quot;</highlight><highlight class="normal">,<sp/>header_value)</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>await<sp/>send(message)</highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>await<sp/>self.<ref refid="classstarlette_1_1middleware_1_1sessions_1_1_session_middleware_1ab4a43d38b773beb27a807a6ed50c6c6f" kindref="member">app</ref>(scope,<sp/>receive,<sp/>send_wrapper)</highlight></codeline>
    </programlisting>
    <location file="micro_gestion_objetos/venv/Lib/site-packages/starlette/middleware/sessions.py"/>
  </compounddef>
</doxygen>
