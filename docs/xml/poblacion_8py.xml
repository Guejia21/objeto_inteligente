<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.15.0" xml:lang="es">
  <compounddef id="poblacion_8py" kind="file" language="Python">
    <compoundname>poblacion.py</compoundname>
    <innernamespace refid="namespacepoblacion">poblacion</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacepoblacion" refkind="compound"><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@file<sp/>poblacion.py</highlight></codeline>
<codeline lineno="3"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@brief<sp/>Controlador<sp/>REST<sp/>para<sp/>operaciones<sp/>de<sp/>población<sp/>de<sp/>ontologías.</highlight></codeline>
<codeline lineno="4"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@details</highlight></codeline>
<codeline lineno="5"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Proporciona<sp/>endpoints<sp/>para:</highlight></codeline>
<codeline lineno="6"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>Poblar<sp/>metadatos<sp/>del<sp/>objeto<sp/>inteligente<sp/>en<sp/>la<sp/>ontología</highlight></codeline>
<codeline lineno="7"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>Crear/editar<sp/>reglas<sp/>ECA<sp/>(Event-Condition-Action)</highlight></codeline>
<codeline lineno="8"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>Cargar<sp/>ontologías<sp/>de<sp/>usuario<sp/>(upload<sp/>de<sp/>archivos<sp/>.owl)</highlight></codeline>
<codeline lineno="9"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>Registrar<sp/>interacciones<sp/>usuario-objeto</highlight></codeline>
<codeline lineno="10"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>Eliminar<sp/>ontologías<sp/>de<sp/>usuario</highlight></codeline>
<codeline lineno="11"><highlight class="stringliteral"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="12"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Routers:</highlight></codeline>
<codeline lineno="13"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>ontologia_router<sp/>(prefix=/ontology/poblacion):<sp/>poblamiento<sp/>de<sp/>objeto/ECA</highlight></codeline>
<codeline lineno="14"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>ontologia_usuario_router<sp/>(prefix=/ontology/poblacion_usuario):<sp/>gestión<sp/>de<sp/>perfiles</highlight></codeline>
<codeline lineno="15"><highlight class="stringliteral"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="16"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@note<sp/>Los<sp/>endpoints<sp/>de<sp/>carga<sp/>de<sp/>ontología<sp/>pueden<sp/>procesarse<sp/>de<sp/>forma<sp/>asíncrona</highlight></codeline>
<codeline lineno="17"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(recomendado:<sp/>responder<sp/>202<sp/>Accepted<sp/>y<sp/>procesar<sp/>en<sp/>background).</highlight></codeline>
<codeline lineno="18"><highlight class="stringliteral"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="19"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@author<sp/><sp/>NexTech</highlight></codeline>
<codeline lineno="20"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@version<sp/>1.0</highlight></codeline>
<codeline lineno="21"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@date<sp/>2025-01-10</highlight></codeline>
<codeline lineno="22"><highlight class="stringliteral"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="23"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@see<sp/>PoblacionService<sp/>Para<sp/>lógica<sp/>de<sp/>negocio</highlight></codeline>
<codeline lineno="24"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@see<sp/>PoblacionOntologiaUsuarioService<sp/>Para<sp/>operaciones<sp/>de<sp/>usuario</highlight></codeline>
<codeline lineno="25"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>@see<sp/>docs/diagrams/flow_diagrams.md<sp/>Para<sp/>diagramas<sp/>de<sp/>procesos</highlight></codeline>
<codeline lineno="26"><highlight class="stringliteral">&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>fastapi<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>APIRouter,<sp/>Depends,<sp/>HTTPException,<sp/>UploadFile,<sp/>File,<sp/>Form</highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>application.poblacion_service<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>PoblacionOntologiaUsuarioService</highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>application.dtos<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>EcaPayloadDTO,<sp/>PobladorPayloadDTO,<sp/>RegistroInteraccionDTO</highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>deps<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>get_poblacion_pu_service,<sp/>get_poblacion_service</highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>application.poblacion_service<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>PoblacionService</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34" refid="namespacepoblacion_1af6e361dd202a4c8c46b5bc78005622a1" refkind="member"><highlight class="normal">ontologia_router<sp/>=<sp/><ref refid="classfastapi_1_1routing_1_1_a_p_i_router" kindref="compound">APIRouter</ref>(prefix=</highlight><highlight class="stringliteral">&quot;/ontology/poblacion&quot;</highlight><highlight class="normal">,<sp/>tags=[</highlight><highlight class="stringliteral">&quot;Poblacion<sp/>de<sp/>Base<sp/>de<sp/>conocimiento&quot;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight><highlight class="stringliteral">&quot;&quot;&quot;@var<sp/>ontologia_router<sp/>Router<sp/>para<sp/>operaciones<sp/>de<sp/>población<sp/>del<sp/>objeto<sp/>inteligente.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight><highlight class="preprocessor">@ontologia_router.post(&quot;/poblar_metadatos_objeto&quot;,<sp/>response_model=None,status_code=201)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37" refid="namespacepoblacion_1a11cebb60c665885fb6e77c7cf738556d" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">async<sp/>def<sp/></highlight><highlight class="normal"><ref refid="namespacepoblacion_1a11cebb60c665885fb6e77c7cf738556d" kindref="member">poblar_metadatos_objeto</ref>(metadata:<sp/>PobladorPayloadDTO,<sp/>service:<sp/>PoblacionService<sp/>=<sp/>Depends(get_poblacion_service)):</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="39"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@brief<sp/>Puebla<sp/>los<sp/>metadatos<sp/>del<sp/>objeto<sp/>inteligente<sp/>en<sp/>la<sp/>ontología.</highlight></codeline>
<codeline lineno="40"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="41"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>metadata<sp/>DTO<sp/>PobladorPayloadDTO<sp/>con<sp/>diccionarios<sp/>de<sp/>objeto<sp/>y<sp/>recursos.</highlight></codeline>
<codeline lineno="42"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>service<sp/>Instancia<sp/>del<sp/>servicio<sp/>de<sp/>población<sp/>(inyectada).</highlight></codeline>
<codeline lineno="43"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="44"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@return<sp/>Status<sp/>201<sp/>Created<sp/>si<sp/>exitoso,<sp/>o<sp/>error<sp/>500<sp/>si<sp/>falla.</highlight></codeline>
<codeline lineno="45"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="46"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@exception<sp/>ValueError<sp/>Si<sp/>los<sp/>datos<sp/>del<sp/>DTO<sp/>son<sp/>inválidos.</highlight></codeline>
<codeline lineno="47"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@exception<sp/>RuntimeError<sp/>Si<sp/>falla<sp/>la<sp/>población<sp/>de<sp/>ontología.</highlight></codeline>
<codeline lineno="48"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="49"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@details</highlight></codeline>
<codeline lineno="50"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Operación<sp/>que<sp/>puebla<sp/>la<sp/>ontología<sp/>OWL<sp/>con:</highlight></codeline>
<codeline lineno="51"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.<sp/>Metadatos<sp/>del<sp/>objeto<sp/>inteligente<sp/>(individuos,<sp/>propiedades)</highlight></codeline>
<codeline lineno="52"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>2.<sp/>Múltiples<sp/>recursos<sp/>asociados<sp/>(datastreams,<sp/>propiedades,<sp/>etc.)</highlight></codeline>
<codeline lineno="53"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="54"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Flujo:</highlight></codeline>
<codeline lineno="55"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.<sp/>Extrae<sp/>diccionarios<sp/>del<sp/>DTO</highlight></codeline>
<codeline lineno="56"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>2.<sp/>Convierte<sp/>a<sp/>JSON<sp/>para<sp/>serialización</highlight></codeline>
<codeline lineno="57"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>3.<sp/>Delega<sp/>en<sp/>servicio<sp/>de<sp/>población</highlight></codeline>
<codeline lineno="58"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>4.<sp/>Retorna<sp/>201<sp/>Created</highlight></codeline>
<codeline lineno="59"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="60"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@note<sp/>Esta<sp/>es<sp/>una<sp/>operación<sp/>compuesta<sp/>que<sp/>requiere<sp/>idempotencia:</highlight></codeline>
<codeline lineno="61"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>si<sp/>se<sp/>ejecuta<sp/>dos<sp/>veces<sp/>con<sp/>los<sp/>mismos<sp/>datos,<sp/>debe<sp/>ser<sp/>segura</highlight></codeline>
<codeline lineno="62"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(crear<sp/>sólo<sp/>si<sp/>no<sp/>existe,<sp/>o<sp/>actualizar).</highlight></codeline>
<codeline lineno="63"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="64"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@see<sp/>PoblacionService.poblar_metadatos_objeto()</highlight></codeline>
<codeline lineno="65"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@see<sp/>docs/diagrams/flow_diagrams.md<sp/>(A)<sp/>Poblar<sp/>metadatos<sp/>sequence</highlight></codeline>
<codeline lineno="66"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>listaRecursos<sp/>=<sp/>[r.model_dump()<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>r<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>metadata.dicRec]</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>service.poblar_metadatos_objeto(metadata.dicObj.model_dump(),<sp/>listaRecursos)</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>ValueError<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>e:</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classfastapi_1_1exceptions_1_1_h_t_t_p_exception" kindref="compound">HTTPException</ref>(status_code=500,<sp/>detail=str(e))</highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight><highlight class="preprocessor">@ontologia_router.post(&quot;/poblar_eca&quot;,<sp/>response_model=None,status_code=201)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73" refid="namespacepoblacion_1a9ff2fd7b97b1ee27bfcd6a62143385f1" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">async<sp/>def<sp/></highlight><highlight class="normal"><ref refid="namespacepoblacion_1a9ff2fd7b97b1ee27bfcd6a62143385f1" kindref="member">poblar_eca</ref>(eca:<sp/>EcaPayloadDTO,<sp/>service:<sp/>PoblacionService<sp/>=<sp/>Depends(get_poblacion_service)):</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="75"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@brief<sp/>Puebla<sp/>una<sp/>nueva<sp/>regla<sp/>ECA<sp/>(Event-Condition-Action)<sp/>en<sp/>la<sp/>ontología.</highlight></codeline>
<codeline lineno="76"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="77"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>eca<sp/>DTO<sp/>EcaPayloadDTO<sp/>con<sp/>definición<sp/>de<sp/>la<sp/>regla.</highlight></codeline>
<codeline lineno="78"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>service<sp/>Servicio<sp/>de<sp/>población.</highlight></codeline>
<codeline lineno="79"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="80"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@return<sp/>Status<sp/>201<sp/>Created<sp/>si<sp/>exitoso,<sp/>o<sp/>error<sp/>500.</highlight></codeline>
<codeline lineno="81"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="82"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@exception<sp/>ValueError<sp/>Si<sp/>los<sp/>datos<sp/>de<sp/>ECA<sp/>son<sp/>inválidos.</highlight></codeline>
<codeline lineno="83"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@exception<sp/>RuntimeError<sp/>Si<sp/>falla<sp/>la<sp/>población<sp/>en<sp/>ontología.</highlight></codeline>
<codeline lineno="84"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="85"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@details</highlight></codeline>
<codeline lineno="86"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Crea<sp/>una<sp/>nueva<sp/>regla<sp/>ECA<sp/>en<sp/>la<sp/>ontología.<sp/>Las<sp/>ECAs<sp/>son<sp/>reglas</highlight></codeline>
<codeline lineno="87"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>event-driven<sp/>que<sp/>permiten<sp/>automatizar<sp/>comportamientos<sp/>del<sp/>objeto.</highlight></codeline>
<codeline lineno="88"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="89"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@note<sp/>Si<sp/>la<sp/>regla<sp/>requiere<sp/>re-reasoning<sp/>costoso,<sp/>considerar</highlight></codeline>
<codeline lineno="90"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>procesar<sp/>de<sp/>forma<sp/>asíncrona<sp/>(responder<sp/>202).</highlight></codeline>
<codeline lineno="91"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="92"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@see<sp/>PoblacionService.poblar_eca()</highlight></codeline>
<codeline lineno="93"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@see<sp/>docs/diagrams/flow_diagrams.md<sp/>(C)<sp/>Poblar/Editar<sp/>ECA<sp/>sequence</highlight></codeline>
<codeline lineno="94"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>service.poblar_eca(eca.model_dump())</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>ValueError<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>e:</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classfastapi_1_1exceptions_1_1_h_t_t_p_exception" kindref="compound">HTTPException</ref>(status_code=500,<sp/>detail=str(e))</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight><highlight class="preprocessor">@ontologia_router.post(&quot;/editar_eca&quot;,<sp/>response_model=None,status_code=200)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100" refid="namespacepoblacion_1aa4d5ecb3d082d4818b4193aa1d25b798" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">async<sp/>def<sp/></highlight><highlight class="normal"><ref refid="namespacepoblacion_1aa4d5ecb3d082d4818b4193aa1d25b798" kindref="member">editar_eca</ref>(eca:<sp/>EcaPayloadDTO,<sp/>service:<sp/>PoblacionService<sp/>=<sp/>Depends(get_poblacion_service)):</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="102"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@brief<sp/>Edita<sp/>una<sp/>regla<sp/>ECA<sp/>existente<sp/>en<sp/>la<sp/>ontología.</highlight></codeline>
<codeline lineno="103"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="104"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>eca<sp/>DTO<sp/>EcaPayloadDTO<sp/>con<sp/>definición<sp/>actualizada<sp/>de<sp/>la<sp/>regla.</highlight></codeline>
<codeline lineno="105"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>service<sp/>Servicio<sp/>de<sp/>población.</highlight></codeline>
<codeline lineno="106"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="107"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@return<sp/>Status<sp/>200<sp/>OK<sp/>si<sp/>exitoso,<sp/>o<sp/>error<sp/>500.</highlight></codeline>
<codeline lineno="108"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="109"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@exception<sp/>ValueError<sp/>Si<sp/>los<sp/>datos<sp/>de<sp/>ECA<sp/>son<sp/>inválidos.</highlight></codeline>
<codeline lineno="110"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@exception<sp/>RuntimeError<sp/>Si<sp/>falla<sp/>la<sp/>edición<sp/>en<sp/>ontología.</highlight></codeline>
<codeline lineno="111"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="112"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@details</highlight></codeline>
<codeline lineno="113"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Actualiza<sp/>una<sp/>regla<sp/>ECA<sp/>existente.<sp/>Similar<sp/>a<sp/>poblar_eca<sp/>pero</highlight></codeline>
<codeline lineno="114"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>modifica<sp/>una<sp/>regla<sp/>previamente<sp/>creada.</highlight></codeline>
<codeline lineno="115"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="116"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@note<sp/>Considerar<sp/>sincronización:<sp/>si<sp/>múltiples<sp/>clientes<sp/>editan</highlight></codeline>
<codeline lineno="117"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>la<sp/>misma<sp/>ECA,<sp/>puede<sp/>haber<sp/>condiciones<sp/>de<sp/>carrera.</highlight></codeline>
<codeline lineno="118"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="119"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@see<sp/>PoblacionService.editar_eca()</highlight></codeline>
<codeline lineno="120"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@see<sp/>docs/diagrams/flow_diagrams.md<sp/>(C)<sp/>Poblar/Editar<sp/>ECA<sp/>sequence</highlight></codeline>
<codeline lineno="121"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>service.editar_eca(eca.model_dump())</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>ValueError<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>e:</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classfastapi_1_1exceptions_1_1_h_t_t_p_exception" kindref="compound">HTTPException</ref>(status_code=500,<sp/>detail=str(e))</highlight></codeline>
<codeline lineno="126"><highlight class="normal"></highlight></codeline>
<codeline lineno="127" refid="namespacepoblacion_1a428d70c95b4a9f0cf4903dbbbce4b54b" refkind="member"><highlight class="normal">ontologia_usuario_router<sp/>=<sp/><ref refid="classfastapi_1_1routing_1_1_a_p_i_router" kindref="compound">APIRouter</ref>(prefix=</highlight><highlight class="stringliteral">&quot;/ontology/poblacion_usuario&quot;</highlight><highlight class="normal">,<sp/>tags=[</highlight><highlight class="stringliteral">&quot;Poblacion<sp/>de<sp/>Perfil<sp/>de<sp/>Usuario&quot;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="128"><highlight class="normal"></highlight><highlight class="stringliteral">&quot;&quot;&quot;@var<sp/>ontologia_usuario_router<sp/>Router<sp/>para<sp/>operaciones<sp/>de<sp/>ontología<sp/>de<sp/>usuario.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"></highlight><highlight class="preprocessor">@ontologia_usuario_router.post(&quot;/cargar_ontologia&quot;,<sp/>response_model=None,status_code=201)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="131" refid="namespacepoblacion_1a948efd94489282772d56b1e3104abfad" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">async<sp/>def<sp/></highlight><highlight class="normal"><ref refid="namespacepoblacion_1a948efd94489282772d56b1e3104abfad" kindref="member">cargar_ontologia</ref>(</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/>file:<sp/>UploadFile<sp/>=<sp/>File(...,<sp/>description=</highlight><highlight class="stringliteral">&quot;Archivo<sp/>de<sp/>ontología<sp/>(.owl)&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/>nombre:<sp/>str<sp/>=<sp/>Form(...,<sp/>description=</highlight><highlight class="stringliteral">&quot;Nombre<sp/>de<sp/>la<sp/>ontología&quot;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/>ipCoordinador:<sp/>str<sp/>=<sp/>Form(...,<sp/>description=</highlight><highlight class="stringliteral">&quot;IP<sp/>del<sp/>coordinador&quot;</highlight><highlight class="normal">),<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/>service:<sp/>PoblacionOntologiaUsuarioService<sp/>=<sp/>Depends(get_poblacion_pu_service)</highlight></codeline>
<codeline lineno="136"><highlight class="normal">):</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="138"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@brief<sp/>Carga<sp/>una<sp/>ontología<sp/>de<sp/>usuario<sp/>desde<sp/>archivo<sp/>(.owl).</highlight></codeline>
<codeline lineno="139"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="140"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>file<sp/>Archivo<sp/>.owl<sp/>a<sp/>cargar<sp/>(multipart/form-data).</highlight></codeline>
<codeline lineno="141"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>nombre<sp/>Identificador/nombre<sp/>de<sp/>la<sp/>ontología.</highlight></codeline>
<codeline lineno="142"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>ipCoordinador<sp/>IP<sp/>del<sp/>coordinador<sp/>(para<sp/>notificación/registro).</highlight></codeline>
<codeline lineno="143"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>service<sp/>Servicio<sp/>de<sp/>población<sp/>de<sp/>usuario<sp/>(inyectado).</highlight></codeline>
<codeline lineno="144"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="145"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@return<sp/>Status<sp/>201<sp/>Created<sp/>si<sp/>exitoso,<sp/>o<sp/>error<sp/>500<sp/>si<sp/>falla.</highlight></codeline>
<codeline lineno="146"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="147"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@exception<sp/>FileNotFoundError<sp/>Si<sp/>el<sp/>archivo<sp/>no<sp/>puede<sp/>procesarse.</highlight></codeline>
<codeline lineno="148"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@exception<sp/>RuntimeError<sp/>Si<sp/>falla<sp/>la<sp/>carga<sp/>en<sp/>el<sp/>motor<sp/>de<sp/>ontología.</highlight></codeline>
<codeline lineno="149"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="150"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@details</highlight></codeline>
<codeline lineno="151"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Carga<sp/>un<sp/>archivo<sp/>OWL<sp/>de<sp/>perfil<sp/>de<sp/>usuario<sp/>en<sp/>el<sp/>sistema.</highlight></codeline>
<codeline lineno="152"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="153"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Flujo:</highlight></codeline>
<codeline lineno="154"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.<sp/>Lee<sp/>contenido<sp/>del<sp/>archivo<sp/>desde<sp/>request</highlight></codeline>
<codeline lineno="155"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>2.<sp/>Delega<sp/>en<sp/>servicio<sp/>para<sp/>parsear<sp/>e<sp/>indexar</highlight></codeline>
<codeline lineno="156"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>3.<sp/>Registra<sp/>en<sp/>coordinador<sp/>(opcional)</highlight></codeline>
<codeline lineno="157"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="158"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@note<sp/>Esta<sp/>es<sp/>una<sp/>operación<sp/>potencialmente<sp/>larga.<sp/>Considerar:</highlight></codeline>
<codeline lineno="159"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.<sp/>Responder<sp/>202<sp/>Accepted<sp/>inmediatamente</highlight></codeline>
<codeline lineno="160"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>2.<sp/>Procesar<sp/>el<sp/>archivo<sp/>en<sp/>background<sp/>(Job<sp/>Queue)</highlight></codeline>
<codeline lineno="161"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>3.<sp/>Exponer<sp/>endpoint<sp/>de<sp/>status<sp/>del<sp/>job</highlight></codeline>
<codeline lineno="162"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="163"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@see<sp/>PoblacionOntologiaUsuarioService.cargarOntologia()</highlight></codeline>
<codeline lineno="164"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@see<sp/>docs/diagrams/flow_diagrams.md<sp/>(B)<sp/>Cargar<sp/>ontología<sp/>sequence</highlight></codeline>
<codeline lineno="165"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="166"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@warning<sp/>No<sp/>implementar<sp/>validación<sp/>de<sp/>tamaño<sp/>de<sp/>archivo<sp/>podría</highlight></codeline>
<codeline lineno="167"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>causar<sp/>ataques<sp/>DoS.<sp/>Añadir<sp/>límite<sp/>MAX_FILE_SIZE.</highlight></codeline>
<codeline lineno="168"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>file_content<sp/>=<sp/>await<sp/>file.read()</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>service.cargarOntologia(file_content,<sp/>nombre,<sp/>ipCoordinador)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>Exception<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>e:</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classfastapi_1_1exceptions_1_1_h_t_t_p_exception" kindref="compound">HTTPException</ref>(status_code=500,<sp/>detail=str(e))</highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight><highlight class="preprocessor">@ontologia_usuario_router.post(&quot;/registro_interaccion&quot;,<sp/>response_model=None,status_code=200)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="175" refid="namespacepoblacion_1a965e9c8e68abad903ca38aa547f1f94a" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">async<sp/>def<sp/></highlight><highlight class="normal"><ref refid="namespacepoblacion_1a965e9c8e68abad903ca38aa547f1f94a" kindref="member">registro_interaccion</ref>(</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/>data:<sp/>RegistroInteraccionDTO,</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/>service:<sp/>PoblacionOntologiaUsuarioService<sp/>=<sp/>Depends(get_poblacion_pu_service)</highlight></codeline>
<codeline lineno="178"><highlight class="normal">):</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="180"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@brief<sp/>Registra<sp/>una<sp/>interacción<sp/>del<sp/>usuario<sp/>con<sp/>un<sp/>objeto<sp/>inteligente.</highlight></codeline>
<codeline lineno="181"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="182"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>data<sp/>DTO<sp/>RegistroInteraccionDTO<sp/>con<sp/>detalles<sp/>de<sp/>la<sp/>interacción.</highlight></codeline>
<codeline lineno="183"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>service<sp/>Servicio<sp/>de<sp/>población<sp/>de<sp/>usuario.</highlight></codeline>
<codeline lineno="184"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="185"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@return<sp/>Status<sp/>200<sp/>OK<sp/>si<sp/>exitoso,<sp/>o<sp/>error<sp/>500.</highlight></codeline>
<codeline lineno="186"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="187"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@exception<sp/>ValueError<sp/>Si<sp/>los<sp/>datos<sp/>de<sp/>interacción<sp/>son<sp/>inválidos.</highlight></codeline>
<codeline lineno="188"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@exception<sp/>RuntimeError<sp/>Si<sp/>falla<sp/>la<sp/>persistencia<sp/>de<sp/>la<sp/>interacción.</highlight></codeline>
<codeline lineno="189"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="190"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@details</highlight></codeline>
<codeline lineno="191"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Registra<sp/>eventos/interacciones<sp/>del<sp/>usuario<sp/>con<sp/>objetos<sp/>en<sp/>su<sp/>ontología</highlight></codeline>
<codeline lineno="192"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>de<sp/>perfil.<sp/>Esto<sp/>permite<sp/>crear<sp/>un<sp/>historial<sp/>y<sp/>personalización<sp/>basada</highlight></codeline>
<codeline lineno="193"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>en<sp/>patrones<sp/>de<sp/>uso.</highlight></codeline>
<codeline lineno="194"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="195"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@see<sp/>PoblacionOntologiaUsuarioService.registroInteraccionUsuarioObjeto()</highlight></codeline>
<codeline lineno="196"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>service.registroInteraccionUsuarioObjeto(data)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>ValueError<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>e:</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classfastapi_1_1exceptions_1_1_h_t_t_p_exception" kindref="compound">HTTPException</ref>(status_code=500,<sp/>detail=str(e))</highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight><highlight class="preprocessor">@ontologia_usuario_router.delete(&quot;/eliminar_ontologia_usuario&quot;,<sp/>response_model=None,status_code=200)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202" refid="namespacepoblacion_1a561cc7e8acb2cdafce1a6b0e197cff6e" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">async<sp/>def<sp/></highlight><highlight class="normal"><ref refid="namespacepoblacion_1a561cc7e8acb2cdafce1a6b0e197cff6e" kindref="member">eliminar_ontologia_usuario</ref>(</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/>service:<sp/>PoblacionOntologiaUsuarioService<sp/>=<sp/>Depends(get_poblacion_pu_service)</highlight></codeline>
<codeline lineno="204"><highlight class="normal">):</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="206"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@brief<sp/>Elimina<sp/>la<sp/>ontología<sp/>del<sp/>perfil<sp/>de<sp/>usuario.</highlight></codeline>
<codeline lineno="207"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="208"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@param<sp/>service<sp/>Servicio<sp/>de<sp/>población<sp/>de<sp/>usuario.</highlight></codeline>
<codeline lineno="209"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="210"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@return<sp/>Status<sp/>200<sp/>OK<sp/>si<sp/>exitoso,<sp/>o<sp/>error<sp/>500.</highlight></codeline>
<codeline lineno="211"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="212"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@exception<sp/>RuntimeError<sp/>Si<sp/>falla<sp/>la<sp/>eliminación.</highlight></codeline>
<codeline lineno="213"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="214"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@details</highlight></codeline>
<codeline lineno="215"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Borra<sp/>completamente<sp/>la<sp/>ontología<sp/>del<sp/>perfil<sp/>de<sp/>usuario<sp/>del<sp/>sistema.</highlight></codeline>
<codeline lineno="216"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Operación<sp/>destructiva.</highlight></codeline>
<codeline lineno="217"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="218"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@note<sp/>Considerar<sp/>implementar<sp/>soft-delete<sp/>+<sp/>job<sp/>de<sp/>limpieza<sp/>asíncrona</highlight></codeline>
<codeline lineno="219"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>para<sp/>recuperabilidad.<sp/>O<sp/>requerir<sp/>confirmación.</highlight></codeline>
<codeline lineno="220"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="221"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@see<sp/>PoblacionOntologiaUsuarioService.eliminarOntologia()</highlight></codeline>
<codeline lineno="222"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@see<sp/>docs/diagrams/flow_diagrams.md<sp/>(D)<sp/>Eliminación<sp/>sequence</highlight></codeline>
<codeline lineno="223"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>service.eliminarOntologia()<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>ValueError<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>e:</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classfastapi_1_1exceptions_1_1_h_t_t_p_exception" kindref="compound">HTTPException</ref>(status_code=500,<sp/>detail=str(e))</highlight></codeline>
    </programlisting>
    <location file="micro_gestion_conocimiento/app/api/poblacion.py"/>
  </compounddef>
</doxygen>
